
<!DOCTYPE html>







<html data-bs-theme="auto" lang="en">
    <head>
        
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>
            
                RFC 2859 - A Time Sliding Window Three Colour Marker (TSWTCM)
            
        </title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://static.ietf.org/fonts/inter/import.css" rel="stylesheet">
        <link href="https://static.ietf.org/fonts/noto-sans-mono/import.css" rel="stylesheet">
        
            <link rel="stylesheet" href="https://static.ietf.org/dt/12.40.0/ietf/css/document_html_referenced.css">
            
            <script type="module" crossorigin="" src="https://static.ietf.org/dt/12.40.0/assets/embedded-2913faa2.js"></script>
<link href="https://static.ietf.org/dt/12.40.0/assets/create-pinia-singleton-11b3ca5c.js" type="text/javascript" crossorigin="anonymous" rel="modulepreload" as="script" />
<link href="https://static.ietf.org/dt/12.40.0/assets/Scrollbar-50c4ab08.js" type="text/javascript" crossorigin="anonymous" rel="modulepreload" as="script" />
            <script src="https://static.ietf.org/dt/12.40.0/ietf/js/document_html.js"></script>
            <script src="https://static.ietf.org/dt/12.40.0/ietf/js/theme.js"></script>
        
        <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/rfc2859/">
        <meta name="description"
            
                content="A Time Sliding Window Three Colour Marker (TSWTCM) (RFC 2859, )"
            >
        

<link rel="apple-touch-icon"
      sizes="180x180"
      href="https://static.ietf.org/dt/12.40.0/ietf/images/ietf-logo-nor-180.png">
<link rel="icon"
      sizes="32x32"
      href="https://static.ietf.org/dt/12.40.0/ietf/images/ietf-logo-nor-32.png">
<link rel="icon"
      sizes="16x16"
      href="https://static.ietf.org/dt/12.40.0/ietf/images/ietf-logo-nor-16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon"
      href="https://static.ietf.org/dt/12.40.0/ietf/images/ietf-logo-nor-mask.svg"
      color="#ffffff">
<meta name="msapplication-TileColor"
      content="#ffffff">
<meta name="theme-color"
      content="#ffffff">
        




<meta property="og:title" content="RFC 2859: A Time Sliding Window Three Colour Marker (TSWTCM)">
<meta property="og:url" content="https://datatracker.ietf.org/doc/html/rfc2859">
<link rel="canonical" href="https://datatracker.ietf.org/doc/html/rfc2859">
<meta property="og:site_name" content="IETF Datatracker">
<meta property="og:description" content="This memo defines a Time Sliding Window Three Colour Marker (TSWTCM), which can be used as a component in a Diff-Serv traffic conditioner. This memo defines an Experimental Protocol for the Internet community.">
<meta property="og:type" content="article">

<meta property="article:section" content="Individual Internet-Draft">

<meta property="article:author" content="Dr. Biswajit Nandy">
<meta property="article:author" content="Nabil Seddigh">
<meta property="article:author" content="Wenjia Fang">



        
        <style>
            
            .diff-form .select2-selection__rendered {
                direction: rtl;
                text-align: left;
            }
        </style>
    </head>
    <body>
        
        <noscript><iframe class="status" title="Site status" src="/status/latest"></iframe></noscript>
<div class="vue-embed" data-component="Status"></div>
        <div class="btn-toolbar sidebar-toolbar position-fixed top-0 end-0 m-2 m-lg-3 d-print-none">
            <div class="dropdown">
                <button class="btn btn-outline-secondary btn-sm me-1 dropdown-toggle d-flex align-items-center"
                    id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown"
                    aria-label="Toggle theme">
                        <i class="theme-icon-active bi bi-circle-half"></i>
                </button>

                <ul class="dropdown-menu" aria-labelledby="bd-theme">
                    <li>
                        <button type="button" class="dropdown-item d-flex align-items-center"
                            data-bs-theme-value="light" aria-pressed="false">
                            <i class="me-2 opacity-50 theme-icon bi bi-sun-fill"></i>
                            Light<i class="bi bi-check2 ms-auto d-none"></i>
                        </button>
                    </li>
                    <li>
                        <button type="button" class="dropdown-item d-flex align-items-center"
                            data-bs-theme-value="dark" aria-pressed="false">
                            <i class="me-2 opacity-50 theme-icon bi bi-moon-stars-fill"></i>
                            Dark<i class="bi bi-check2 ms-auto d-none"></i>
                        </button>
                    </li>
                    <li>
                        <button type="button" class="dropdown-item d-flex align-items-center active"
                            data-bs-theme-value="auto" aria-pressed="true">
                            <i class="me-2 opacity-50 theme-icon bi bi-circle-half"></i>
                            Auto<i class="bi bi-check2 ms-auto d-none"></i>
                        </button>
                    </li>
                </ul>
            </div>
            <button class="btn btn-outline-secondary btn-sm sidebar-toggle"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#sidebar"
                    aria-expanded="true"
                    aria-controls="sidebar"
                    aria-label="Toggle metadata sidebar"
                    title="Toggle metadata sidebar">
            <i class="bi bi-arrow-bar-left sidebar-shown"></i>
            <i class="bi bi-arrow-bar-right sidebar-collapsed"></i>
            </button>
        </div>
        <nav class="navbar bg-light-subtle px-1 fixed-top d-print-none d-md-none">
            <a class="nav-link ps-1"
               href="/doc/rfc2859/">
                
                    RFC 2859
                
                <br class="d-sm-none">

                <span class="ms-sm-3 badge rounded-pill badge-exp">
                    
                        Experimental
                    
                </span>
            </a>
            <button class="navbar-toggler p-1"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#docinfo-collapse"
                    aria-controls="docinfo-collapse"
                    aria-expanded="false"
                    aria-label="Show document information">
                <span class="navbar-toggler-icon small"></span>
            </button>
            <div class="navbar-nav navbar-nav-scroll overscroll-none collapse pt-1" id="docinfo-collapse">
                <div class="bg-light-subtle p-0">
                    <table class="table table-sm table-borderless small">
                        <tbody class="meta align-top">
                            <tr>
                                <th scope="row"></th>
                                <th scope="row">Title</th>
                                <td class="edit"></td>
                                <td>A Time Sliding Window Three Colour Marker (TSWTCM)</td>
                            </tr>
                        </tbody>
                        







<tbody class="meta align-top ">
    <tr>
        <th scope="row">Document</th>
        <th scope="row">Document type</th>
        <td class="edit"></td>
        <td>
            





<span class="text-success">RFC
    
    - Experimental
    
</span>

            
                
                    <br>June 2000
                
                <br>
                
                
                    <a class="btn btn-sm btn-warning"
                       title="Click to report an error in the document."
                       href="https://www.rfc-editor.org/errata.php#reportnew"
                       target="_blank">
                        Report errata
                    </a>
                
                
                
                
                
                
                
                
                
                    <div>
                        Was
                        <a href="/doc/draft-fang-diffserv-tc-tswtcm/00/">draft-fang-diffserv-tc-tswtcm</a>
                        (individual)
                    </div>
                
            
            
            
                




    	
        <div class="alert alert-warning small p-2 mt-2" role="alert">
            This RFC is labeled as "Legacy"; it was published before a formal source was recorded.
            This RFC is <strong>not endorsed by the IETF</strong> and has <strong>no formal standing</strong> in the
            <a href="/doc/rfc2026/">IETF standards process</a>.
        </div>
    


            
        </td>
    </tr>
    
        <tr>
            <td></td>
            <th scope="row">Select version</th>
            <td class="edit"></td>
            <td>
                



    <ul class="revision-list pagination pagination-sm text-center flex-wrap my-0">
        
            
            
                
                    <li class="page-item">
                        <a class="page-link"
                        href="/doc/html/draft-fang-diffserv-tc-tswtcm-00"
                        rel="nofollow">
                            00
                        </a>
                    </li>
                
            
            
            <li class="page-item rfc active">
                <a class="page-link"
                href="/doc/html/rfc2859">
                    RFC 2859
                </a>
            </li>
        
    </ul>

            </td>
        </tr>
        
            <tr>
                <td></td>
                <th scope="row">Compare versions</th>
                <td class="edit"></td>
                <td>
                    



<form class="form-horizontal diff-form"
      action="https://author-tools.ietf.org/iddiff"
      method="get"
      target="_blank">

            <select class="form-select form-select-sm mb-1 select2-field"
                    data-max-entries="1"
                    data-width="resolve"
                    data-allow-clear="false"
                    data-minimum-input-length="0"
                    aria-label="From revision"
                    name="url1">
                
                    <option value="rfc2859">
                        RFC 2859
                        
                    </option>
                
                    <option value="draft-fang-diffserv-tc-tswtcm-00" selected>
                        draft-fang-diffserv-tc-tswtcm-00
                        
                    </option>
                
                
            </select>

            <select class="form-select form-select-sm mb-1 select2-field"
                    data-max-entries="1"
                    data-width="resolve"
                    data-allow-clear="false"
                    data-minimum-input-length="0"
                    aria-label="To revision"
                    name="url2">
                
                    <option value="rfc2859" selected>
                        RFC 2859
                        
                    </option>
                
                    <option value="draft-fang-diffserv-tc-tswtcm-00">
                        draft-fang-diffserv-tc-tswtcm-00
                        
                    </option>
                
                
            </select>

            <button type="submit"
                    class="btn btn-primary btn-sm"
                    value="--html"
                    name="difftype">
                Side-by-side
            </button>
            
            <button type="submit"
                    class="btn btn-primary btn-sm"
                    value="--hwdiff"
                    name="difftype">
                Inline
            </button>

</form>
                </td>
            </tr>
        
    
    <tr>
        <td></td>
        <th scope="row">Authors</th>
        <td class="edit">
            
        </td>
        <td>
            
            
                <span ><a 
           title="Datatracker profile of Dr. Biswajit Nandy"
            href="/person/bnandy@nortelnetworks.com" >Dr. Biswajit Nandy</a> <a 
               href="mailto:bnandy%40nortelnetworks.com"
               aria-label="Compose email to bnandy@nortelnetworks.com"
               title="Compose email to bnandy@nortelnetworks.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Nabil Seddigh"
            href="/person/nseddigh@nortelnetworks.com" >Nabil Seddigh</a> <a 
               href="mailto:nseddigh%40nortelnetworks.com"
               aria-label="Compose email to nseddigh@nortelnetworks.com"
               title="Compose email to nseddigh@nortelnetworks.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Wenjia Fang"
            href="/person/wfang@cs.princeton.edu" >Wenjia Fang</a> <a 
               href="mailto:wfang%40cs.princeton.edu"
               aria-label="Compose email to wfang@cs.princeton.edu"
               title="Compose email to wfang@cs.princeton.edu">
                <i class="bi bi-envelope"></i></a></span>
            
            
                <br>
                <a class="btn btn-primary btn-sm mt-1" href="mailto:rfc2859@ietf.org?subject=rfc2859" title="Send email to the document authors">Email authors</a>
            
        </td>
    </tr>
    
    
    <tr>
        <td></td>
        <th scope="row">
            RFC stream
        </th>
        <td class="edit">
            
        </td>
        <td >
            
                
                
                    
                        Legacy
                    
                
                
            
        </td>
    </tr>
    
    <tr>
        <td></td>
        <th scope="row">
            Other formats
        </th>
        <td class="edit">
        </td>
        <td>
            
                
    <div class="buttonlist">
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="https://www.rfc-editor.org/rfc/rfc2859.txt">
            
                <i class="bi bi-file-text"></i> txt
            
        </a>
        
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="https://www.rfc-editor.org/rfc/rfc2859.html">
            
                <i class="bi bi-file-code"></i> html
            
        </a>
        
    
        
        <a class="btn btn-primary btn-sm"
          
            download="rfc2859.pdf"
          
         
          target="_blank"
          href="https://www.rfc-editor.org/rfc/pdfrfc/rfc2859.txt.pdf">
            
                <i class="bi bi-file-pdf"></i> pdf
            
        </a>
        
    
        
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="/doc/rfc2859/bibtex/">
            
                <i class="bi bi-file-ruled"></i> bibtex
            
        </a>
        
    
</div>

            
        </td>
    </tr>
    
    
        
    
</tbody>
                        <tr>
                            <th scope="row"></th>
                            <th scope="row"></th>
                            <td class="edit"></td>
                            <td>
                                <a class="btn btn-sm btn-warning mb-3"
                                target="_blank"
                                href="https://github.com/ietf-tools/datatracker/issues/new/choose">
                                    Report a bug
                                    <i class="bi bi-bug"></i>
                                </a>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </nav>
        <div class="row g-0">
            <div class="col-md-9 d-flex justify-content-center lh-sm"
                 data-bs-spy="scroll"
                 data-bs-target="#toc-nav"
                 data-bs-smooth-scroll="true"
                 tabindex="0"
                 id="content">
                
                    <div class="rfcmarkup">
                        <br class="noprint">
                        <!-- [html-validate-disable-block attr-quotes, void-style, element-permitted-content, heading-level -- FIXME: rfcmarkup/rfc2html generates HTML with issues] -->
                        <div class="rfcmarkup"><pre>Network Working Group                                             W. Fang
Request for Comments: 2859                           Princeton University
Category: Experimental                                         N. Seddigh
                                                                 B. Nandy
                                                          Nortel Networks
                                                                June 2000


           <span class="h1">A Time Sliding Window Three Colour Marker (TSWTCM)</span>

Status of this Memo

   This memo defines an Experimental Protocol for the Internet
   community.  It does not specify an Internet standard of any kind.
   Discussion and suggestions for improvement are requested.
   Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2000).  All Rights Reserved.

Abstract

   This memo defines a Time Sliding Window Three Colour Marker (TSWTCM),
   which can be used as a component in a Diff-Serv traffic conditioner
   [RFC2475, <a href="/doc/html/rfc2474">RFC2474</a>].  The marker is intended to mark packets that will
   be treated by the Assured Forwarding (AF) Per Hop Behaviour (PHB)
   [<a href="#ref-AFPHB" title="&quot;Assured Forwarding PHB Group&quot;">AFPHB</a>] in downstream routers. The TSWTCM meters a traffic stream and
   marks packets to be either green, yellow or red based on the measured
   throughput relative to two specified rates: Committed Target Rate
   (CTR) and Peak Target Rate (PTR).

<span class="h3"><a class="selflink" id="section-1.0" href="#section-1.0">1.0</a> Introduction</span>

   The Time Sliding Window Three Colour Marker (TSWTCM) is designed to
   mark packets of an IP traffic stream with colour of red, yellow or
   green. The marking is performed based on the measured throughput of
   the traffic stream as compared against the Committed Target Rate
   (CTR) and the Peak Target Rate (PTR). The TSWTCM is designed to mark
   packets contributing to sending rate below or equal to the CTR with
   green colour.  Packets contributing to the portion of the rate
   between the CTR and PTR are marked yellow. Packets causing the rate
   to exceed PTR are marked with red colour.

   The TSWTCM has been primarily designed for traffic streams that will
   be forwarded based on the AF PHB in core routers.





<span class="grey">Fang, et al.                  Experimental                      [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-1-2" ></span>
<span class="grey"><a href="/doc/html/rfc2859">RFC 2859</a>                         TSWTCM                        June 2000</span>


   The TSWTCM operates based on simple control theory principles of
   proportionally regulated feedback control.

<span class="h3"><a class="selflink" id="section-2.0" href="#section-2.0">2.0</a> Overview of TSWTCM</span>

   The TSWTCM consists of two independent components: a rate estimator,
   and a marker to associate a colour (drop precedence) with each
   packet.  The marker uses the algorithm specified in <a href="#section-4">section 4</a>. If the
   marker is used with the AF PHB, each colour would correspond to a
   level of drop precedence.

   The rate estimator provides an estimate of the running average
   bandwidth.  It takes into account burstiness and smoothes out its
   estimate to approximate the longer-term measured sending rate of the
   traffic stream.

   The marker uses the estimated rate to probabilistically associate
   packets with one of the three colours. Using a probabilistic function
   in the marker is beneficial to TCP flows as it reduces the likelihood
   of dropping multiple packets within a TCP window.  The marker also
   works correctly with UDP traffic, i.e., it associates the appropriate
   portion of the UDP packets with yellow or red colour marking if such
   flows transmit at a sustained level above the contracted rate.

                +---------+
                | Rate    | Rate
                |estimator| ==========
                |         |          |
                +---------+          |
                   ^                 V
                   |             +---------+
                   |             |         |
     Packet ====================&gt;| Marker  |====&gt; Marked packet stream
     Stream                      |         |    (Green, Yellow and Red)
                                 +---------+

                   Figure 1.  Block diagram for the TSWTCM

   The colour of the packet is translated into a DS field packet
   marking.  The colours red, yellow and green translate into DS
   codepoints representing drop precedence 2, 1 and 0 of a single AF
   class respectively.

   Based on feedback from four different implementations, the TSWTCM is
   simple and straightforward to implement.  The TSWTCM can be
   implemented in either software or hardware depending on the nature of
   the forwarding engine.




<span class="grey">Fang, et al.                  Experimental                      [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-1-3" ></span>
<span class="grey"><a href="/doc/html/rfc2859">RFC 2859</a>                         TSWTCM                        June 2000</span>


<span class="h3"><a class="selflink" id="section-3.0" href="#section-3.0">3.0</a> Rate Estimator</span>

   The Rate Estimator provides an estimate of the traffic stream&#x27;s
   arrival rate.  This rate should approximate the running average
   bandwidth of the traffic stream over a specific period of time
   (AVG_INTERVAL).

   This memo does not specify a particular algorithm for the Rate
   Estimator.  However, different Rate Estimators should yield similar
   results in terms of bandwidth estimation over the same fixed window
   (AVG_INTERVAL) of time.  Examples of Rate Estimation schemes include:
   exponential weighted moving average (EWMA) and the time-based rate
   estimation algorithm provided in [<a href="#ref-TON98" title="&quot;Explicit Allocation of Best Effort Packet Delivery Service&quot;">TON98</a>].

   Preferably, the Rate Estimator SHOULD maintain time-based history for
   its bandwidth estimation.  However, the Rate Estimator MAY utilize
   weight-based history.  In this case, the Estimator used should
   discuss how the weight translates into a time-window such as
   AVG_INTERVAL.

   Since weight-based Estimators track bandwidth based on packet
   arrivals, a high-sending traffic stream will decay its past history
   faster than a low-sending traffic stream. The time-based Estimator is
   intended to address this problem. The latter Rate Estimator utilizes
   a low-pass filter decaying function. [<a href="#ref-FANG99" title="&quot;The &#x27;Expected Capacity&#x27; Framework: Simulation Results&quot;">FANG99</a>] shows that this Rate
   Estimator decays past history independently of the traffic stream&#x27;s
   packet arrival rate.  The algorithm for the Rate Estimator from
   [<a href="#ref-TON98" title="&quot;Explicit Allocation of Best Effort Packet Delivery Service&quot;">TON98</a>] is shown in Figure 2 below.























<span class="grey">Fang, et al.                  Experimental                      [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span class="grey"><a href="/doc/html/rfc2859">RFC 2859</a>                         TSWTCM                        June 2000</span>


========================================================================
|Initially:                                                            |
|                                                                      |
|      AVG_INTERVAL = a constant;                                      |
|      avg-rate     = CTR;                                             |
|      t-front      = 0;                                               |
|                                                                      |
|Upon each packet&#x27;s arrival, the rate estimator updates its variables: |
|                                                                      |
|      Bytes_in_win = avg-rate * AVG_INTERVAL;                         |
|      New_bytes    = Bytes_in_win + pkt_size;                         |
|      avg-rate     = New_bytes/( now - t-front + AVG_INTERVAL);       |
|      t-front      = now;                                             |
|                                                                      |
|Where:                                                                |
|      now          = The time of the current packet arrival           |
|      pkt_size     = The packet size in bytes of the arriving packet  |
|      avg-rate     = Measured Arrival Rate of traffic stream          |
|      AVG_INTERVAL = Time window over which history is kept           |
|                                                                      |
|                                                                      |
|              Figure 2. Example Rate Estimator Algorithm              |
|                                                                      |
========================================================================

   The Rate Estimator MAY operate in the Router Forwarding Path or as a
   background function.  In the latter case, the implementation MUST
   ensure that the Estimator provides a reasonably accurate estimation
   of the sending rate over a window of time.  The Rate Estimator MAY
   sample only certain packets to determine the rate.

<span class="h3"><a class="selflink" id="section-4.0" href="#section-4.0">4.0</a> Marker</span>

   The Marker determines the colour of a packet based on the algorithm
   presented in Figure 3.  The overall effect of the marker on the
   packets of a traffic stream is to ensure that:

   - If the estimated average rate is less than or equal to the CTR,
     packets of the stream are designated green.

   - If the estimated average rate is greater than the CTR but less
     than or equal to the PTR, packets are designated yellow with
     probability P0 and designated green with probability (1-P0).
     P0 is the fraction of packets contributing to the measured
     rate beyond the CTR.






<span class="grey">Fang, et al.                  Experimental                      [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3-5" ></span>
<span class="grey"><a href="/doc/html/rfc2859">RFC 2859</a>                         TSWTCM                        June 2000</span>


   ===================================================================
   |       avg-rate = Estimated Avg Sending Rate of Traffic Stream   |
   |                                                                 |
   |       if (avg-rate &lt;= CTR)                                      |
   |               the packet is green;                              |
   |       else if (avg-rate &lt;= PTR) AND (avg-rate &gt; CTR)            |
   |                                 (avg-rate - CTR)                |
   |               calculate P0  =   ----------------                |
   |                                       avg-rate                  |
   |               with probability P0 the packet is yellow;         |
   |               with probability (1-P0) the packet is green;      |
   |       else                                                      |
   |                                 (avg-rate - PTR)                |
   |               calculate P1  =   ----------------                |
   |                                      avg-rate                   |
   |                                 (PTR - CTR)                     |
   |               calculate P2  =   -----------                     |
   |                                  avg-rate                       |
   |               with probability P1 the packet is red;            |
   |               with probability P2 the packet is yellow;         |
   |               with probability (1-(P1+P2)) the packet is green; |
   |                                                                 |
   |                 Figure 3. TSWTCM Marking Algorithm              |
   ===================================================================

   - If the estimated average rate is greater than the PTR,
     packets are designated red with probability P1, designated
     yellow with probability P2 and designated green with probability
     (1-(P1+P2)). P1 is the fraction of packets contributing
     to the measured rate beyond the PTR. P2 is the fraction of
     packets contributing to that part of the measured rate
     between CTR and PTR.

     The marker MUST operate in the forwarding path of all packets.

<span class="h3"><a class="selflink" id="section-5.0" href="#section-5.0">5.0</a> Configuration</span>

<span class="h3"><a class="selflink" id="section-5.1" href="#section-5.1">5.1</a> Rate estimator</span>

   If the Rate Estimator is time-based, it should base its bandwidth
   estimate on the last AVG_INTERVAL of time.  AVG_INTERVAL is the
   amount of history (recent time) that should be used by the algorithm
   in estimating the rate. Essentially it represents the window of time
   included in the Rate Estimator&#x27;s most recent result.

   The value of AVG_INTERVAL SHOULD be configurable, and MAY be
   specified in either milliseconds or seconds.




<span class="grey">Fang, et al.                  Experimental                      [Page 5]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3-6" ></span>
<span class="grey"><a href="/doc/html/rfc2859">RFC 2859</a>                         TSWTCM                        June 2000</span>


   [<a id="ref-TON98">TON98</a>] recommends that for the case where a single TCP flow
   constitutes the contracted traffic, AVG_INTERVAL be configured to
   approximately the same value as the RTT of the TCP flow.  Subsequent
   experimental studies in [<a href="#ref-GLOBE99" title="&quot;Bandwidth Assurance Issues for TCP flows in a Differentiated Services Network&quot;">GLOBE99</a>] utilized an AVG_INTERVAL value of 1
   second for scenarios where the contracted traffic consisted of
   multiple TCP flows, some with different RTT values. The latter work
   showed that AVG_INTERVAL values larger than the largest RTT for a TCP
   flow in an aggregate can be used as long as the long-term bandwidth
   assurance for TCP aggregates is measured at a granularity of seconds.
   The AVG_INTERVAL value of 1 second was also used successfully for
   aggregates with UDP flows.

   If the Rate Estimator is weight-based, the factor used in weighting
   history - WEIGHT - SHOULD be a configurable parameter.

   The Rate Estimator measures the average sending rate of the traffic
   stream based on the bytes in the IP header and IP payload. It does
   not include link-specific headers in its estimation of the sending
   rate.

<span class="h3"><a class="selflink" id="section-5.2" href="#section-5.2">5.2</a> Marker</span>

   The TSWTCM marker is configured by assigning values to its two
   traffic parameters: Committed Target Rate (CTR) and Peak Target Rate
   (PTR).

   The PTR MUST be equal to or greater than the CTR.

   The CTR and PTR MAY be specifiable in bits per second or bytes per
   second.

   The TSWTCM can be configured so that it essentially operates with a
   single rate. If the PTR is set to the same value as the CTR then all
   packets will be coloured either green or red. There will be no yellow
   packets.

   If the PTR is set to link speed and the CTR is set below the PTR then
   all packets will be coloured either green or yellow. There will be no
   red packets.

<span class="h3"><a class="selflink" id="section-6.0" href="#section-6.0">6.0</a> Scaling properties</span>

   The TSWTCM can work with both sender-based service level agreements
   and receiver-based service level agreements.







<span class="grey">Fang, et al.                  Experimental                      [Page 6]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3-7" ></span>
<span class="grey"><a href="/doc/html/rfc2859">RFC 2859</a>                         TSWTCM                        June 2000</span>


<span class="h3"><a class="selflink" id="section-7.0" href="#section-7.0">7.0</a> Services</span>

   There are no restrictions on the type of traffic stream for which the
   TSWTCM can be utilized. It can be used to meter and mark individual
   TCP flows, aggregated TCP flows, aggregates with both TCP and UDP
   flows [<a href="#ref-UDPTCP" title="&quot;The Dynamics of TCP and UDP Interaction in IP-QoS Differentiated Service Networks&quot;">UDPTCP</a>] etc.

   The TSWTCM can be used in conjunction with the AF PHB to create a
   service where a service provider can provide decreasing levels of
   bandwidth assurance for packets originating from customer sites.

   With sufficient over-provisioning, customers are assured of mostly
   achieving their CTR.  Sending rates beyond the CTR will have lesser
   assurance of being achieved. Sending rates beyond the PTR have the
   least chance of being achieved due to high drop probability of red
   packets.

   Based on the above, the Service Provider can charge a tiered level of
   service based on the final achieved rate.

<span class="h3"><a class="selflink" id="section-8.0" href="#section-8.0">8.0</a> Security Considerations</span>

   TSWTCM has no known security concerns.

<span class="h3"><a class="selflink" id="section-9.0" href="#section-9.0">9.0</a> Acknowledgements</span>

   The authors would like to thank Juha Heinanen, Kenjiro Cho, Ikjun
   Yeom and Jamal Hadi Salim for their comments on earlier versions of
   this document. Their suggestions are incorporated in this memo.

<span class="h3"><a class="selflink" id="section-10.0" href="#section-10.0">10.0</a> References</span>

   [<a id="ref-TON98">TON98</a>]   D.D. Clark, W. Fang, &quot;Explicit Allocation of Best Effort
             Packet Delivery Service&quot;, IEEE/ACM Transactions on
             Networking, August 1998, Vol 6. No. 4, pp. 362-373.

   [<a id="ref-RFC2474">RFC2474</a>] Nichols, K., Blake, S., Baker, F. and D. Black, &quot;Definition
             of the Differentiated  Services Field (DS Field) in the
             IPv4 and IPv6 Headers&quot;, <a href="/doc/html/rfc2474">RFC 2474</a>, December 1998.

   [<a id="ref-RFC2475">RFC2475</a>] Black, D., Blake, S., Carlson, M., Davies, E., Wang, Z. and
             W. Weiss, &quot;An Architecture for Differentiated Services&quot;,
             <a href="/doc/html/rfc2475">RFC 2475</a>, December 1998.

   [<a id="ref-FANG99">FANG99</a>]  Fang, W. &quot;The &#x27;Expected Capacity&#x27; Framework: Simulation
             Results&quot;, Princeton University Technical Report, TR-601-99,
             March, 1999.




<span class="grey">Fang, et al.                  Experimental                      [Page 7]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3-8" ></span>
<span class="grey"><a href="/doc/html/rfc2859">RFC 2859</a>                         TSWTCM                        June 2000</span>


   [<a id="ref-YEOM99">YEOM99</a>]  I. Yeom, N. Reddy, &quot;Impact of Marking Strategy on
             Aggregated Flows in a Differentiated Services Network&quot;,
             Proceedings of IwQoS, May 1999.

   [<a id="ref-AFPHB">AFPHB</a>]   Heinanen, J., Baker, F., Weiss, W. and J. Wroclawski,
             &quot;Assured Forwarding PHB Group&quot;, <a href="/doc/html/rfc2597">RFC 2597</a>, June 1999.

   [<a id="ref-UDPTCP">UDPTCP</a>]  P. Pieda, N. Seddigh, B. Nandy, &quot;The Dynamics of TCP and
             UDP Interaction in IP-QoS Differentiated Service Networks&quot;,
             Proceedings of the 3rd Canadian Conference on Broadband
             Research (CCBR), Ottawa, November 1999

   [<a id="ref-GLOBE99">GLOBE99</a>] N. Seddigh, B. Nandy, P. Pieda, &quot;Bandwidth Assurance Issues
             for TCP flows in a Differentiated Services Network&quot;,
             Proceedings of Global Internet Symposium, Globecom 99, Rio
             De Janeiro, December 1999.

<span class="h3"><a class="selflink" id="section-11.0" href="#section-11.0">11.0</a> Authors&#x27; Addresses</span>

   Wenjia Fang
   Computer Science Dept.
   35 Olden Street,
   Princeton, NJ08540

   EMail: wfang@cs.princeton.edu


   Nabil Seddigh
   Nortel Networks,
   3500 Carling Ave
   Ottawa, ON, K2H 8E9
   Canada

   EMail: nseddigh@nortelnetworks.com


   Biswajit Nandy
   Nortel Networks,
   3500 Carling Ave
   Ottawa, ON, K2H 8E9
   Canada

   EMail: bnandy@nortelnetworks.com








<span class="grey">Fang, et al.                  Experimental                      [Page 8]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3-9" ></span>
<span class="grey"><a href="/doc/html/rfc2859">RFC 2859</a>                         TSWTCM                        June 2000</span>


<span class="h2"><a class="selflink" id="section-12" href="#section-12">12</a>.  Full Copyright Statement</span>

   Copyright (C) The Internet Society (2000).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   &quot;AS IS&quot; basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Fang, et al.                  Experimental                      [Page 9]
</pre></div>
                    </div>
                
            </div>
            <div class="d-print-none col-md-3 bg-light-subtle collapse show" id="sidebar">
                <div class="position-fixed border-start sidebar overflow-scroll overscroll-none no-scrollbar">
                    <div class="d-flex flex-column vh-100 pt-2 pt-lg-3 ps-3 pl-md-2 pl-lg-3">
                        <div>
                            <a class="btn btn-primary btn-sm" href="/doc/rfc2859/">Datatracker</a>
                            <p class="fw-bold pt-2">
                                
                                    RFC 2859
                                
                                <br>
                                





<span class="text-success">RFC
    
    - Experimental
    
</span>

                            </p>
                        </div>
                        
                        <ul class="nav nav-tabs nav-fill small me-2" role="tablist">
                            <li class="nav-item" role="presentation" title="Document information">
                                <button class="nav-link px-2"
                                        id="docinfo-tab"
                                        data-bs-toggle="tab"
                                        data-bs-target="#docinfo-tab-pane"
                                        type="button"
                                        role="tab"
                                        aria-controls="docinfo-tab-pane"
                                        aria-selected="true">
                                    <i class="bi bi-info-circle"></i><span class="d-none d-md-block d-xl-inline ms-xl-1">Info</span>
                                </button>
                            </li>
                            <li class="nav-item" role="presentation" title="Table of contents">
                                <button class="nav-link px-2"
                                        id="toc-tab"
                                        data-bs-toggle="tab"
                                        data-bs-target="#toc-tab-pane"
                                        type="button"
                                        role="tab"
                                        aria-controls="toc-tab-pane"
                                        aria-selected="false">
                                    <i class="bi bi-list-ol"></i><span class="d-none d-md-block d-xl-inline ms-xl-1">Contents</span>
                                </button>
                            </li>
                            <li class="nav-item" role="presentation" title="Preferences">
                                <button class="nav-link px-2"
                                        id="pref-tab"
                                        data-bs-toggle="tab"
                                        data-bs-target="#pref-tab-pane"
                                        type="button"
                                        role="tab"
                                        aria-controls="pref-tab-pane"
                                        aria-selected="false">
                                    <i class="bi bi-gear"></i><span class="d-none d-md-block d-xl-inline ms-xl-1">Prefs</span>
                                </button>
                            </li>
                        </ul>
                        <div class="overflow-auto tab-content pt-2 me-2">
                            <div class="tab-pane"
                                 id="docinfo-tab-pane"
                                 role="tabpanel"
                                 aria-labelledby="docinfo-tab"
                                 tabindex="0">
                                <table class="table table-sm table-borderless">
                                    







<tbody class="meta align-top ">
    <tr>
        <th scope="row">Document</th>
        <th scope="row">Document type</th>
        <td class="edit"></td>
        <td>
            





<span class="text-success">RFC
    
    - Experimental
    
</span>

            
                
                    <br>June 2000
                
                <br>
                
                
                    <a class="btn btn-sm btn-warning"
                       title="Click to report an error in the document."
                       href="https://www.rfc-editor.org/errata.php#reportnew"
                       target="_blank">
                        Report errata
                    </a>
                
                
                
                
                
                
                
                
                
                    <div>
                        Was
                        <a href="/doc/draft-fang-diffserv-tc-tswtcm/00/">draft-fang-diffserv-tc-tswtcm</a>
                        (individual)
                    </div>
                
            
            
            
                




    	
        <div class="alert alert-warning small p-2 mt-2" role="alert">
            This RFC is labeled as "Legacy"; it was published before a formal source was recorded.
            This RFC is <strong>not endorsed by the IETF</strong> and has <strong>no formal standing</strong> in the
            <a href="/doc/rfc2026/">IETF standards process</a>.
        </div>
    


            
        </td>
    </tr>
    
        <tr>
            <td></td>
            <th scope="row">Select version</th>
            <td class="edit"></td>
            <td>
                



    <ul class="revision-list pagination pagination-sm text-center flex-wrap my-0">
        
            
            
                
                    <li class="page-item">
                        <a class="page-link"
                        href="/doc/html/draft-fang-diffserv-tc-tswtcm-00"
                        rel="nofollow">
                            00
                        </a>
                    </li>
                
            
            
            <li class="page-item rfc active">
                <a class="page-link"
                href="/doc/html/rfc2859">
                    RFC 2859
                </a>
            </li>
        
    </ul>

            </td>
        </tr>
        
            <tr>
                <td></td>
                <th scope="row">Compare versions</th>
                <td class="edit"></td>
                <td>
                    



<form class="form-horizontal diff-form"
      action="https://author-tools.ietf.org/iddiff"
      method="get"
      target="_blank">

            <select class="form-select form-select-sm mb-1 select2-field"
                    data-max-entries="1"
                    data-width="resolve"
                    data-allow-clear="false"
                    data-minimum-input-length="0"
                    aria-label="From revision"
                    name="url1">
                
                    <option value="rfc2859">
                        RFC 2859
                        
                    </option>
                
                    <option value="draft-fang-diffserv-tc-tswtcm-00" selected>
                        draft-fang-diffserv-tc-tswtcm-00
                        
                    </option>
                
                
            </select>

            <select class="form-select form-select-sm mb-1 select2-field"
                    data-max-entries="1"
                    data-width="resolve"
                    data-allow-clear="false"
                    data-minimum-input-length="0"
                    aria-label="To revision"
                    name="url2">
                
                    <option value="rfc2859" selected>
                        RFC 2859
                        
                    </option>
                
                    <option value="draft-fang-diffserv-tc-tswtcm-00">
                        draft-fang-diffserv-tc-tswtcm-00
                        
                    </option>
                
                
            </select>

            <button type="submit"
                    class="btn btn-primary btn-sm"
                    value="--html"
                    name="difftype">
                Side-by-side
            </button>
            
            <button type="submit"
                    class="btn btn-primary btn-sm"
                    value="--hwdiff"
                    name="difftype">
                Inline
            </button>

</form>
                </td>
            </tr>
        
    
    <tr>
        <td></td>
        <th scope="row">Authors</th>
        <td class="edit">
            
        </td>
        <td>
            
            
                <span ><a 
           title="Datatracker profile of Dr. Biswajit Nandy"
            href="/person/bnandy@nortelnetworks.com" >Dr. Biswajit Nandy</a> <a 
               href="mailto:bnandy%40nortelnetworks.com"
               aria-label="Compose email to bnandy@nortelnetworks.com"
               title="Compose email to bnandy@nortelnetworks.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Nabil Seddigh"
            href="/person/nseddigh@nortelnetworks.com" >Nabil Seddigh</a> <a 
               href="mailto:nseddigh%40nortelnetworks.com"
               aria-label="Compose email to nseddigh@nortelnetworks.com"
               title="Compose email to nseddigh@nortelnetworks.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Wenjia Fang"
            href="/person/wfang@cs.princeton.edu" >Wenjia Fang</a> <a 
               href="mailto:wfang%40cs.princeton.edu"
               aria-label="Compose email to wfang@cs.princeton.edu"
               title="Compose email to wfang@cs.princeton.edu">
                <i class="bi bi-envelope"></i></a></span>
            
            
                <br>
                <a class="btn btn-primary btn-sm mt-1" href="mailto:rfc2859@ietf.org?subject=rfc2859" title="Send email to the document authors">Email authors</a>
            
        </td>
    </tr>
    
    
    <tr>
        <td></td>
        <th scope="row">
            RFC stream
        </th>
        <td class="edit">
            
        </td>
        <td >
            
                
                
                    
                        Legacy
                    
                
                
            
        </td>
    </tr>
    
    <tr>
        <td></td>
        <th scope="row">
            Other formats
        </th>
        <td class="edit">
        </td>
        <td>
            
                
    <div class="buttonlist">
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="https://www.rfc-editor.org/rfc/rfc2859.txt">
            
                <i class="bi bi-file-text"></i> txt
            
        </a>
        
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="https://www.rfc-editor.org/rfc/rfc2859.html">
            
                <i class="bi bi-file-code"></i> html
            
        </a>
        
    
        
        <a class="btn btn-primary btn-sm"
          
            download="rfc2859.pdf"
          
         
          target="_blank"
          href="https://www.rfc-editor.org/rfc/pdfrfc/rfc2859.txt.pdf">
            
                <i class="bi bi-file-pdf"></i> pdf
            
        </a>
        
    
        
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="/doc/rfc2859/bibtex/">
            
                <i class="bi bi-file-ruled"></i> bibtex
            
        </a>
        
    
</div>

            
        </td>
    </tr>
    
    
        
    
</tbody>
                                </table>
                                <a class="btn btn-sm btn-warning mb-3"
                                target="_blank"
                                href="https://github.com/ietf-tools/datatracker/issues/new/choose">
                                    Report a datatracker bug
                                    <i class="bi bi-bug"></i>
                                </a>
                            </div>
                            <div class="tab-pane mb-5"
                                 id="toc-tab-pane"
                                 role="tabpanel"
                                 aria-labelledby="toc-tab"
                                 tabindex="0">
                                <nav class="nav nav-pills flex-column small" id="toc-nav">
                                </nav>
                            </div>
                            <div class="tab-pane mb-5 small"
                                 id="pref-tab-pane"
                                 role="tabpanel"
                                 aria-labelledby="pref-tab"
                                 tabindex="0">
                                <label class="form-label fw-bold mb-2">Show sidebar by default</label>
                                <div class="btn-group-vertical btn-group-sm d-flex" role="group">
                                    <input type="radio" class="btn-check" name="sidebar" id="on-radio">
                                    <label class="btn btn-outline-primary" for="on-radio">Yes</label>
                                    <input type="radio" class="btn-check" name="sidebar" id="off-radio">
                                    <label class="btn btn-outline-primary" for="off-radio">No</label>
                                </div>
                                <label class="form-label fw-bold mt-4 mb-2">Tab to show by default</label>
                                <div class="btn-group-vertical btn-group-sm d-flex" role="group">
                                    <input type="radio" class="btn-check" name="deftab" id="docinfo-radio">
                                    <label class="btn btn-outline-primary" for="docinfo-radio">
                                        <i class="bi bi-info-circle me-1"></i>Info
                                    </label>
                                    <input type="radio" class="btn-check" name="deftab" id="toc-radio">
                                    <label class="btn btn-outline-primary" for="toc-radio">
                                        <i class="bi bi-list-ol me-1"></i>Contents
                                    </label>
                                </div>
                                <label class="form-label fw-bold mt-4 mb-2">HTMLization configuration</label>
                                <div class="btn-group-vertical btn-group-sm d-flex" role="group">
                                    <input type="radio" class="btn-check" name="htmlconf" id="txt-radio">
                                    <label class="btn btn-outline-primary" for="txt-radio" title="This is the traditional HTMLization method.">
                                        <i class="bi bi-badge-sd me-1"></i>HTMLize the plaintext
                                    </label>
                                    <input type="radio" class="btn-check" name="htmlconf" id="html-radio">
                                    <label class="btn btn-outline-primary" for="html-radio" title="This is the modern HTMLization method.">
                                        <i class="bi bi-badge-hd me-1"></i>Plaintextify the HTML
                                    </label>
                                </div>
                                <label class="form-label fw-bold mt-4 mb-2" for="ptsize">Maximum font size</label>
                                <input type="range" class="form-range" min="7" max="16" id="ptsize" oninput="ptdemo.value = ptsize.value">
                                <label class="form-label fw-bold mt-4 mb-2">Page dependencies</label>
                                <div class="btn-group-vertical btn-group-sm d-flex" role="group">
                                    <input type="radio" class="btn-check" name="pagedeps" id="inline-radio">
                                    <label class="btn btn-outline-primary" for="inline-radio" title="Generate larger, standalone web pages that do not require network access to render.">
                                        <i class="bi bi-box me-1"></i>Inline
                                    </label>
                                    <input type="radio" class="btn-check" name="pagedeps" id="reference-radio">
                                    <label class="btn btn-outline-primary" for="reference-radio" title="Generate regular web pages that require network access to render.">
                                        <i class="bi bi-link-45deg me-1"></i>Reference
                                    </label>
                                </div>
                                <label class="form-label fw-bold mt-4 mb-2">Citation links</label>
                                <div class="btn-group-vertical btn-group-sm d-flex" role="group">
                                    <input type="radio" class="btn-check" name="reflinks" id="refsection-radio">
                                    <label class="btn btn-outline-primary" for="refsection-radio" title="Citation links go to the reference section.">
                                        <i class="bi bi-arrow-clockwise"></i> Go to reference section
                                    </label>
                                    <input type="radio" class="btn-check" name="reflinks" id="citation-radio">
                                    <label class="btn btn-outline-primary" for="citation-radio" title="Citation links go directly to the cited document.">
                                        <i class="bi bi-link-45deg me-1"></i>Go to linked document
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
<script type="text/javascript">
  var _paq = window._paq || [];
  
  _paq.push(['disableCookies']);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//analytics.ietf.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', 7]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//analytics.ietf.org/piwik.php?idsite=7" style="border:0;" alt="" /></p></noscript>

    <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9405d9096ab87a08',t:'MTc0NzM0NTc5NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
