<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title></title>
    <base href="./" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="https://www.viarail.ca/favicon.ico" />
    <script>
      (()=>{"use strict";var t;!function(t){t.DEV="dev",t["DEV-CONFIG"]="dev-config",t.PPD="ppd",t.PROD="prod",t.QA="qa",t.QC="qc",t.TRAINING="training"}(t||(t={}));const e=["en","fr"],o=["/booking"],n=["google-results"],s=["/apidocs"],i=["/.well-known/apple-app-site-association"],r=["localhost","127.0.0.1","0.0.0.0"],a="token",c="terminalId",l="caaCardNumber";class h{constructor(t,e){this.location=t,this.navigatorLanguage=e}getRedirectHref(){const t=this.getExceptionHref(s),e=this.getExceptionHref(i);if(t&&!this.isProd()||e)return t;const o=this.getLocale(this.location.pathname),n=this.getSpaPath(this.location.pathname),r=this.getNewSearchParams(this.location.search);return`${this.location.protocol}//${this.location.host}/${o}${n}${r}`}getExceptionHref(t){const e=t.find((t=>this.location.pathname.startsWith(t)));if(!e)return null;const o=this.location.href;return o.endsWith(e)?`${o}/`:o}getLocale(t){var o,n;let s=null===(o=t.split("/")[1])||void 0===o?void 0:o.split("-")[0];return e.includes(s)||(s=null===(n=this.navigatorLanguage)||void 0===n?void 0:n.split("-")[0]),e.includes(s)||(s="en"),s}getSpaPath(t){const e=t.split("/")[1],s=e?t.substring(t.indexOf(e)+e.length):null;return!s&&n.some((t=>null==e?void 0:e.startsWith(t)))?o[0]+"/create/trip/1":s&&o.some((t=>s.startsWith(t)))?o.some((t=>s.endsWith(t)))?s+"/":s:o[0]+"/"}getNewSearchParams(t){const e=new URLSearchParams(t),o=e.get(a);if(o){try{const t=o.replace("-","+").replace("_","/"),e=atob(t);localStorage.setItem("VIA_RAIL_RESERVIA_viarail_session_token",e)}catch(t){console.error(t)}e.delete(a)}const n=e.get(c);if(n){try{localStorage.setItem("VIA_RAIL_RESERVIA_terminal_id",n)}catch(t){console.error(t)}e.delete(c)}const s=e.get(l);if(s){try{sessionStorage.setItem("VIA_RAIL_RESERVIA_caa_card_ref",s)}catch(t){console.error(t)}e.delete(l)}return e.toString()?`?${e.toString()}`:""}isAssetResource(t){const e=t.split("/");return e[e.length-1].includes(".")}isProd(){return this.getEnvironmentFromHostname()===t.PROD}getEnvironmentFromHostname(){const e=this.location.hostname.toLowerCase();if(r.some((t=>e.includes(t))))return t.DEV;const o=e.replace("www.","").split(".").filter((t=>t)),n=t[o[0].toUpperCase()];return n&&![t.PROD,t.PPD].includes(n)?n:t.PROD}}window.addEventListener("load",(()=>{const t=new h(location,navigator.language),e=t.getRedirectHref();t.isAssetResource(location.pathname)||(window.history.replaceState({},"",e),location.href=e)}))})();
    </script>
  </head>
  <body></body>
</html>
