<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>The MySQL &#8220;swap insanity&#8221; problem and the effects of the NUMA architecture &#8211; Jeremy Cole</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="https://blog.jcole.us/xmlrpc.php" />
<!--[if lt IE 9]>
<script src="https://s2.wp.com/wp-content/themes/pub/publish/js/html5.js" type="text/javascript"></script>
<![endif]-->

<script type="text/javascript">
  WebFontConfig = {"google":{"families":["Source+Sans+Pro:b:latin,latin-ext","Source+Sans+Pro:r,i,b,bi:latin,latin-ext"]},"api_url":"https:\/\/fonts-api.wp.com\/css"};
  (function() {
    var wf = document.createElement('script');
    wf.src = 'https://s0.wp.com/wp-content/plugins/custom-fonts/js/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style id="jetpack-custom-fonts-css">.wf-active .site-title{font-family:"Source Sans Pro",sans-serif;font-style:normal;font-weight:700}.wf-active body{font-family:"Source Sans Pro",sans-serif}.wf-active body{font-family:"Source Sans Pro",sans-serif}.wf-active body{font-family:"Source Sans Pro",sans-serif}.wf-active th{font-weight:700;font-family:"Source Sans Pro",sans-serif;font-style:normal}.wf-active .single .format-aside h1.entry-title, .wf-active .single .format-chat h1.entry-title, .wf-active .single .format-gallery h1.entry-title, .wf-active .single .format-image h1.entry-title, .wf-active .single .format-link h1.entry-title, .wf-active .single .format-quote h1.entry-title, .wf-active .single .format-status h1.entry-title{font-family:"Source Sans Pro",sans-serif;font-style:normal;font-weight:700}.wf-active h1, .wf-active h2, .wf-active h3, .wf-active h4, .wf-active h5, .wf-active h6{font-weight:700;font-family:"Source Sans Pro",sans-serif;font-style:normal}.wf-active h1{font-style:normal;font-weight:700}.wf-active h2{font-style:normal;font-weight:700}.wf-active h3{font-style:normal;font-weight:700}.wf-active h4, .wf-active h5, .wf-active h6{font-weight:700;font-style:normal}</style>
<meta name='robots' content='max-image-preview:large' />

<!-- Async WordPress.com Remote Login -->
<script id="wpcom_remote_login_js">
var wpcom_remote_login_extra_auth = '';
function wpcom_remote_login_remove_dom_node_id( element_id ) {
	var dom_node = document.getElementById( element_id );
	if ( dom_node ) { dom_node.parentNode.removeChild( dom_node ); }
}
function wpcom_remote_login_remove_dom_node_classes( class_name ) {
	var dom_nodes = document.querySelectorAll( '.' + class_name );
	for ( var i = 0; i < dom_nodes.length; i++ ) {
		dom_nodes[ i ].parentNode.removeChild( dom_nodes[ i ] );
	}
}
function wpcom_remote_login_final_cleanup() {
	wpcom_remote_login_remove_dom_node_classes( "wpcom_remote_login_msg" );
	wpcom_remote_login_remove_dom_node_id( "wpcom_remote_login_key" );
	wpcom_remote_login_remove_dom_node_id( "wpcom_remote_login_validate" );
	wpcom_remote_login_remove_dom_node_id( "wpcom_remote_login_js" );
	wpcom_remote_login_remove_dom_node_id( "wpcom_request_access_iframe" );
	wpcom_remote_login_remove_dom_node_id( "wpcom_request_access_styles" );
}

// Watch for messages back from the remote login
window.addEventListener( "message", function( e ) {
	if ( e.origin === "https://r-login.wordpress.com" ) {
		var data = {};
		try {
			data = JSON.parse( e.data );
		} catch( e ) {
			wpcom_remote_login_final_cleanup();
			return;
		}

		if ( data.msg === 'LOGIN' ) {
			// Clean up the login check iframe
			wpcom_remote_login_remove_dom_node_id( "wpcom_remote_login_key" );

			var id_regex = new RegExp( /^[0-9]+$/ );
			var token_regex = new RegExp( /^.*|.*|.*$/ );
			if (
				token_regex.test( data.token )
				&& id_regex.test( data.wpcomid )
			) {
				// We have everything we need to ask for a login
				var script = document.createElement( "script" );
				script.setAttribute( "id", "wpcom_remote_login_validate" );
				script.src = '/remote-login.php?wpcom_remote_login=validate'
					+ '&wpcomid=' + data.wpcomid
					+ '&token=' + encodeURIComponent( data.token )
					+ '&host=' + window.location.protocol
					+ '//' + window.location.hostname
					+ '&postid=522'
					+ '&is_singular=1';
				document.body.appendChild( script );
			}

			return;
		}

		// Safari ITP, not logged in, so redirect
		if ( data.msg === 'LOGIN-REDIRECT' ) {
			window.location = 'https://wordpress.com/log-in?redirect_to=' + window.location.href;
			return;
		}

		// Safari ITP, storage access failed, remove the request
		if ( data.msg === 'LOGIN-REMOVE' ) {
			var css_zap = 'html { -webkit-transition: margin-top 1s; transition: margin-top 1s; } /* 9001 */ html { margin-top: 0 !important; } * html body { margin-top: 0 !important; } @media screen and ( max-width: 782px ) { html { margin-top: 0 !important; } * html body { margin-top: 0 !important; } }';
			var style_zap = document.createElement( 'style' );
			style_zap.type = 'text/css';
			style_zap.appendChild( document.createTextNode( css_zap ) );
			document.body.appendChild( style_zap );

			var e = document.getElementById( 'wpcom_request_access_iframe' );
			e.parentNode.removeChild( e );

			document.cookie = 'wordpress_com_login_access=denied; path=/; max-age=31536000';

			return;
		}

		// Safari ITP
		if ( data.msg === 'REQUEST_ACCESS' ) {
			console.log( 'request access: safari' );

			// Check ITP iframe enable/disable knob
			if ( wpcom_remote_login_extra_auth !== 'safari_itp_iframe' ) {
				return;
			}

			// If we are in a "private window" there is no ITP.
			var private_window = false;
			try {
				var opendb = window.openDatabase( null, null, null, null );
			} catch( e ) {
				private_window = true;
			}

			if ( private_window ) {
				console.log( 'private window' );
				return;
			}

			var iframe = document.createElement( 'iframe' );
			iframe.id = 'wpcom_request_access_iframe';
			iframe.setAttribute( 'scrolling', 'no' );
			iframe.setAttribute( 'sandbox', 'allow-storage-access-by-user-activation allow-scripts allow-same-origin allow-top-navigation-by-user-activation' );
			iframe.src = 'https://r-login.wordpress.com/remote-login.php?wpcom_remote_login=request_access&origin=' + encodeURIComponent( data.origin ) + '&wpcomid=' + encodeURIComponent( data.wpcomid );

			var css = 'html { -webkit-transition: margin-top 1s; transition: margin-top 1s; } /* 9001 */ html { margin-top: 46px !important; } * html body { margin-top: 46px !important; } @media screen and ( max-width: 660px ) { html { margin-top: 71px !important; } * html body { margin-top: 71px !important; } #wpcom_request_access_iframe { display: block; height: 71px !important; } } #wpcom_request_access_iframe { border: 0px; height: 46px; position: fixed; top: 0; left: 0; width: 100%; min-width: 100%; z-index: 99999; background: #23282d; } ';

			var style = document.createElement( 'style' );
			style.type = 'text/css';
			style.id = 'wpcom_request_access_styles';
			style.appendChild( document.createTextNode( css ) );
			document.body.appendChild( style );

			document.body.appendChild( iframe );
		}

		if ( data.msg === 'DONE' ) {
			wpcom_remote_login_final_cleanup();
		}
	}
}, false );

// Inject the remote login iframe after the page has had a chance to load
// more critical resources
window.addEventListener( "DOMContentLoaded", function( e ) {
	var iframe = document.createElement( "iframe" );
	iframe.style.display = "none";
	iframe.setAttribute( "scrolling", "no" );
	iframe.setAttribute( "id", "wpcom_remote_login_key" );
	iframe.src = "https://r-login.wordpress.com/remote-login.php"
		+ "?wpcom_remote_login=key"
		+ "&origin=aHR0cHM6Ly9ibG9nLmpjb2xlLnVz"
		+ "&wpcomid=30683698"
		+ "&time=1747341586";
	document.body.appendChild( iframe );
}, false );
</script>
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//s2.wp.com' />
<link rel='dns-prefetch' href='//s1.wp.com' />
<link rel='dns-prefetch' href='//widgets.wp.com' />
<link rel="alternate" type="application/rss+xml" title="Jeremy Cole &raquo; Feed" href="https://blog.jcole.us/feed/" />
<link rel="alternate" type="application/rss+xml" title="Jeremy Cole &raquo; Comments Feed" href="https://blog.jcole.us/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Jeremy Cole &raquo; The MySQL &#8220;swap insanity&#8221; problem and the effects of the NUMA&nbsp;architecture Comments Feed" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/feed/" />
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
	<script type="text/javascript">
/* <![CDATA[ */
window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s1.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1743601627i&ver=6.8.1-alpha-60199"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!n(e,"\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!n(e,"\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!n(e,"\ud83d\udc26\u200d\ud83d\udd25","\ud83d\udc26\u200b\ud83d\udd25")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/* ]]> */
</script>
<link crossorigin='anonymous' rel='stylesheet' id='all-css-0-1' href='https://s1.wp.com/_static/??-eJxtzFsKgCAQQNENZYNo9BWtRXQI39KMtP0ogiD6PHC5cDRha2EsDLmLlvrmC0FAbsbGx0C9QK6uJyTYMRlGJ1ol/mi0RAP8H5OP+H5vXfmaFznraZJKSxVOKU00bw==&cssminify=yes' type='text/css' media='all' />
<style id='wp-emoji-styles-inline-css'>

	img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}
</style>
<link crossorigin='anonymous' rel='stylesheet' id='all-css-2-1' href='https://s1.wp.com/wp-content/plugins/gutenberg-core/v20.6.0/build/block-library/style.css?m=1744959081i&cssminify=yes' type='text/css' media='all' />
<style id='wp-block-library-inline-css'>
.has-text-align-justify {
	text-align:justify;
}
.has-text-align-justify{text-align:justify;}
</style>
<style id='classic-theme-styles-inline-css'>
/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}
</style>
<link crossorigin='anonymous' rel='stylesheet' id='all-css-4-1' href='https://s1.wp.com/_static/??-eJyVzDEOgCAMQNELiQU1Jg7Gs2AlDYpAaInx9ro5O/7hfbiywhTFRYEcKvnIQPXN1RVSa0h4MOxOssVDBXunKoqK34DlDq5F5gb+LIoVH4k/vpyzGYe+03oyw/4AcmU1KQ==&cssminify=yes' type='text/css' media='all' />
<link crossorigin='anonymous' rel='stylesheet' id='all-css-6-1' href='https://s2.wp.com/_static/??-eJzTLy/QzcxLzilNSS3WzyrWz01NyUxMzUnNTc0rQeEU5CRWphbp5qSmJyZX6uVm5uklFxfr6OPTDpRD5sM02efaGpoZmFkYGRuZGmQBAHPvL0Y=&cssminify=yes' type='text/css' media='all' />
<style id='jetpack-sharing-buttons-style-inline-css'>
.jetpack-sharing-buttons__services-list{display:flex;flex-direction:row;flex-wrap:wrap;gap:0;list-style-type:none;margin:5px;padding:0}.jetpack-sharing-buttons__services-list.has-small-icon-size{font-size:12px}.jetpack-sharing-buttons__services-list.has-normal-icon-size{font-size:16px}.jetpack-sharing-buttons__services-list.has-large-icon-size{font-size:24px}.jetpack-sharing-buttons__services-list.has-huge-icon-size{font-size:36px}@media print{.jetpack-sharing-buttons__services-list{display:none!important}}.editor-styles-wrapper .wp-block-jetpack-sharing-buttons{gap:0;padding-inline-start:0}ul.jetpack-sharing-buttons__services-list.has-background{padding:1.25em 2.375em}
</style>
<link crossorigin='anonymous' rel='stylesheet' id='all-css-8-1' href='https://s2.wp.com/_static/??-eJx9jcEKg0AMRH+oaVhorR7Eb9E16IpZg8min2889FZ6GYbhPQYPgbhlo2zIBWQtU8qKcdvJd5be0AmmMfW0Ejv2jKoP/K0daZzIXNdvB6PzvyJ+A8MgO6mCJ6fCYLN/6e113IZXU9WfUL/DcgHSTkDo&cssminify=yes' type='text/css' media='all' />
<style id='global-styles-inline-css'>
:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--font-family--albert-sans: 'Albert Sans', sans-serif;--wp--preset--font-family--alegreya: Alegreya, serif;--wp--preset--font-family--arvo: Arvo, serif;--wp--preset--font-family--bodoni-moda: 'Bodoni Moda', serif;--wp--preset--font-family--bricolage-grotesque: 'Bricolage Grotesque', sans-serif;--wp--preset--font-family--cabin: Cabin, sans-serif;--wp--preset--font-family--chivo: Chivo, sans-serif;--wp--preset--font-family--commissioner: Commissioner, sans-serif;--wp--preset--font-family--cormorant: Cormorant, serif;--wp--preset--font-family--courier-prime: 'Courier Prime', monospace;--wp--preset--font-family--crimson-pro: 'Crimson Pro', serif;--wp--preset--font-family--dm-mono: 'DM Mono', monospace;--wp--preset--font-family--dm-sans: 'DM Sans', sans-serif;--wp--preset--font-family--dm-serif-display: 'DM Serif Display', serif;--wp--preset--font-family--domine: Domine, serif;--wp--preset--font-family--eb-garamond: 'EB Garamond', serif;--wp--preset--font-family--epilogue: Epilogue, sans-serif;--wp--preset--font-family--fahkwang: Fahkwang, sans-serif;--wp--preset--font-family--figtree: Figtree, sans-serif;--wp--preset--font-family--fira-sans: 'Fira Sans', sans-serif;--wp--preset--font-family--fjalla-one: 'Fjalla One', sans-serif;--wp--preset--font-family--fraunces: Fraunces, serif;--wp--preset--font-family--gabarito: Gabarito, system-ui;--wp--preset--font-family--ibm-plex-mono: 'IBM Plex Mono', monospace;--wp--preset--font-family--ibm-plex-sans: 'IBM Plex Sans', sans-serif;--wp--preset--font-family--ibarra-real-nova: 'Ibarra Real Nova', serif;--wp--preset--font-family--instrument-serif: 'Instrument Serif', serif;--wp--preset--font-family--inter: Inter, sans-serif;--wp--preset--font-family--josefin-sans: 'Josefin Sans', sans-serif;--wp--preset--font-family--jost: Jost, sans-serif;--wp--preset--font-family--libre-baskerville: 'Libre Baskerville', serif;--wp--preset--font-family--libre-franklin: 'Libre Franklin', sans-serif;--wp--preset--font-family--literata: Literata, serif;--wp--preset--font-family--lora: Lora, serif;--wp--preset--font-family--merriweather: Merriweather, serif;--wp--preset--font-family--montserrat: Montserrat, sans-serif;--wp--preset--font-family--newsreader: Newsreader, serif;--wp--preset--font-family--noto-sans-mono: 'Noto Sans Mono', sans-serif;--wp--preset--font-family--nunito: Nunito, sans-serif;--wp--preset--font-family--open-sans: 'Open Sans', sans-serif;--wp--preset--font-family--overpass: Overpass, sans-serif;--wp--preset--font-family--pt-serif: 'PT Serif', serif;--wp--preset--font-family--petrona: Petrona, serif;--wp--preset--font-family--piazzolla: Piazzolla, serif;--wp--preset--font-family--playfair-display: 'Playfair Display', serif;--wp--preset--font-family--plus-jakarta-sans: 'Plus Jakarta Sans', sans-serif;--wp--preset--font-family--poppins: Poppins, sans-serif;--wp--preset--font-family--raleway: Raleway, sans-serif;--wp--preset--font-family--roboto: Roboto, sans-serif;--wp--preset--font-family--roboto-slab: 'Roboto Slab', serif;--wp--preset--font-family--rubik: Rubik, sans-serif;--wp--preset--font-family--rufina: Rufina, serif;--wp--preset--font-family--sora: Sora, sans-serif;--wp--preset--font-family--source-sans-3: 'Source Sans 3', sans-serif;--wp--preset--font-family--source-serif-4: 'Source Serif 4', serif;--wp--preset--font-family--space-mono: 'Space Mono', monospace;--wp--preset--font-family--syne: Syne, sans-serif;--wp--preset--font-family--texturina: Texturina, serif;--wp--preset--font-family--urbanist: Urbanist, sans-serif;--wp--preset--font-family--work-sans: 'Work Sans', sans-serif;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}.has-albert-sans-font-family{font-family: var(--wp--preset--font-family--albert-sans) !important;}.has-alegreya-font-family{font-family: var(--wp--preset--font-family--alegreya) !important;}.has-arvo-font-family{font-family: var(--wp--preset--font-family--arvo) !important;}.has-bodoni-moda-font-family{font-family: var(--wp--preset--font-family--bodoni-moda) !important;}.has-bricolage-grotesque-font-family{font-family: var(--wp--preset--font-family--bricolage-grotesque) !important;}.has-cabin-font-family{font-family: var(--wp--preset--font-family--cabin) !important;}.has-chivo-font-family{font-family: var(--wp--preset--font-family--chivo) !important;}.has-commissioner-font-family{font-family: var(--wp--preset--font-family--commissioner) !important;}.has-cormorant-font-family{font-family: var(--wp--preset--font-family--cormorant) !important;}.has-courier-prime-font-family{font-family: var(--wp--preset--font-family--courier-prime) !important;}.has-crimson-pro-font-family{font-family: var(--wp--preset--font-family--crimson-pro) !important;}.has-dm-mono-font-family{font-family: var(--wp--preset--font-family--dm-mono) !important;}.has-dm-sans-font-family{font-family: var(--wp--preset--font-family--dm-sans) !important;}.has-dm-serif-display-font-family{font-family: var(--wp--preset--font-family--dm-serif-display) !important;}.has-domine-font-family{font-family: var(--wp--preset--font-family--domine) !important;}.has-eb-garamond-font-family{font-family: var(--wp--preset--font-family--eb-garamond) !important;}.has-epilogue-font-family{font-family: var(--wp--preset--font-family--epilogue) !important;}.has-fahkwang-font-family{font-family: var(--wp--preset--font-family--fahkwang) !important;}.has-figtree-font-family{font-family: var(--wp--preset--font-family--figtree) !important;}.has-fira-sans-font-family{font-family: var(--wp--preset--font-family--fira-sans) !important;}.has-fjalla-one-font-family{font-family: var(--wp--preset--font-family--fjalla-one) !important;}.has-fraunces-font-family{font-family: var(--wp--preset--font-family--fraunces) !important;}.has-gabarito-font-family{font-family: var(--wp--preset--font-family--gabarito) !important;}.has-ibm-plex-mono-font-family{font-family: var(--wp--preset--font-family--ibm-plex-mono) !important;}.has-ibm-plex-sans-font-family{font-family: var(--wp--preset--font-family--ibm-plex-sans) !important;}.has-ibarra-real-nova-font-family{font-family: var(--wp--preset--font-family--ibarra-real-nova) !important;}.has-instrument-serif-font-family{font-family: var(--wp--preset--font-family--instrument-serif) !important;}.has-inter-font-family{font-family: var(--wp--preset--font-family--inter) !important;}.has-josefin-sans-font-family{font-family: var(--wp--preset--font-family--josefin-sans) !important;}.has-jost-font-family{font-family: var(--wp--preset--font-family--jost) !important;}.has-libre-baskerville-font-family{font-family: var(--wp--preset--font-family--libre-baskerville) !important;}.has-libre-franklin-font-family{font-family: var(--wp--preset--font-family--libre-franklin) !important;}.has-literata-font-family{font-family: var(--wp--preset--font-family--literata) !important;}.has-lora-font-family{font-family: var(--wp--preset--font-family--lora) !important;}.has-merriweather-font-family{font-family: var(--wp--preset--font-family--merriweather) !important;}.has-montserrat-font-family{font-family: var(--wp--preset--font-family--montserrat) !important;}.has-newsreader-font-family{font-family: var(--wp--preset--font-family--newsreader) !important;}.has-noto-sans-mono-font-family{font-family: var(--wp--preset--font-family--noto-sans-mono) !important;}.has-nunito-font-family{font-family: var(--wp--preset--font-family--nunito) !important;}.has-open-sans-font-family{font-family: var(--wp--preset--font-family--open-sans) !important;}.has-overpass-font-family{font-family: var(--wp--preset--font-family--overpass) !important;}.has-pt-serif-font-family{font-family: var(--wp--preset--font-family--pt-serif) !important;}.has-petrona-font-family{font-family: var(--wp--preset--font-family--petrona) !important;}.has-piazzolla-font-family{font-family: var(--wp--preset--font-family--piazzolla) !important;}.has-playfair-display-font-family{font-family: var(--wp--preset--font-family--playfair-display) !important;}.has-plus-jakarta-sans-font-family{font-family: var(--wp--preset--font-family--plus-jakarta-sans) !important;}.has-poppins-font-family{font-family: var(--wp--preset--font-family--poppins) !important;}.has-raleway-font-family{font-family: var(--wp--preset--font-family--raleway) !important;}.has-roboto-font-family{font-family: var(--wp--preset--font-family--roboto) !important;}.has-roboto-slab-font-family{font-family: var(--wp--preset--font-family--roboto-slab) !important;}.has-rubik-font-family{font-family: var(--wp--preset--font-family--rubik) !important;}.has-rufina-font-family{font-family: var(--wp--preset--font-family--rufina) !important;}.has-sora-font-family{font-family: var(--wp--preset--font-family--sora) !important;}.has-source-sans-3-font-family{font-family: var(--wp--preset--font-family--source-sans-3) !important;}.has-source-serif-4-font-family{font-family: var(--wp--preset--font-family--source-serif-4) !important;}.has-space-mono-font-family{font-family: var(--wp--preset--font-family--space-mono) !important;}.has-syne-font-family{font-family: var(--wp--preset--font-family--syne) !important;}.has-texturina-font-family{font-family: var(--wp--preset--font-family--texturina) !important;}.has-urbanist-font-family{font-family: var(--wp--preset--font-family--urbanist) !important;}.has-work-sans-font-family{font-family: var(--wp--preset--font-family--work-sans) !important;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
:root :where(.wp-block-pullquote){font-size: 1.5em;line-height: 1.6;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
</style>
<link crossorigin='anonymous' rel='stylesheet' id='all-css-10-1' href='https://s2.wp.com/wp-content/mu-plugins/jetpack-mu-wpcom-plugin/sun/jetpack_vendor/automattic/jetpack-mu-wpcom/src/build/verbum-comments/verbum-comments.css?m=1746618905i&cssminify=yes' type='text/css' media='all' />
<link rel='stylesheet' id='verbum-gutenberg-css-css' href='https://widgets.wp.com/verbum-block-editor/block-editor.css?ver=1738686361' media='all' />
<link crossorigin='anonymous' rel='stylesheet' id='all-css-12-1' href='https://s2.wp.com/wp-content/themes/pub/publish/style.css?m=1501303246i&cssminify=yes' type='text/css' media='all' />
<style id='akismet-widget-style-inline-css'>

			.a-stats {
				--akismet-color-mid-green: #357b49;
				--akismet-color-white: #fff;
				--akismet-color-light-grey: #f6f7f7;

				max-width: 350px;
				width: auto;
			}

			.a-stats * {
				all: unset;
				box-sizing: border-box;
			}

			.a-stats strong {
				font-weight: 600;
			}

			.a-stats a.a-stats__link,
			.a-stats a.a-stats__link:visited,
			.a-stats a.a-stats__link:active {
				background: var(--akismet-color-mid-green);
				border: none;
				box-shadow: none;
				border-radius: 8px;
				color: var(--akismet-color-white);
				cursor: pointer;
				display: block;
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen-Sans', 'Ubuntu', 'Cantarell', 'Helvetica Neue', sans-serif;
				font-weight: 500;
				padding: 12px;
				text-align: center;
				text-decoration: none;
				transition: all 0.2s ease;
			}

			/* Extra specificity to deal with TwentyTwentyOne focus style */
			.widget .a-stats a.a-stats__link:focus {
				background: var(--akismet-color-mid-green);
				color: var(--akismet-color-white);
				text-decoration: none;
			}

			.a-stats a.a-stats__link:hover {
				filter: brightness(110%);
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06), 0 0 2px rgba(0, 0, 0, 0.16);
			}

			.a-stats .count {
				color: var(--akismet-color-white);
				display: block;
				font-size: 1.5em;
				line-height: 1.4;
				padding: 0 13px;
				white-space: nowrap;
			}
		
</style>
<link crossorigin='anonymous' rel='stylesheet' id='all-css-14-1' href='https://s1.wp.com/_static/??-eJzTLy/QTc7PK0nNK9HPLdUtyClNz8wr1i9KTcrJTwcy0/WTi5G5ekCujj52Temp+bo5+cmJJZn5eSgc3bScxMwikFb7XFtDE1NLExMLc0OTLACohS2q&cssminify=yes' type='text/css' media='all' />
<style id='jetpack-global-styles-frontend-style-inline-css'>
:root { --font-headings: unset; --font-base: unset; --font-headings-default: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif; --font-base-default: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;}
</style>
<link crossorigin='anonymous' rel='stylesheet' id='all-css-16-1' href='https://s2.wp.com/_static/??-eJyNjcsKAjEMRX/IGmYYdFyInyKZNrQd06SYFvHvfeBG3Li7By7nwK06r9JIGpTuKveYxWClVtFfPgzWBYqGzmRgCa8UMIT7e2aJW2+2gb9F5yweTH1GdqxR7Qt+ZC1ReWbTBJF1QX4dTuU47KfdPI7zYVgfuRlIaA==&cssminify=yes' type='text/css' media='all' />
<script type="text/javascript" id="jetpack_related-posts-js-extra">
/* <![CDATA[ */
var related_posts_js_options = {"post_heading":"h4"};
/* ]]> */
</script>
<script type="text/javascript" id="jetpack-mu-wpcom-settings-js-before">
/* <![CDATA[ */
var JETPACK_MU_WPCOM_SETTINGS = {"assetsUrl":"https:\/\/s1.wp.com\/wp-content\/mu-plugins\/jetpack-mu-wpcom-plugin\/sun\/jetpack_vendor\/automattic\/jetpack-mu-wpcom\/src\/build\/"};
/* ]]> */
</script>
<script crossorigin='anonymous' type='text/javascript'  src='https://s1.wp.com/_static/??/wp-content/mu-plugins/jetpack-plugin/sun/_inc/build/related-posts/related-posts.min.js,/wp-content/js/rlt-proxy.js?m=1733765333j'></script>
<script type="text/javascript" id="rlt-proxy-js-after">
/* <![CDATA[ */
	rltInitialize( {"token":null,"iframeOrigins":["https:\/\/widgets.wp.com"]} );
/* ]]> */
</script>
<script type="text/javascript" crossorigin='anonymous' src="https://s0.wp.com/wp-content/plugins/gutenberg-core/v20.6.0/build/hooks/index.min.js?m=1744959081i&amp;ver=84e753e2b66eb7028d38" id="wp-hooks-js"></script>
<script type="text/javascript" crossorigin='anonymous' src="https://s0.wp.com/wp-content/plugins/gutenberg-core/v20.6.0/build/i18n/index.min.js?m=1744959081i&amp;ver=bd5a2533e717a1043151" id="wp-i18n-js"></script>
<script type="text/javascript" id="wp-i18n-js-after">
/* <![CDATA[ */
wp.i18n.setLocaleData( { 'text direction\u0004ltr': [ 'ltr' ] } );
/* ]]> */
</script>
<script type="text/javascript" id="wpcom-actionbar-placeholder-js-extra">
/* <![CDATA[ */
var actionbardata = {"siteID":"30683698","postID":"522","siteURL":"https:\/\/blog.jcole.us","xhrURL":"https:\/\/blog.jcole.us\/wp-admin\/admin-ajax.php","nonce":"2b7e8ab620","isLoggedIn":"","statusMessage":"","subsEmailDefault":"instantly","proxyScriptUrl":"https:\/\/s0.wp.com\/wp-content\/js\/wpcom-proxy-request.js?ver=20211021","shortlink":"https:\/\/wp.me\/p24Kem-8q","i18n":{"followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/reader\">Reader<\/a>","foldBar":"Collapse this bar","unfoldBar":"Expand this bar","shortLinkCopied":"Shortlink copied to clipboard."}};
/* ]]> */
</script>
<script crossorigin='anonymous' type='text/javascript'  src='https://s2.wp.com/_static/??-eJzTLy/QzcxLzilNSS3WzwKiwtLUokoopZebmaeXVayjj0+Rbm5melFiSSpUsX2uraGZpZmpgamZqVEWAK+oIiU='></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://jcoledotus.wordpress.com/xmlrpc.php?rsd" />
<meta name="generator" content="WordPress.com" />
<link rel="canonical" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/" />
<link rel='shortlink' href='https://wp.me/p24Kem-8q' />
<link rel="alternate" type="application/json+oembed" href="https://public-api.wordpress.com/oembed/?format=json&amp;url=https%3A%2F%2Fblog.jcole.us%2F2010%2F09%2F28%2Fmysql-swap-insanity-and-the-numa-architecture%2F&amp;for=wpcom-auto-discovery" /><link rel="alternate" type="application/xml+oembed" href="https://public-api.wordpress.com/oembed/?format=xml&amp;url=https%3A%2F%2Fblog.jcole.us%2F2010%2F09%2F28%2Fmysql-swap-insanity-and-the-numa-architecture%2F&amp;for=wpcom-auto-discovery" />
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="The MySQL &#8220;swap insanity&#8221; problem and the effects of the NUMA architecture" />
<meta property="og:url" content="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/" />
<meta property="og:description" content="Update: Also read A brief update on NUMA and MySQL. The &#8220;swap insanity&#8221; problem, in brief When running MySQL on a large system (e.g., 64GB RAM and dual quad core CPUs) with a large Innoâ€¦" />
<meta property="article:published_time" content="2010-09-29T01:10:10+00:00" />
<meta property="article:modified_time" content="2012-09-10T23:03:29+00:00" />
<meta property="og:site_name" content="Jeremy Cole" />
<meta property="og:image" content="http://jcole.us/blog/files/uma-architecture.png" />
<meta property="og:image:alt" content="" />
<meta property="og:locale" content="en_US" />
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom" />
<meta name="twitter:text:title" content="The MySQL &#8220;swap insanity&#8221; problem and the effects of the NUMA&nbsp;architecture" />
<meta name="twitter:image" content="http://jcole.us/blog/files/uma-architecture.png?w=144" />
<meta name="twitter:card" content="summary" />

<!-- End Jetpack Open Graph Tags -->
<link rel='openid.server' href='https://blog.jcole.us/?openidserver=1' />
<link rel='openid.delegate' href='https://blog.jcole.us/' />
<link rel="search" type="application/opensearchdescription+xml" href="https://blog.jcole.us/osd.xml" title="Jeremy Cole" />
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com" />
		<style type="text/css">
			.recentcomments a {
				display: inline !important;
				padding: 0 !important;
				margin: 0 !important;
			}

			table.recentcommentsavatartop img.avatar, table.recentcommentsavatarend img.avatar {
				border: 0px;
				margin: 0;
			}

			table.recentcommentsavatartop a, table.recentcommentsavatarend a {
				border: 0px !important;
				background-color: transparent !important;
			}

			td.recentcommentsavatarend, td.recentcommentsavatartop {
				padding: 0px 0px 1px 0px;
				margin: 0px;
			}

			td.recentcommentstextend {
				border: none !important;
				padding: 0px 0px 2px 10px;
			}

			.rtl td.recentcommentstextend {
				padding: 0px 10px 2px 0px;
			}

			td.recentcommentstexttop {
				border: none;
				padding: 0px 0px 0px 10px;
			}

			.rtl td.recentcommentstexttop {
				padding: 0px 10px 0px 0px;
			}
		</style>
		<meta name="description" content="Update: Also read A brief update on NUMA and MySQL. The &quot;swap insanity&quot; problem, in brief When running MySQL on a large system (e.g., 64GB RAM and dual quad core CPUs) with a large InnoDB buffer pool (e.g., 48GB), over time, Linux decides to swap out potentially large amounts of memory, despite appearing1 to be&hellip;" />
<link rel="icon" href="https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=32" sizes="32x32" />
<link rel="icon" href="https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=192" sizes="192x192" />
<link rel="apple-touch-icon" href="https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=180" />
<meta name="msapplication-TileImage" content="https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=270" />
			<link rel="stylesheet" id="custom-css-css" type="text/css" href="https://s0.wp.com/?custom-css=1&#038;csblog=24Kem&#038;cscache=6&#038;csrev=27" />
			</head>

<body class="wp-singular post-template-default single single-post postid-522 single-format-standard wp-theme-pubpublish customizer-styles-applied jetpack-reblog-enabled custom-colors">
<div id="page" class="hfeed site">
	<header id="masthead" class="site-header" role="banner">
					<a class="site-logo" href="https://blog.jcole.us/" title="Jeremy Cole" rel="home">
				<img class="no-grav" src="https://secure.gravatar.com/avatar/37cd63a9fd0344804fd6a991a55c283a/?s=100&#038;d=mm" height="100" width="100" alt="Jeremy Cole" />
			</a>
				<hgroup>
			<h1 class="site-title"><a href="https://blog.jcole.us/" title="Jeremy Cole" rel="home">Jeremy Cole</a></h1>
			<h2 class="site-description">Geek, electronics nerd, database nerd, aviation nerd, father of three.</h2>
		</hgroup>

		<nav role="navigation" class="site-navigation main-navigation">
			<h1 class="assistive-text">Menu</h1>
			<div class="assistive-text skip-link"><a href="#content" title="Skip to content">Skip to content</a></div>

			<div class="menu"><ul>
<li ><a href="https://blog.jcole.us/">Home</a></li><li class="page_item page-item-369"><a href="https://blog.jcole.us/about-me/">About Me</a></li>
<li class="page_item page-item-1376"><a href="https://blog.jcole.us/ftc/">FTC</a></li>
<li class="page_item page-item-906"><a href="https://blog.jcole.us/innodb/">InnoDB</a></li>
<li class="page_item page-item-1116"><a href="https://blog.jcole.us/need-help/">Need help?</a></li>
</ul></div>
		</nav><!-- .site-navigation .main-navigation -->

			</header><!-- #masthead .site-header -->

	<div id="main" class="site-main">

		<div id="primary" class="content-area">
			<div id="content" class="site-content" role="main">

			
				
<article id="post-522" class="post-522 post type-post status-publish format-standard hentry category-innodb category-linux category-mysql">
	<header class="entry-header">
		<h1 class="entry-title">The MySQL &#8220;swap insanity&#8221; problem and the effects of the NUMA&nbsp;architecture</h1>
	</header><!-- .entry-header -->

	<div class="entry-content">
		<p><strong>Update</strong>: Also read <a href="https://blog.jcole.us/2012/04/16/a-brief-update-on-numa-and-mysql/">A brief update on NUMA and MySQL</a>.</p>
<h2>The &#8220;swap insanity&#8221; problem, in brief</h2>
<p>When running MySQL on a large system (e.g., 64GB RAM and dual quad core CPUs) with a large InnoDB buffer pool (e.g., 48GB), over time, Linux decides to swap out potentially large amounts of memory, despite appearing<sup>1</sup> to be under no real memory pressure.  Monitoring reveals that at no time is the system in actual need of more memory than it has available; and memory isn&#8217;t leaking, <tt>mysqld</tt>&#8216;s <a href="http://en.wikipedia.org/wiki/Resident_set_size">RSS</a> is normal and stable.</p>
<p>Normally a tiny bit of swap usage could be OK (we&#8217;re really concerned about activity&mdash;swaps in and out), but in many cases, &#8220;real&#8221; useful memory is being swapped: primarily parts of InnoDB&#8217;s buffer pool. When it&#8217;s needed once again, a big performance hit is taken to swap it back in, causing random delays in random queries.  This can cause overall unpredictable performance on production systems, and often once swapping starts, the system may enter a performance death-spiral.</p>
<p>While not every system, and not every workload experiences this problem, it&#8217;s common enough that it&#8217;s well known, and for those that know it well it can be a major headache.</p>
<h2>The history of &#8220;swap insanity&#8221;</h2>
<p>Over the past two to four years, there has been an off-and-on discussion about Linux swapping and MySQL, often titled &#8220;swap insanity&#8221; (I think coined by Kevin Burton).  I have followed it closely, but I haven&#8217;t contributed much because I didn&#8217;t have anything new to add.  The major contributors to the discussion over the past years have been:</p>
<ul>
<li><a href="http://feedblog.org/2006/09/27/stupid-linux-swap-tricks-with-swappiness/">Kevin Burton</a> &mdash; Discussion of swappiness and MySQL on Linux.</li>
<li><a href="http://feedblog.org/2007/09/29/using-o_direct-on-linux-and-innodb-to-fix-swap-insanity/">Kevin Burton</a> &mdash; Proposed IO_DIRECT as a solution (doesn&#8217;t work) and discussed memlock (may help, but not a full solution).</li>
<li><a href="http://www.mysqlperformanceblog.com/2008/04/06/should-you-have-your-swap-file-enabled-while-running-mysql/">Peter Zaitsev</a> &mdash; Discussed swappiness, memlock, and fielded a lot of discussion in the comments.</li>
<li><a href="http://don.blogs.smugmug.com/2008/05/01/mysql-and-the-linux-swap-problem/">Don MacAskill</a> &mdash; Proposed an innovative (albeit hacky) solution using swap on ramdisk, and a lot more interesting discussion in the comments.</li>
<li><a href="http://mysqldba.blogspot.com/2008/05/linux-64-bit-mysql-swap-and-memory.html">Dathan Pattishall</a> &mdash; Describes how Linux behavior can be even worse with swap disabled, and proposes using <tt>swapoff</tt> to clear it, but no real solution.</li>
<li><a href="http://marc.info/?t=120997175700001">Rik van Riel on the LKML</a> &mdash; A few answers and proposal of the Split-LRU patch.</li>
<li><a href="http://feedblog.org/2008/09/03/linux-split-lru-patch-improves-mysql-swap-performance/">Kevin Burton</a> &mdash; Discussion of Linux Split-LRU patch with some success.</li>
<li><a href="http://mysqlha.blogspot.com/2008/11/linux-mysql-vmstat.html">Mark Callaghan</a> &mdash; Discussion of vmstat and monitoring things, and a recap of a few possible solutions.</li>
<li><a href="http://feedblog.org/2009/01/25/splitlru-patch-in-kernel-2628-must-have-for-mysql-and-innodb/">Kevin Burton</a> &mdash; More discussion that Linux Split-LRU is essential.</li>
<li><a href="http://feedblog.org/2009/02/14/the-middle-path-and-the-solution-to-linux-swap/">Kevin Burton</a> &mdash; Choosing the middle road by enabling swap, but with a small amount of space, and giving up the battle.</li>
<li><a href="http://www.mysqlperformanceblog.com/2010/01/18/why-swapping-is-bad-for-mysql-performance/">Peter Zaitsev</a> &mdash; More discussion about why swapping is bad, but no solution.</li>
</ul>
<p>Despite all the discussion, not much has changed.  There are some hacky solutions to get MySQL to stop swapping, but nothing definite.  I&#8217;ve known these solutions and hacks now for a while, but the core question was never really settled: &#8220;<em>Why</em> does this happen?&#8221; and it&#8217;s never sat well with me.  I was recently tasked with trying to sort this mess out once and for all, so I&#8217;ve now done quite a bit of research and testing related to the problem.  I&#8217;ve learned a lot, and decided a big blog entry might be the best way to share it.  Enjoy.</p>
<p>There was a lot of discussion and some work went into adding the relatively new <tt>swappiness</tt> tunable a few years ago, and I think that may have solved some of the original problems, but at around the same time the basic architecture of the machine changed to NUMA, which I think introduced some new problems, with the very same symptoms, masking the original fix.</p>
<h2>Contrasting the SMP/UMA and NUMA architectures</h2>
<h3>The SMP/UMA architecture</h3>
<p><img src="https://i0.wp.com/jcole.us/blog/files/uma-architecture.png" /><br />
<em>The SMP, or UMA architecture, simplified</em></p>
<p>When the PC world first got multiple processors, they were all arranged with equal access to all of the memory in the system.  This is called <a href="http://en.wikipedia.org/wiki/Symmetric_Multi-Processing">Symmetric Multi-processing (SMP)</a>, or sometimes Uniform Memory Architecture (UMA, especially in contrast to NUMA).  In the past few years this architecture has been largely phased out between physical socketed processors, but is still alive and well today within a single processor with multiple cores: all cores have equal access to the memory bank.  </p>
<h3>The NUMA architecture</h3>
<p><img src="https://i0.wp.com/jcole.us/blog/files/numa-architecture.png" /><br />
<em>The NUMA architecture, simplified</em></p>
<p>The new architecture for multiple processors, starting with <a href="http://en.wikipedia.org/wiki/Opteron">AMD&#8217;s Opteron</a> and <a href="http://en.wikipedia.org/wiki/Nehalem_%28microarchitecture%29">Intel&#8217;s Nehalem</a><sup>2</sup> processors (we&#8217;ll call these &#8220;modern PC CPUs&#8221;), is a <a href="http://en.wikipedia.org/wiki/Non-Uniform_Memory_Access">Non-Uniform Memory Access (NUMA)</a> architecture, or more correctly <a href="http://en.wikipedia.org/wiki/Non-Uniform_Memory_Access#Cache_coherent_NUMA_.28ccNUMA.29">Cache-Coherent NUMA (ccNUMA)</a>.  In this architecture, each processor has a &#8220;local&#8221; bank of memory, to which it has much closer (lower latency) access.  The whole system may still operate as one unit, and all memory is basically accessible from everywhere, but at a potentially higher latency and lower performance.</p>
<p>Fundamentally, some memory locations (&#8220;local&#8221; ones) are faster, that is, cost less to access, than other locations (&#8220;remote&#8221; ones attached to other processors).  For a more detailed discussion of NUMA implementation and its support in Linux, see <a href="http://lwn.net/Articles/254445/">Ulrich Drepper&#8217;s article on LWN.net</a>.</p>
<h2>How Linux handles a NUMA system</h2>
<p>Linux automatically understands when it&#8217;s running on a NUMA architecture system and does a few things:</p>
<ol>
<li>Enumerates the hardware to understand the physical layout.</li>
<li>Divides the processors (not cores) into &#8220;nodes&#8221;.  With modern PC processors, this means one node per physical processor, regardless of the number of cores present.</li>
<li>Attaches each memory module in the system to the node for the processor it is local to.</li>
<li>Collects cost information about inter-node communication (&#8220;distance&#8221; between nodes).</li>
</ol>
<p>You can see how Linux enumerated your system&#8217;s NUMA layout using the <tt>numactl --hardware</tt> command:</p>
<blockquote>
<pre>
# numactl --hardware
available: 2 nodes (0-1)
node 0 size: 32276 MB
node 0 free: 26856 MB
node 1 size: 32320 MB
node 1 free: 26897 MB
node distances:
node   0   1 
  0:  10  21 
  1:  21  10 
</pre>
</blockquote>
<p>This tells you a few important things:</p>
<ul>
<li><strong>The number of nodes, and their node numbers</strong>  &mdash; In this case there are two nodes numbered &#8220;0&#8221; and &#8220;1&#8221;.</li>
<li><strong>The amount of memory available within each node</strong>  &mdash; This machine has 64GB of memory total, and two physical (quad core) CPUs, so it has 32GB in each node.  Note that the sizes aren&#8217;t exactly half of 64GB, and aren&#8217;t exactly equal, due to some memory being stolen from each node for whatever internal purposes the kernel has in mind.</li>
<li><strong>The &#8220;distance&#8221; between nodes</strong>  &mdash; This is a representation of the cost of accessing memory located in (for example) Node 0 from Node 1.  In this case, Linux claims a distance of &#8220;10&#8221; for local memory and &#8220;21&#8221; for non-local memory.</li>
</ul>
<h2>How NUMA changes things for Linux</h2>
<p>Technically, as long as everything runs just fine, there&#8217;s no reason that being UMA or NUMA should change <em>how</em> things work at the OS level.  However, if you&#8217;re to get the best possible performance (and indeed in some cases with extreme performance differences for non-local NUMA access, any performance at all) some additional work has to be done, directly dealing with the internals of NUMA.  Linux does the following things which might be unexpected if you think of CPUs and memory as black boxes:</p>
<ul>
<li>Each process and thread inherits, from its parent, a NUMA policy.  The inherited policy can be modified on a per-thread basis, and it defines the CPUs and even individual cores the process is allowed to be scheduled on, where it should be allocated memory from, and how strict to be about those two decisions.</li>
<li>Each thread is initially allocated a &#8220;preferred&#8221; node to run on.  The thread <em>can</em> be run elsewhere (if policy allows), but the scheduler attempts to ensure that it is always run on the preferred node.</li>
<li>Memory allocated for the process is allocated on a particular node, by default &#8220;current&#8221;, which means the same node as the thread is preferred to run on.  On UMA/SMP architectures all memory was treated equally, and had the same cost, but now the system has to think a bit about where it comes from, because accessing non-local memory has implications on performance and may cause cache coherency delays.</li>
<li>Memory allocations made on one node will <strong>not</strong> be moved to another node, regardless of system needs.  Once memory is allocated on a node, it will stay there.</li>
</ul>
<p>The NUMA policy of any process can be changed, with broad-reaching effects, very simply using <a href="http://linux.die.net/man/8/numactl"><tt>numactl</tt></a> as a wrapper for the program.  With a bit of additional work, it can be fine-tuned in detail by linking in <a href="http://linux.die.net/man/3/numa"><tt>libnuma</tt></a> and writing some code yourself to manage the policy.  Some interesting things that can be done simply with the <tt>numactl</tt> wrapper are:</p>
<ul>
<li>Allocate memory with a particular policy:
<ul>
<li>locally on the &#8220;current&#8221; node &mdash; using <tt>--localalloc</tt>, and also the default mode</li>
<li>preferably on a particular node, but elsewhere if necessary &mdash; using <tt>--preferred=<em>node</em></tt></li>
<li>always on a particular node or set of nodes &mdash; using <tt>--membind=<em>nodes</em></tt></li>
<li><em>interleaved</em>, that is, spread evenly round-robin across all or a set of nodes &mdash; using <tt>--interleaved=all</tt> or <tt>--interleaved=<em>nodes</em></tt></li>
</ul>
</li>
<li>Run the program on a particular node or set of nodes, in this case that means physical CPUs (<tt>--cpunodebind=<em>nodes</em></tt>) or on a particular core or set of cores (<tt>--physcpubind=<em>cpus</em></tt>).</li>
</ul>
<h2>What NUMA means for MySQL and InnoDB</h2>
<p>InnoDB, and really, nearly all database servers (<a href="http://kevinclosson.wordpress.com/2009/05/14/you-buy-a-numa-system-oracle-says-disable-numa-what-gives-part-ii/">such as Oracle</a>), present an atypical workload (from the point of view of the majority of installations) to Linux: a single large multi-threaded process which consumes nearly all of the system&#8217;s memory and should be expected to consume as much of the rest of the system resources as possible.</p>
<p>In a NUMA-based system, where the memory is divided into multiple nodes, how the system should handle this is not necessarily straightforward.  The default behavior of the system is to allocate memory in the same node as a thread is scheduled to run on, and this works well for small amounts of memory, but when you want to allocate more than half of the system memory it&#8217;s no longer physically possible to even do it in a single NUMA node: In a two-node system, only 50% of the memory is in each node.  Additionally, since many different queries will be running at the same time, on both processors, neither individual processor necessarily has preferential access to any particular part of memory needed by a particular query.</p>
<p>It turns out that this seems to matter in one very important way. Using <a href="http://linux.die.net/man/5/numa_maps"><tt>/proc/<em>pid</em>/numa_maps</tt></a> we can see all of the allocations made by <tt>mysqld</tt>, and some interesting information about them.  If you look for a really big number in the <tt>anon=<em>size</em></tt>, you can pretty easily find the buffer pool (which will consume <a href="http://mysqlha.blogspot.com/2008/11/innodb-memory-overhead.html">more than 51GB of memory</a> for the 48GB that it has been configured to use) [line-wrapped for clarity]:</p>
<blockquote>
<pre>
2aaaaad3e000 default anon=13240527 dirty=13223315 
  swapcache=3440324 active=13202235 N0=7865429 N1=5375098
</pre>
</blockquote>
<p>The fields being shown here are:</p>
<ul>
<li><tt>2aaaaad3e000</tt> &mdash; The virtual address of the memory region.  Ignore this other than the fact that it&#8217;s a unique ID for this piece of memory.</li>
<li><tt>default</tt> &mdash; The NUMA policy in use for this region.</li>
<li><tt>anon=<em>number</em></tt> &mdash; The number of anonymous pages mapped.</li>
<li><tt>dirty=<em>number</em></tt> &mdash; The number of pages that are dirty because they have been modified.  Generally memory allocated only within a single process is always going to be used, and thus dirty, but if a process forks it may have many copy-on-write pages mapped that are not dirty.</li>
<li><tt>swapcache=<em>number</em></tt> &mdash; The number of pages swapped out but unmodified since they were swapped out, and thus they are ready to be freed if needed, but are still in memory at the moment.</li>
<li><tt>active=<em>number</em></tt> &mdash; The number of pages on the &#8220;active list&#8221;; if this field is shown, some memory is inactive (<tt>anon</tt> minus <tt>active</tt>) which means it may be paged out by the swapper soon.</li>
<li><tt>N0=<em>number</em></tt> and <tt>N1=<em>number</em></tt> &mdash; The number of pages allocated on Node 0 and Node 1, respectively.</li>
</ul>
<p>The entire <tt>numa_maps</tt> can be quickly summarized by the a simple script <a href="http://jcole.us/blog/files/numa-maps-summary.pl">numa-maps-summary.pl</a>, which I&#8217;ve written while analyzing this problem:</p>
<blockquote>
<pre>
N0        :      7983584 ( 30.45 GB)
N1        :      5440464 ( 20.75 GB)
active    :     13406601 ( 51.14 GB)
anon      :     13422697 ( 51.20 GB)
dirty     :     13407242 ( 51.14 GB)
mapmax    :          977 (  0.00 GB)
mapped    :         1377 (  0.01 GB)
swapcache :      3619780 ( 13.81 GB)
</pre>
</blockquote>
<p>An couple of interesting and somewhat unexpected things pop out to me:</p>
<ol>
<li>The sheer imbalance in how much memory is allocated in Node 0 versus Node 1.  This is actually absolutely normal per the default policy.  Using the default NUMA policy, memory was preferentially allocated in Node 0, but Node 1 was used as a last resort.</li>
<li>The sheer <em>amount</em> of memory allocated in Node 0.  This is absolutely critical &mdash; Node 0 is out of free memory!  It only contains about 32GB of memory in total, and it has allocated a single large chunk of more than 30GB to InnoDB&#8217;s buffer pool.  A few other smaller allocations to other processes finish it off, and suddenly it has no memory free, and isn&#8217;t even caching anything.</li>
</ol>
<p>The memory allocated by MySQL looks something like this:</p>
<p><img src="https://i0.wp.com/jcole.us/blog/files/numa-imbalanced-allocation.png" /><br />
<em>Allocating memory severely imbalanced, preferring Node 0</em></p>
<p>Due to Node 0 being completely exhausted of free memory, even though the system has plenty of free memory overall (over 10GB has been used for caches) it is <em>entirely</em> on Node 1.  If any process scheduled on Node 0 needs local memory for anything, it will cause some of the already-allocated memory to be swapped out in order to free up some Node 0 pages.  Even though there is free memory on Node 1, the Linux kernel in many circumstances (which admittedly I don&#8217;t totally understand<sup>3</sup>) prefers to page out Node 0 memory rather than free some of the cache on Node 1 and use that memory.  Of course the paging is far more expensive than non-local memory access ever would be.</p>
<h2>A small change, to big effect</h2>
<p>An easy solution to this is to interleave the allocated memory.  It is possible to do this using <tt>numactl</tt> as described above:</p>
<blockquote>
<pre>
# numactl --interleave all <em>command</em>
</pre>
</blockquote>
<p>We can use this with MySQL by making a <a href="http://jcole.us/patches/mysql/5.1/numa_interleave_simple.patch">one-line change to <tt>mysqld_safe</tt></a>, adding the following line (after <tt>cmd="$NOHUP_NICENESS"</tt>), which prefixes the command to start <tt>mysqld</tt> with a call to <tt>numactl</tt>:</p>
<blockquote>
<pre>
cmd="/usr/bin/numactl --interleave all $cmd"
</pre>
</blockquote>
<p>Now, when MySQL needs memory it will allocate it interleaved across all nodes, effectively balancing the amount of memory allocated in each node.  This will leave some free memory in each node, allowing the Linux kernel to cache data on both nodes, thus allowing memory to be easily freed on either node just by freeing caches (as it&#8217;s supposed to work) rather than paging.</p>
<p>Performance regression testing has been done comparing the two scenarios (default local plus spillover allocation versus interleaved allocation) using the DBT2 benchmark, and found that performance in the nominal case is identical.  This is expected.  The breakthrough comes in that: In all cases where swap use could be triggered in a repeatable fashion, the system <em>no longer swaps</em>!</p>
<p>You can now see from the <tt>numa_maps</tt> that all allocated memory has been spread evenly across Node 0 and Node 1:</p>
<blockquote>
<pre>
2aaaaad3e000 interleave=0-1 anon=13359067 dirty=13359067 
  N0=6679535 N1=6679532
</pre>
</blockquote>
<p>And the summary looks like this:</p>
<blockquote>
<pre>
N0        :      6814756 ( 26.00 GB)
N1        :      6816444 ( 26.00 GB)
anon      :     13629853 ( 51.99 GB)
dirty     :     13629853 ( 51.99 GB)
mapmax    :          296 (  0.00 GB)
mapped    :         1384 (  0.01 GB)
</pre>
</blockquote>
<p>In graphical terms, the allocation of all memory within <tt>mysqld</tt> has been made in a balanced way:</p>
<p><img src="https://i0.wp.com/jcole.us/blog/files/numa-balanced-allocation.png" /><br />
<em>Allocating memory balanced (interleaved) across nodes</em></p>
<h2>An aside on <tt>zone_reclaim_mode</tt></h2>
<p>The <a href="http://www.kernel.org/doc/Documentation/sysctl/vm.txt"><tt>zone_reclaim_mode</tt></a> tunable in <tt>/proc/sys/vm</tt> can be used to fine-tune memory reclamation policies in a NUMA system.  Subject to <a href="http://marc.info/?l=linux-mm&amp;m=128563913214216&amp;w=2">some clarifications</a> from the <tt>linux-mm</tt> mailing list, it doesn&#8217;t seem to help in this case.</p>
<h2>An even better solution?</h2>
<p>It occurred to me (and was backed up by the <tt>linux-mm</tt> mailing list) that there is probably further room for optimization, although I haven&#8217;t done any testing so far.  Interleaving <em>all</em> allocations is a pretty big hammer, and while it does solve this problem, I wonder if an even better solution would be to <em>intelligently</em> manage the fact that this is a NUMA architecture, using the <tt>libnuma</tt> library.  Some thoughts that come to mind are:</p>
<ul>
<li>Spread the buffer pool across all nodes intelligently in large chunks, or by index, rather than round-robin per page.</li>
<li>Keep the allocation policy for normal query threads to &#8220;local&#8221; so their memory isn&#8217;t interleaved across both nodes.  I think interleaved allocation could cause slightly worse performance for some queries which would use a substantial amount of local memory (such as for large queries, temporary tables, or sorts), but I haven&#8217;t tested this.</li>
<li>Managing I/O in and out to/from the buffer pool using threads that will only be scheduled on the same node that the memory they will use is allocated on (this is a rather complex optimization).</li>
<li>Re-schedule simpler query threads (many PK lookups, etc.) on nodes with local access to the data they need.  Move them actively when necessary, rather than keeping them on the same node. (I don&#8217;t know if the cost of the switch makes up for this, but it could be trivial if the buffer pool were organized by index onto separate nodes.)</li>
</ul>
<p>I have no idea if any of the above would really show practical benefits in a real-world system, but I&#8217;d love to hear any comments or ideas.</p>
<p><strong>Update 1</strong>: Changed the link for &#8220;Rik van Riel on the LKML &mdash; A few answers and proposal of the Split-LRU patch.&#8221; to be a bit closer to my intention.  The old link points to the message that started the thread, the new link points to the index of the messages in the thread.</p>
<p><strong>Update 2</strong>: Added a <a href="http://kevinclosson.wordpress.com/2009/05/14/you-buy-a-numa-system-oracle-says-disable-numa-what-gives-part-ii/">link</a> above <a href="http://jcole.us/blog/archives/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1578970">provided by Kevin Closson</a> about Oracle on NUMA systems.</p>
<p><strong>Update 3</strong>: I should have included a warning about <tt>numa_maps</tt>. Simon Mudd notes correctly that <a href="http://blog.wl0.org/2012/09/checking-procnuma_maps-can-be-dangerous-for-mysql-client-connections/">reading the <tt>/proc/<em>pid</em>/numa_maps</tt> file stalls the <em>pid</em> process</a> to generate the data it provides. It should be used carefully in production systems against <tt>mysqld</tt> as connection and query stalls will occur while it is reading. Do not monitor it minutely.</p>
<p>&#8211; &#8211; &#8211;</p>
<p><sup>1</sup> Using <tt>free</tt> shows some memory free and lots of cache in use, and totalling up the resident set sizes from <tt>ps</tt> or <tt>top</tt> shows that the running processes don&#8217;t need more memory than is available.</p>
<p><sup>2</sup> An article in Dr. Dobb&#8217;s Journal titled <a href="http://www.drdobbs.com/go-parallel/article/printableArticle.jhtml?articleID=222301437">A Deeper Look Inside Intel QuickPath Interconnect</a> gives pretty good high level coverage.  Intel published a paper entitled <a href="http://software.intel.com/sites/products/collateral/hpc/vtune/performance_analysis_guide.pdf">Performance Analysis Guide for IntelÃ‚Â® Core<sup>TM</sup> i7 Processor and IntelÃ‚Â® Xeon<sup>TM</sup> 5500 processors</a> which is quite good for understanding the internals of NUMA and QPI on Intel&#8217;s Nehalem series of processors.</p>
<p><sup>3</sup> I started a thread on the <tt>linux-mm</tt> mailing list related to <a href="http://marc.info/?t=128528110500005">MySQL on NUMA</a>, and there are two other threads related on <a href="http://marc.info/?t=128434966300001">zone_reclaim_mode</a> and on <a href="http://marc.info/?t=128075346800003">swapping</a>.</p>
<div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-official sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-bluesky"><a rel="nofollow noopener noreferrer"
				data-shared="sharing-bluesky-522"
				class="share-bluesky sd-button"
				href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?share=bluesky"
				target="_blank"
				aria-labelledby="sharing-bluesky-522"
				>
				<span id="sharing-bluesky-522" hidden>Click to share on Bluesky (Opens in new window)</span>
				<span>Bluesky</span>
			</a></li><li class="share-facebook"><div class="fb-share-button" data-href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/" data-layout="button_count"></div></li><li class="share-linkedin"><div class="linkedin_button"><script type="in/share" data-url="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/" data-counter="right"></script></div></li><li class="share-end"></li></ul></div></div></div><div class='sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded' id='like-post-wrapper-30683698-522-682651124ef77' data-src='//widgets.wp.com/likes/index.html?ver=20250515#blog_id=30683698&amp;post_id=522&amp;origin=jcoledotus.wordpress.com&amp;obj_id=30683698-522-682651124ef77&amp;domain=blog.jcole.us' data-name='like-post-frame-30683698-522-682651124ef77' data-title='Like or Reblog'><div class='likes-widget-placeholder post-likes-widget-placeholder' style='height: 55px;'><span class='button'><span>Like</span></span> <span class='loading'>Loading...</span></div><span class='sd-text-color'></span><a class='sd-link-color'></a></div>
<div id='jp-relatedposts' class='jp-relatedposts' >
	
</div></div>			</div><!-- .entry-content -->

	<footer class="entry-meta">
		Posted on <a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/" title="18:10" rel="bookmark"><time class="entry-date" datetime="2010-09-28T18:10:10-07:00" pubdate>September 28, 2010</time></a><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://blog.jcole.us/author/jeremycole/" title="View all posts by Jeremy Cole" rel="author">Jeremy Cole</a></span></span>.		This entry was posted in <a href="https://blog.jcole.us/category/mysql/innodb/" rel="category tag">InnoDB</a>, <a href="https://blog.jcole.us/category/linux/" rel="category tag">Linux</a>, <a href="https://blog.jcole.us/category/mysql/" rel="category tag">MySQL</a>. Bookmark the <a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/" title="Permalink to The MySQL &#8220;swap insanity&#8221; problem and the effects of the NUMA&nbsp;architecture" rel="bookmark">permalink</a>.
			</footer><!-- .entry-meta -->
</article><!-- #post-522 -->

					<nav role="navigation" id="nav-below" class="site-navigation post-navigation">
		<h1 class="assistive-text">Post navigation</h1>

	
		<div class="nav-previous"><a href="https://blog.jcole.us/2010/09/28/indirection-of-show-commands-between-mysql-4-1-and-5-1/" rel="prev"><span class="meta-nav">&larr;</span> Indirection of SHOW commands between MySQL 4.1 and&nbsp;5.1</a></div>		<div class="nav-next"><a href="https://blog.jcole.us/2010/10/02/how-to-find-an-errant-mysql-client/" rel="next">How to find an errant MySQL&nbsp;client <span class="meta-nav">&rarr;</span></a></div>
	
	</nav><!-- #nav-below -->
	
				
	<div id="comments" class="comments-area">

	
			<h2 class="comments-title">
			157 thoughts on &ldquo;<span>The MySQL &#8220;swap insanity&#8221; problem and the effects of the NUMA&nbsp;architecture</span>&rdquo;		</h2>

		
		<ol class="commentlist">
			
	<li class="post pingback">
		<p><a href="http://topsy.com/jcole.us/blog/archives/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?utm_source=pingback&#038;utm_campaign=L2" class="url" rel="ugc external nofollow">Tweets that mention jcoleÃ¢â‚¬â„¢s weblog: Jeremy ColeÃ¢â‚¬â„¢s take on life. Ã‚Â» Blog Archive Ã‚Â» The MySQL Ã¢â‚¬Å“swap insanityÃ¢â‚¬Â problem and the effects of the NUMA architecture -- Topsy.com</a></p>

	</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-813">
		<article id="comment-813" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Terry A Davis&#039;s avatar' src='https://2.gravatar.com/avatar/260964712dcc054f8f4b6c5c69edc33fa1e4efa3b5fcc76a1aa4cb0b7a7a5613?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/260964712dcc054f8f4b6c5c69edc33fa1e4efa3b5fcc76a1aa4cb0b7a7a5613?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/260964712dcc054f8f4b6c5c69edc33fa1e4efa3b5fcc76a1aa4cb0b7a7a5613?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/260964712dcc054f8f4b6c5c69edc33fa1e4efa3b5fcc76a1aa4cb0b7a7a5613?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/260964712dcc054f8f4b6c5c69edc33fa1e4efa3b5fcc76a1aa4cb0b7a7a5613?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/260964712dcc054f8f4b6c5c69edc33fa1e4efa3b5fcc76a1aa4cb0b7a7a5613?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://www.losethos.com" class="url" rel="ugc external nofollow">Terry A Davis</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-813"><time pubdate datetime="2010-09-28T21:50:02-07:00">
					September 28, 2010 at 21:50					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>With LoseThos, I originally set aside some memory for each core&#8217;s heaps because I was worried they&#8217;d fight for access.  I think I assumed there was a problem where there was none.  It&#8217;s a whole lot nicer with all cores allocating from one pool, not worrying about partitioning memory.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=813#respond" data-commentid="813" data-postid="522" data-belowelement="comment-813" data-respondelement="respond" data-replyto="Reply to Terry A Davis" aria-label="Reply to Terry A Davis">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-814">
		<article id="comment-814" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Robert Foss&#039;s avatar' src='https://1.gravatar.com/avatar/a7592907e6e003f5c976b94762a86788976c05ce5922df8e9ca2273ce1fd5936?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/a7592907e6e003f5c976b94762a86788976c05ce5922df8e9ca2273ce1fd5936?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/a7592907e6e003f5c976b94762a86788976c05ce5922df8e9ca2273ce1fd5936?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/a7592907e6e003f5c976b94762a86788976c05ce5922df8e9ca2273ce1fd5936?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/a7592907e6e003f5c976b94762a86788976c05ce5922df8e9ca2273ce1fd5936?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/a7592907e6e003f5c976b94762a86788976c05ce5922df8e9ca2273ce1fd5936?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://robertfoss.se" class="url" rel="ugc external nofollow">Robert Foss</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-814"><time pubdate datetime="2010-09-29T02:30:32-07:00">
					September 29, 2010 at 02:30					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Really informative and interesting read. Thanks (add a flattr button so that I can donate some beer money).</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=814#respond" data-commentid="814" data-postid="522" data-belowelement="comment-814" data-respondelement="respond" data-replyto="Reply to Robert Foss" aria-label="Reply to Robert Foss">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-815">
		<article id="comment-815" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Nathan Kurz&#039;s avatar' src='https://1.gravatar.com/avatar/d77f7ab3c42e427e0ce60b61b4e6b399cd5486666005c68dbe14a32ecd3c0b00?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d77f7ab3c42e427e0ce60b61b4e6b399cd5486666005c68dbe14a32ecd3c0b00?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d77f7ab3c42e427e0ce60b61b4e6b399cd5486666005c68dbe14a32ecd3c0b00?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d77f7ab3c42e427e0ce60b61b4e6b399cd5486666005c68dbe14a32ecd3c0b00?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d77f7ab3c42e427e0ce60b61b4e6b399cd5486666005c68dbe14a32ecd3c0b00?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d77f7ab3c42e427e0ce60b61b4e6b399cd5486666005c68dbe14a32ecd3c0b00?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Nathan Kurz</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-815"><time pubdate datetime="2010-09-29T02:31:27-07:00">
					September 29, 2010 at 02:31					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Are you sure that &#8220;Memory allocations made on one node will not be moved to another node, regardless of system needs&#8221;?  This paper  (<a href="http://www.kernel.org/pub/linux/kernel/people/christoph/pmig/numamemory.pdf" rel="nofollow ugc">http://www.kernel.org/pub/linux/kernel/people/christoph/pmig/numamemory.pdf</a>) from 2006 makes it sound like a done deal.  Was &#8220;memory migration&#8221; pulled?</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=815#respond" data-commentid="815" data-postid="522" data-belowelement="comment-815" data-respondelement="respond" data-replyto="Reply to Nathan Kurz" aria-label="Reply to Nathan Kurz">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor odd alt depth-2" id="li-comment-817">
		<article id="comment-817" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-817"><time pubdate datetime="2010-09-29T02:40:25-07:00">
					September 29, 2010 at 02:40					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Nathan: My understanding is that while page migration is *technically possible* it will never occur automatically.  Perhaps I should say that &#8220;Memory allocations made on one node will not be *automatically* moved to another node, regardless of system needs&#8221;.  My understanding, and what seems to be supported by that document as well, is that there are several manual interfaces to force movement of pages, but there is no automated logic anywhere to do it.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=817#respond" data-commentid="817" data-postid="522" data-belowelement="comment-817" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-816">
		<article id="comment-816" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='DrGkill&#039;s avatar' src='https://1.gravatar.com/avatar/16b9968a09bb2e9343f11aa6fe399ef445c2195fceba4ed1334876f5426e5281?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/16b9968a09bb2e9343f11aa6fe399ef445c2195fceba4ed1334876f5426e5281?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/16b9968a09bb2e9343f11aa6fe399ef445c2195fceba4ed1334876f5426e5281?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/16b9968a09bb2e9343f11aa6fe399ef445c2195fceba4ed1334876f5426e5281?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/16b9968a09bb2e9343f11aa6fe399ef445c2195fceba4ed1334876f5426e5281?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/16b9968a09bb2e9343f11aa6fe399ef445c2195fceba4ed1334876f5426e5281?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">DrGkill</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-816"><time pubdate datetime="2010-09-29T02:38:02-07:00">
					September 29, 2010 at 02:38					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Great article ! Congrats.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=816#respond" data-commentid="816" data-postid="522" data-belowelement="comment-816" data-respondelement="respond" data-replyto="Reply to DrGkill" aria-label="Reply to DrGkill">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-even depth-1" id="li-comment-818">
		<article id="comment-818" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Lee Hambley&#039;s avatar' src='https://0.gravatar.com/avatar/6fee9ed0c828b7b12dcd9c6b11e1a05ef8a6dfe26602e095bf44e4ed8c2de33b?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://0.gravatar.com/avatar/6fee9ed0c828b7b12dcd9c6b11e1a05ef8a6dfe26602e095bf44e4ed8c2de33b?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://0.gravatar.com/avatar/6fee9ed0c828b7b12dcd9c6b11e1a05ef8a6dfe26602e095bf44e4ed8c2de33b?s=60&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://0.gravatar.com/avatar/6fee9ed0c828b7b12dcd9c6b11e1a05ef8a6dfe26602e095bf44e4ed8c2de33b?s=80&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://0.gravatar.com/avatar/6fee9ed0c828b7b12dcd9c6b11e1a05ef8a6dfe26602e095bf44e4ed8c2de33b?s=120&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://0.gravatar.com/avatar/6fee9ed0c828b7b12dcd9c6b11e1a05ef8a6dfe26602e095bf44e4ed8c2de33b?s=160&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://watched.it/" class="url" rel="ugc external nofollow">Lee Hambley</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-818"><time pubdate datetime="2010-09-29T03:14:37-07:00">
					September 29, 2010 at 03:14					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Thanks for a very informative article, it&#8217;s great to see someone persuing the idea of well performing MySQL! Your article is very well written, my only take-away is that it appears this is only a problem on NUMA systems, which effectively means multi-processor (possibly with multi-core?)</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=818#respond" data-commentid="818" data-postid="522" data-belowelement="comment-818" data-respondelement="respond" data-replyto="Reply to Lee Hambley" aria-label="Reply to Lee Hambley">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.quora.com/When-is-the-Linux-kernel-going-to-be-patched-so-that-I-do-not-have-to-swap-to-RAM-disc-to-avoid-pages-from-being-written-to-disc-when-I-have-gigabytes-of-free-memory!#ans104169" class="url" rel="ugc external nofollow">Quora</a></p>

	</li><!-- #comment-## -->

	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-820">
		<article id="comment-820" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Andrew&#039;s avatar' src='https://2.gravatar.com/avatar/8132b86f2ef19fbd5c792b7988a1ce6cfe3fc8f8dc50f7fb21525a8d0b4a5a0b?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/8132b86f2ef19fbd5c792b7988a1ce6cfe3fc8f8dc50f7fb21525a8d0b4a5a0b?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/8132b86f2ef19fbd5c792b7988a1ce6cfe3fc8f8dc50f7fb21525a8d0b4a5a0b?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/8132b86f2ef19fbd5c792b7988a1ce6cfe3fc8f8dc50f7fb21525a8d0b4a5a0b?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/8132b86f2ef19fbd5c792b7988a1ce6cfe3fc8f8dc50f7fb21525a8d0b4a5a0b?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/8132b86f2ef19fbd5c792b7988a1ce6cfe3fc8f8dc50f7fb21525a8d0b4a5a0b?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Andrew</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-820"><time pubdate datetime="2010-09-29T07:22:31-07:00">
					September 29, 2010 at 07:22					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>This link is wrong (doesn&#8217;t match description):</p>
<p>Rik van Riel on the LKML Ã¢â‚¬â€ A few answers and proposal of the Split-LRU patch.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=820#respond" data-commentid="820" data-postid="522" data-belowelement="comment-820" data-respondelement="respond" data-replyto="Reply to Andrew" aria-label="Reply to Andrew">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor odd alt depth-2" id="li-comment-822">
		<article id="comment-822" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-822"><time pubdate datetime="2010-09-29T07:28:23-07:00">
					September 29, 2010 at 07:28					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Andrew: I guess the link wasn&#8217;t as clear as I intended it to be; Rik gets involved later on in the thread, but I figure you ought to read the context.  I changed the link instead to point to the index of messages in the thread, so now it more closely matches my intentions.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=822#respond" data-commentid="822" data-postid="522" data-belowelement="comment-822" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-821">
		<article id="comment-821" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Unknown&#039;s avatar' src='https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' srcset='https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40 1x, https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=60 1.5x, https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=80 2x, https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=120 3x, https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=160 4x' class='avatar avatar-40 avatar-default' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Justin Swanhart</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-821"><time pubdate datetime="2010-09-29T07:28:00-07:00">
					September 29, 2010 at 07:28					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Very cool post, thanks Jeremy.</p>
<p>The new InnoDB split buffer pool code should be modified to use numalib to allocate each of the smaller innodb buffer pools to use the local node.  If you split the buffer pool into an even number of chunks, the entire buffer pool should be able to be allocated locally.  Of course, you want to make sure you preserve space on each node for cache.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=821#respond" data-commentid="821" data-postid="522" data-belowelement="comment-821" data-respondelement="respond" data-replyto="Reply to Justin Swanhart" aria-label="Reply to Justin Swanhart">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-823">
		<article id="comment-823" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Unknown&#039;s avatar' src='https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' srcset='https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40 1x, https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=60 1.5x, https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=80 2x, https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=120 3x, https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=160 4x' class='avatar avatar-40 avatar-default' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Justin Swanhart</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-823"><time pubdate datetime="2010-09-29T07:32:40-07:00">
					September 29, 2010 at 07:32					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>I meant spread them across the local/remote nodes.  Too early.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=823#respond" data-commentid="823" data-postid="522" data-belowelement="comment-823" data-respondelement="respond" data-replyto="Reply to Justin Swanhart" aria-label="Reply to Justin Swanhart">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.areth.net/?p=29" class="url" rel="ugc external nofollow">Mysql/Linux swap problems | Areth Foster-Webster</a></p>

	</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-825">
		<article id="comment-825" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Alan&#039;s avatar' src='https://0.gravatar.com/avatar/3a5f15adf6e931e46e8b7d619eb6dd317d76750e0be6912d05a2e6b51b0f4955?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://0.gravatar.com/avatar/3a5f15adf6e931e46e8b7d619eb6dd317d76750e0be6912d05a2e6b51b0f4955?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://0.gravatar.com/avatar/3a5f15adf6e931e46e8b7d619eb6dd317d76750e0be6912d05a2e6b51b0f4955?s=60&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://0.gravatar.com/avatar/3a5f15adf6e931e46e8b7d619eb6dd317d76750e0be6912d05a2e6b51b0f4955?s=80&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://0.gravatar.com/avatar/3a5f15adf6e931e46e8b7d619eb6dd317d76750e0be6912d05a2e6b51b0f4955?s=120&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://0.gravatar.com/avatar/3a5f15adf6e931e46e8b7d619eb6dd317d76750e0be6912d05a2e6b51b0f4955?s=160&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Alan</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-825"><time pubdate datetime="2010-09-29T08:23:01-07:00">
					September 29, 2010 at 08:23					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>How does one figure out if a machine is NUMA or SMP/UMA?    This looks like it might be a problem we&#8217;re seeing, but I don&#8217;t know if this is it or not.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=825#respond" data-commentid="825" data-postid="522" data-belowelement="comment-825" data-respondelement="respond" data-replyto="Reply to Alan" aria-label="Reply to Alan">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor odd alt depth-2" id="li-comment-826">
		<article id="comment-826" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-826"><time pubdate datetime="2010-09-29T08:24:36-07:00">
					September 29, 2010 at 08:24					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Alan: You can use &#8220;numactl &#8211;hardware&#8221;; if you see more than one &#8220;node&#8221;, you&#8217;re on a NUMA system.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=826#respond" data-commentid="826" data-postid="522" data-belowelement="comment-826" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment even depth-3" id="li-comment-56149">
		<article id="comment-56149" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Pravata&#039;s avatar' src='https://2.gravatar.com/avatar/b2e51fa522ee94daae83d6cccbcf608cc373176a43266d664e75f34ea2f407b3?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/b2e51fa522ee94daae83d6cccbcf608cc373176a43266d664e75f34ea2f407b3?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/b2e51fa522ee94daae83d6cccbcf608cc373176a43266d664e75f34ea2f407b3?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/b2e51fa522ee94daae83d6cccbcf608cc373176a43266d664e75f34ea2f407b3?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/b2e51fa522ee94daae83d6cccbcf608cc373176a43266d664e75f34ea2f407b3?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/b2e51fa522ee94daae83d6cccbcf608cc373176a43266d664e75f34ea2f407b3?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Pravata</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-56149"><time pubdate datetime="2022-10-16T06:58:53-07:00">
					October 16, 2022 at 06:58					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Or we can check system messages as well like below.<br />
# dmesg | grep -i numa<br />
[    0.000000] No NUMA configuration found</p>
<p>Thanks, Jeremy for this detailed post, we recently implemented this in our Mysql NUMA servers which improved the performance a lot.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-827">
		<article id="comment-827" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Justin Mason&#039;s avatar' src='https://0.gravatar.com/avatar/98fc0c84b40c9ac1a8f61f397a499ac0655ba4c2abcc6e503b364ee1f3749624?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://0.gravatar.com/avatar/98fc0c84b40c9ac1a8f61f397a499ac0655ba4c2abcc6e503b364ee1f3749624?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://0.gravatar.com/avatar/98fc0c84b40c9ac1a8f61f397a499ac0655ba4c2abcc6e503b364ee1f3749624?s=60&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://0.gravatar.com/avatar/98fc0c84b40c9ac1a8f61f397a499ac0655ba4c2abcc6e503b364ee1f3749624?s=80&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://0.gravatar.com/avatar/98fc0c84b40c9ac1a8f61f397a499ac0655ba4c2abcc6e503b364ee1f3749624?s=120&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://0.gravatar.com/avatar/98fc0c84b40c9ac1a8f61f397a499ac0655ba4c2abcc6e503b364ee1f3749624?s=160&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://taint.org/" class="url" rel="ugc external nofollow">Justin Mason</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-827"><time pubdate datetime="2010-09-29T08:46:22-07:00">
					September 29, 2010 at 08:46					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Great writeup!  Thanks for this.</p>
<p>It sounds like NUMA memory-pool introspection would be a fantastic feature for top(1), if it doesn&#8217;t already exist.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=827#respond" data-commentid="827" data-postid="522" data-belowelement="comment-827" data-respondelement="respond" data-replyto="Reply to Justin Mason" aria-label="Reply to Justin Mason">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-828">
		<article id="comment-828" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Dimitri&#039;s avatar' src='https://2.gravatar.com/avatar/ea35745d6d4e7e80487c85e57d9979e515d496ccc209152b6dc8e301d4796f75?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/ea35745d6d4e7e80487c85e57d9979e515d496ccc209152b6dc8e301d4796f75?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/ea35745d6d4e7e80487c85e57d9979e515d496ccc209152b6dc8e301d4796f75?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/ea35745d6d4e7e80487c85e57d9979e515d496ccc209152b6dc8e301d4796f75?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/ea35745d6d4e7e80487c85e57d9979e515d496ccc209152b6dc8e301d4796f75?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/ea35745d6d4e7e80487c85e57d9979e515d496ccc209152b6dc8e301d4796f75?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://dimitrik.free.fr/blog" class="url" rel="ugc external nofollow">Dimitri</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-828"><time pubdate datetime="2010-09-29T08:48:06-07:00">
					September 29, 2010 at 08:48					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Jeremy,</p>
<p>Thanks for sharing this! Great post!</p>
<p>Rgds,<br />
-Dimitri</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=828#respond" data-commentid="828" data-postid="522" data-belowelement="comment-828" data-respondelement="respond" data-replyto="Reply to Dimitri" aria-label="Reply to Dimitri">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-829">
		<article id="comment-829" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Nick Wilkens&#039;s avatar' src='https://1.gravatar.com/avatar/7059e057811ea122ecc6f4582bdb66dbd2f672a28d225eaea4287973e0ab7099?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/7059e057811ea122ecc6f4582bdb66dbd2f672a28d225eaea4287973e0ab7099?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/7059e057811ea122ecc6f4582bdb66dbd2f672a28d225eaea4287973e0ab7099?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/7059e057811ea122ecc6f4582bdb66dbd2f672a28d225eaea4287973e0ab7099?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/7059e057811ea122ecc6f4582bdb66dbd2f672a28d225eaea4287973e0ab7099?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/7059e057811ea122ecc6f4582bdb66dbd2f672a28d225eaea4287973e0ab7099?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://www.mnxsolutions.com" class="url" rel="ugc external nofollow">Nick Wilkens</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-829"><time pubdate datetime="2010-09-29T09:57:07-07:00">
					September 29, 2010 at 09:57					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>What about using the large-pages (huge pages) mysql option: <a href="http://dev.mysql.com/doc/refman/5.0/en/large-page-support.ht" rel="nofollow ugc">http://dev.mysql.com/doc/refman/5.0/en/large-page-support.ht</a>&#8230;</p>
<p>From the kernel documentation @ <a href="http://www.mjmwired.net/kernel/Documentation/vm/hugetlbpage" rel="nofollow ugc">http://www.mjmwired.net/kernel/Documentation/vm/hugetlbpage</a>&#8230;. : &#8220;Pages that are used as huge pages are reserved inside the kernel and cannot be used for other purposes. Huge pages cannot be swapped out under memory pressure.&#8221;</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=829#respond" data-commentid="829" data-postid="522" data-belowelement="comment-829" data-respondelement="respond" data-replyto="Reply to Nick Wilkens" aria-label="Reply to Nick Wilkens">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor even depth-2" id="li-comment-830">
		<article id="comment-830" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-830"><time pubdate datetime="2010-09-29T10:00:07-07:00">
					September 29, 2010 at 10:00					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Nick: Using large-pages will keep mysqld from being swapped out, but it won&#8217;t keep the system from swapping *something* out.  And, if it really needs memory on a particular node, and can&#8217;t swap out pages for mysqld, it will swap something else which might be more important to the function of the system, fail the allocation, or OOM-kill a process (likely mysqld).</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=830#respond" data-commentid="830" data-postid="522" data-belowelement="comment-830" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="comment odd alt thread-even depth-1" id="li-comment-831">
		<article id="comment-831" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jonathan Moore&#039;s avatar' src='https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://0x0000.org" class="url" rel="ugc external nofollow">Jonathan Moore</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-831"><time pubdate datetime="2010-09-29T10:54:04-07:00">
					September 29, 2010 at 10:54					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>I have been working with Kevin Burton at spinn3r/tailrank for years and we did eventually solve the swap problem together but in a totally different way.</p>
<p>Before I tell you how, first answer the question to your self: why would you ever *want* to swap on a server?</p>
<p>We have come to the conclusion that  we never want to swap at spinn3r; and I can&#8217;t come up with any good reasons for process on a server to swap at all.</p>
<p>So we don&#8217;t have swap. I don&#8217;t mean that we turned swap off with swapoff; that has known problems which I believe have to do with the way the memory allocator tries to find free pages. ( Though there has been some work on this in 2010. ) What we did is compile out swap. This is an idea we got form a friend at google who apparently run all their servers in this way. Not only does this keep you from ever swapping it also speeds up the memory management as there is a whole set of bookkeeping the kernel no longer has to do.</p>
<p>The observant reader might be thinking but what about over commit and the OOM killer. The short answer is don&#8217;t over provision your server; but in all likelihood you might do it by accident and then that 40G mysql process is going to look like a good target to the OOM killer. To keep your large warmed-up mysql process form getting killed you can set a its /proc/PID/oom_adj to &#8220;-17&#8221; which will keep the OOM killer form considering that process as a target. ( We also set our sshd similarly so it does not get killed. )</p>
<p>In this way we have a kernel that wont swap, and is faster, while still keeping important processes safe from the OOM killer.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=831#respond" data-commentid="831" data-postid="522" data-belowelement="comment-831" data-respondelement="respond" data-replyto="Reply to Jonathan Moore" aria-label="Reply to Jonathan Moore">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor even depth-2" id="li-comment-835">
		<article id="comment-835" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-835"><time pubdate datetime="2010-09-29T11:18:56-07:00">
					September 29, 2010 at 11:18					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Jonathan: I think this makes sense if you have a sufficiently well-managed and carefully configured system, but I don&#8217;t think that&#8217;s a good solution for the general case.  If you have swap either turned off or compiled out, that will disable memory overcommit, and severely limit how much mmap can be done, by my understanding.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=835#respond" data-commentid="835" data-postid="522" data-belowelement="comment-835" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-832">
		<article id="comment-832" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Tim&#039;s avatar' src='https://2.gravatar.com/avatar/bd1c778151e78c6fc3511d96c6fd8c3c522ceaef681c9fea43196fc89981d3df?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/bd1c778151e78c6fc3511d96c6fd8c3c522ceaef681c9fea43196fc89981d3df?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/bd1c778151e78c6fc3511d96c6fd8c3c522ceaef681c9fea43196fc89981d3df?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/bd1c778151e78c6fc3511d96c6fd8c3c522ceaef681c9fea43196fc89981d3df?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/bd1c778151e78c6fc3511d96c6fd8c3c522ceaef681c9fea43196fc89981d3df?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/bd1c778151e78c6fc3511d96c6fd8c3c522ceaef681c9fea43196fc89981d3df?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://dolavim.us/blog" class="url" rel="ugc external nofollow">Tim</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-832"><time pubdate datetime="2010-09-29T11:00:33-07:00">
					September 29, 2010 at 11:00					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Jeremy: good write up.  You&#8217;re nicely working counter to something I continually am asserting: &#8220;Nobody understands NUMA&#8221;.</p>
<p>Also I don&#8217;t think Dave Hansen referred you here, but there&#8217;s a wiki page where we try to clarify some of this more:  <a href="http://linux-mm.org/Low_On_Memory" rel="nofollow ugc">http://linux-mm.org/Low_On_Memory</a><br />
This is a very FAQ situation and the low on memory page could use updating for NUMA and zone reclaim.  Especially as you&#8217;ve noted&#8230;most any system these days has NUMA effects and the allocation/reclaim behavior (and subsequent runtime performance) is only more complicated from a user perspective as a result.</p>
<p>Another note on large pages:  keep in mind that using large pages on linux _may_ in the very near future not keep mysql or other large page using apps from being swapped out.  Depending on whether or not the transparent huge page patches merge in, there may be additional interesting runtime behaviors coming soon.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=832#respond" data-commentid="832" data-postid="522" data-belowelement="comment-832" data-respondelement="respond" data-replyto="Reply to Tim" aria-label="Reply to Tim">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor even depth-2" id="li-comment-836">
		<article id="comment-836" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-836"><time pubdate datetime="2010-09-29T11:21:09-07:00">
					September 29, 2010 at 11:21					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Tim: Thanks for the comment.  I read the Low_On_Memory page, and it was very helpful, although incomplete, it&#8217;s a great resource.  Good point on the system behavior changing in the future.  The key point of my research and solution is to solve the *problem* (that the system thinks it needs to swap) rather than the symptom (the swapping itself).</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=836#respond" data-commentid="836" data-postid="522" data-belowelement="comment-836" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="comment odd alt thread-even depth-1" id="li-comment-833">
		<article id="comment-833" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Anil Pal&#039;s avatar' src='https://1.gravatar.com/avatar/aa4b8a87c7f34810c937735591a608da37b86444a78c11265c8487d2b815bfc1?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/aa4b8a87c7f34810c937735591a608da37b86444a78c11265c8487d2b815bfc1?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/aa4b8a87c7f34810c937735591a608da37b86444a78c11265c8487d2b815bfc1?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/aa4b8a87c7f34810c937735591a608da37b86444a78c11265c8487d2b815bfc1?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/aa4b8a87c7f34810c937735591a608da37b86444a78c11265c8487d2b815bfc1?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/aa4b8a87c7f34810c937735591a608da37b86444a78c11265c8487d2b815bfc1?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Anil Pal</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-833"><time pubdate datetime="2010-09-29T11:10:48-07:00">
					September 29, 2010 at 11:10					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Nice investigation.  You mention that the NUMA code has parameters for the relative costs of local/remote access. But it sounds like it doesn&#8217;t use that information in making decisions.  That should help automatically differentiate the two types of systems, and decide whether local swap or remote access is better for a specific allocation.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=833#respond" data-commentid="833" data-postid="522" data-belowelement="comment-833" data-respondelement="respond" data-replyto="Reply to Anil Pal" aria-label="Reply to Anil Pal">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-834">
		<article id="comment-834" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Kevin Burton&#039;s avatar' src='https://2.gravatar.com/avatar/8e458df3012c1fcbbf035faa3dea4762be061811ba45ee724a691db2b6dc73bf?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/8e458df3012c1fcbbf035faa3dea4762be061811ba45ee724a691db2b6dc73bf?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/8e458df3012c1fcbbf035faa3dea4762be061811ba45ee724a691db2b6dc73bf?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/8e458df3012c1fcbbf035faa3dea4762be061811ba45ee724a691db2b6dc73bf?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/8e458df3012c1fcbbf035faa3dea4762be061811ba45ee724a691db2b6dc73bf?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/8e458df3012c1fcbbf035faa3dea4762be061811ba45ee724a691db2b6dc73bf?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://spinn3r.com" class="url" rel="ugc external nofollow">Kevin Burton</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-834"><time pubdate datetime="2010-09-29T11:11:51-07:00">
					September 29, 2010 at 11:11					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>We&#8217;ve migrated to using noswap kernels on all our boxes.  Works well.  Not a solution for everyone.</p>
<p>I think your &#8220;An even better solution&#8221; is to run N mysql daemons (one per node) and then bind the memory allocations there.</p>
<p>This has been my goal for two years now but we haven&#8217;t been able to do it in our stack (yet).</p>
<p>The first change we&#8217;ll probably make is to do this to our robots which are a bit more shardable than our mysql boxes.  </p>
<p>Balancing memory is a good solution for about 70% of people but one major application won&#8217;t work well in this role.  If you&#8217;re reading large chunks of memory at a time, and processing them on the LOCAL box, then your application will be slower as nr_nodes-1/nr_nodes of your pages will be non-local.  </p>
<p>For web applications where the biggest latencies are gigabit and CPU (and webapp) this probably won&#8217;t dominate though.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=834#respond" data-commentid="834" data-postid="522" data-belowelement="comment-834" data-respondelement="respond" data-replyto="Reply to Kevin Burton" aria-label="Reply to Kevin Burton">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-even depth-1" id="li-comment-837">
		<article id="comment-837" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jon Watte&#039;s avatar' src='https://1.gravatar.com/avatar/4d71fcc1eadfb66d72d8ab97a534958e38b565912e1c1e8ba9949b639271c4b4?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/4d71fcc1eadfb66d72d8ab97a534958e38b565912e1c1e8ba9949b639271c4b4?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/4d71fcc1eadfb66d72d8ab97a534958e38b565912e1c1e8ba9949b639271c4b4?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/4d71fcc1eadfb66d72d8ab97a534958e38b565912e1c1e8ba9949b639271c4b4?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/4d71fcc1eadfb66d72d8ab97a534958e38b565912e1c1e8ba9949b639271c4b4?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/4d71fcc1eadfb66d72d8ab97a534958e38b565912e1c1e8ba9949b639271c4b4?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://www.enchantedage.com/" class="url" rel="ugc external nofollow">Jon Watte</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-837"><time pubdate datetime="2010-09-29T11:38:23-07:00">
					September 29, 2010 at 11:38					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Thanks for the blog post!<br />
You&#8217;d think that &#8220;swapping&#8221; to a NUMA node would be preferable to swapping to disk. Perhaps we&#8217;ll get this in the 2.8 series.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=837#respond" data-commentid="837" data-postid="522" data-belowelement="comment-837" data-respondelement="respond" data-replyto="Reply to Jon Watte" aria-label="Reply to Jon Watte">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-838">
		<article id="comment-838" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jonathan Moore&#039;s avatar' src='https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://0x0000.org" class="url" rel="ugc external nofollow">Jonathan Moore</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-838"><time pubdate datetime="2010-09-29T11:50:42-07:00">
					September 29, 2010 at 11:50					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Jeremy Cole: I am sure that removing swap dose not remove over commit.</p>
<p>Over commit happens when the kernel believes that the a process wont actual need all the memory it has asked for; as a example when a process forks the kernel needs  create copy of parents processes address space in the child but much of that memory will never diverge between the parent and child processes, so the kernel can use COW and over commit to make the memory use more effective.  Compiling out swap dost not, and can not, turn off virtual memory.</p>
<p>To the well manicured system argument; if you have a production server that might start swapping at any time, or in general who&#8217;s behavior you do not understand, you are playing with fire. ( read you should expect down time randomly )</p>
<p>By the way if it was not clear I think this is really good and enlightening work you did hear, thanks.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=838#respond" data-commentid="838" data-postid="522" data-belowelement="comment-838" data-respondelement="respond" data-replyto="Reply to Jonathan Moore" aria-label="Reply to Jonathan Moore">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://lonesysadmin.net/2010/09/29/links-for-2010-09-29/" class="url" rel="ugc external nofollow">links for 2010-09-29 : Bob Plankers, The Lone Sysadmin</a></p>

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-even depth-1" id="li-comment-840">
		<article id="comment-840" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Kevin Burton&#039;s avatar' src='https://2.gravatar.com/avatar/8e458df3012c1fcbbf035faa3dea4762be061811ba45ee724a691db2b6dc73bf?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/8e458df3012c1fcbbf035faa3dea4762be061811ba45ee724a691db2b6dc73bf?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/8e458df3012c1fcbbf035faa3dea4762be061811ba45ee724a691db2b6dc73bf?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/8e458df3012c1fcbbf035faa3dea4762be061811ba45ee724a691db2b6dc73bf?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/8e458df3012c1fcbbf035faa3dea4762be061811ba45ee724a691db2b6dc73bf?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/8e458df3012c1fcbbf035faa3dea4762be061811ba45ee724a691db2b6dc73bf?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://spinn3r.com" class="url" rel="ugc external nofollow">Kevin Burton</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-840"><time pubdate datetime="2010-09-29T12:01:19-07:00">
					September 29, 2010 at 12:01					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Ideally, it would be possible to track how many memory reads were local vs non-local.  Obviously, you want non-local reads to be near zero.</p>
<p>I&#8217;m tracking this down now but I don&#8217;t see a way&#8230;&#8230;</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=840#respond" data-commentid="840" data-postid="522" data-belowelement="comment-840" data-respondelement="respond" data-replyto="Reply to Kevin Burton" aria-label="Reply to Kevin Burton">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor even depth-2" id="li-comment-841">
		<article id="comment-841" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-841"><time pubdate datetime="2010-09-29T12:03:49-07:00">
					September 29, 2010 at 12:03					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Kevin: See the numastat command and the various sys files.  <a href="http://www.kernel.org/doc/Documentation/numastat.txt" rel="nofollow ugc">http://www.kernel.org/doc/Documentation/numastat.txt</a></p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=841#respond" data-commentid="841" data-postid="522" data-belowelement="comment-841" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-842">
		<article id="comment-842" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Unknown&#039;s avatar' src='https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' srcset='https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40 1x, https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=60 1.5x, https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=80 2x, https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=120 3x, https://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=160 4x' class='avatar avatar-40 avatar-default' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">zer</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-842"><time pubdate datetime="2010-09-29T12:18:48-07:00">
					September 29, 2010 at 12:18					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Ran into this issue a few years ago (custom proprietary high performance dbs). A lot of details aside, we felt most of these performance based memory issues came down to the software architecture. Running batteries of tests on many different systems, the optimal configuration was always 1 process per socket (physical CPU) and then threads on each core. This always gave us the highest throughput and the lowest latency. Going too far on either extreme (not enough processes vs too many) resulted in poorer performance and could leave you disk bound which is never fun. Not sure if you have this level of process/thread control in your mysql/innodb architecture. Obviously this is the direction hardware is going and keeping this in mind when data architecting will leave you with a lot of performance flexibility.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=842#respond" data-commentid="842" data-postid="522" data-belowelement="comment-842" data-respondelement="respond" data-replyto="Reply to zer" aria-label="Reply to zer">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-843">
		<article id="comment-843" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Matthew Rogers&#039;s avatar' src='https://2.gravatar.com/avatar/2d94ca63fd4e0cd2f98c4d07a09df9d8aff50c3389e7ff21c1fa6f6b2ea3f590?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/2d94ca63fd4e0cd2f98c4d07a09df9d8aff50c3389e7ff21c1fa6f6b2ea3f590?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/2d94ca63fd4e0cd2f98c4d07a09df9d8aff50c3389e7ff21c1fa6f6b2ea3f590?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/2d94ca63fd4e0cd2f98c4d07a09df9d8aff50c3389e7ff21c1fa6f6b2ea3f590?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/2d94ca63fd4e0cd2f98c4d07a09df9d8aff50c3389e7ff21c1fa6f6b2ea3f590?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/2d94ca63fd4e0cd2f98c4d07a09df9d8aff50c3389e7ff21c1fa6f6b2ea3f590?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://matthewrogers.org" class="url" rel="ugc external nofollow">Matthew Rogers</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-843"><time pubdate datetime="2010-09-29T12:36:57-07:00">
					September 29, 2010 at 12:36					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Skip using a swap partition. Write a script to activate one when the system hits the rams limits.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=843#respond" data-commentid="843" data-postid="522" data-belowelement="comment-843" data-respondelement="respond" data-replyto="Reply to Matthew Rogers" aria-label="Reply to Matthew Rogers">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor odd alt depth-2" id="li-comment-844">
		<article id="comment-844" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-844"><time pubdate datetime="2010-09-29T12:40:44-07:00">
					September 29, 2010 at 12:40					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Matthew Rogers: I don&#8217;t think you&#8217;ve thought that through.  When the system needs to swap, clearly it doesn&#8217;t have any memory available.  Where&#8217;s it supposed to get the memory it needs to (a) detect that it&#8217;s out of memory, and (b) run a script to enable swap?  The memory management under no-memory conditions is already marginal &#8212; it always takes  a little bit more memory to free memory already.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=844#respond" data-commentid="844" data-postid="522" data-belowelement="comment-844" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.smashcompany.com/technology/linux-memory-management-collides-with-mysql" class="url" rel="ugc external nofollow">Linux memory management collides with MySql | Smash Company</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://genericlanguage.wordpress.com/2010/09/29/the-shared-memory-model-is-doomed-a-teaser/" class="url" rel="ugc external nofollow">The shared memory model is doomed (a teaser) | Generic Language</a></p>

	</li><!-- #comment-## -->

	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-847">
		<article id="comment-847" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Philip Reynolds&#039;s avatar' src='https://2.gravatar.com/avatar/25923888376da2b7025f3dd915439f051b4f400de4eec123d46f3bf849f98eb5?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/25923888376da2b7025f3dd915439f051b4f400de4eec123d46f3bf849f98eb5?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/25923888376da2b7025f3dd915439f051b4f400de4eec123d46f3bf849f98eb5?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/25923888376da2b7025f3dd915439f051b4f400de4eec123d46f3bf849f98eb5?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/25923888376da2b7025f3dd915439f051b4f400de4eec123d46f3bf849f98eb5?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/25923888376da2b7025f3dd915439f051b4f400de4eec123d46f3bf849f98eb5?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://www.brassy.net/" class="url" rel="ugc external nofollow">Philip Reynolds</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-847"><time pubdate datetime="2010-09-29T23:15:41-07:00">
					September 29, 2010 at 23:15					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>@Jonathan</p>
<p>I&#8217;m interested in your assertion that turning off swap (via swapoff) is prone to problems with the memory allocator. Googling hasn&#8217;t helped me back this claim up, I&#8217;m wondering if you know where this is reported / documented / talked up about.</p>
<p>Rockin article btw, although we&#8217;re not on NUMA architecture, we do run with no swap to avoid this. (hence my curiosity about Jonathan&#8217;s comment)</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=847#respond" data-commentid="847" data-postid="522" data-belowelement="comment-847" data-respondelement="respond" data-replyto="Reply to Philip Reynolds" aria-label="Reply to Philip Reynolds">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor odd alt depth-2" id="li-comment-854">
		<article id="comment-854" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-854"><time pubdate datetime="2010-10-04T14:04:56-07:00">
					October 4, 2010 at 14:04					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Philip: My understanding is this: disabling swap completely disables memory overcommit, which can cause problems forking in large processes, amongst other things.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=854#respond" data-commentid="854" data-postid="522" data-belowelement="comment-854" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://davidmarks.co/2010/09/30/why-is-mysql-swapping-when-i-have-plenty-of-ram/" class="url" rel="ugc external nofollow">Why is mysql swapping when I have plenty of RAM? | You Can Change It Later</a></p>

	</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-849">
		<article id="comment-849" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jonathan Moore&#039;s avatar' src='https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/eaabd860679a564cddc207e93e9e5ba8a4bcf9a073c7e3c2aa473180829bf88d?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://0x0000.org" class="url" rel="ugc external nofollow">Jonathan Moore</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-849"><time pubdate datetime="2010-09-30T10:14:45-07:00">
					September 30, 2010 at 10:14					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Philip Reynolds: </p>
<p>This memory manager bug not documented any where as far as I know but I have discussed this with kernel developers and they are aware of the issue, but know one has given them a reproducible test case. There has been some patches in one of the last few kernels that might address this issue but I have not had a chance to test. Running with swap off seems to make the memory bug worse then compiling out swap.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=849#respond" data-commentid="849" data-postid="522" data-belowelement="comment-849" data-respondelement="respond" data-replyto="Reply to Jonathan Moore" aria-label="Reply to Jonathan Moore">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://dhananjaynene.com/2010/10/01/links-for-2010-09-30/" class="url" rel="ugc external nofollow">&raquo; links for 2010-09-30 (Dhananjay Nene)</a></p>

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-851">
		<article id="comment-851" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Francis Ridder&#039;s avatar' src='https://2.gravatar.com/avatar/b7e8fb309d7b7eae3ed281118b4e072bc79377279b8a4d68c2243dcdfbb9c6fc?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/b7e8fb309d7b7eae3ed281118b4e072bc79377279b8a4d68c2243dcdfbb9c6fc?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/b7e8fb309d7b7eae3ed281118b4e072bc79377279b8a4d68c2243dcdfbb9c6fc?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/b7e8fb309d7b7eae3ed281118b4e072bc79377279b8a4d68c2243dcdfbb9c6fc?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/b7e8fb309d7b7eae3ed281118b4e072bc79377279b8a4d68c2243dcdfbb9c6fc?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/b7e8fb309d7b7eae3ed281118b4e072bc79377279b8a4d68c2243dcdfbb9c6fc?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Francis Ridder</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-851"><time pubdate datetime="2010-10-01T10:55:09-07:00">
					October 1, 2010 at 10:55					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>It would be interesting to see how other OS&#8217;s handle this scenario. Specifically how FreeBSD or Solaris deal with NUMA.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=851#respond" data-commentid="851" data-postid="522" data-belowelement="comment-851" data-respondelement="respond" data-replyto="Reply to Francis Ridder" aria-label="Reply to Francis Ridder">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-852">
		<article id="comment-852" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='mharrigan&#039;s avatar' src='https://1.gravatar.com/avatar/7ca35e53f497a11e2c3281f3f69c60c8bcf57b28be4b566356d8229446229743?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/7ca35e53f497a11e2c3281f3f69c60c8bcf57b28be4b566356d8229446229743?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/7ca35e53f497a11e2c3281f3f69c60c8bcf57b28be4b566356d8229446229743?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/7ca35e53f497a11e2c3281f3f69c60c8bcf57b28be4b566356d8229446229743?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/7ca35e53f497a11e2c3281f3f69c60c8bcf57b28be4b566356d8229446229743?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/7ca35e53f497a11e2c3281f3f69c60c8bcf57b28be4b566356d8229446229743?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">mharrigan</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-852"><time pubdate datetime="2010-10-04T04:00:35-07:00">
					October 4, 2010 at 04:00					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Really excellent detective work, I&#8217;m not a MySQL user but it&#8217;s still very interesting.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=852#respond" data-commentid="852" data-postid="522" data-belowelement="comment-852" data-respondelement="respond" data-replyto="Reply to mharrigan" aria-label="Reply to mharrigan">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-853">
		<article id="comment-853" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Kevin Closson&#039;s avatar' src='https://2.gravatar.com/avatar/23469e3982ef323f2a6e60b9b1ff7036785908cbd8fedacec4a594af8bb68484?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/23469e3982ef323f2a6e60b9b1ff7036785908cbd8fedacec4a594af8bb68484?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/23469e3982ef323f2a6e60b9b1ff7036785908cbd8fedacec4a594af8bb68484?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/23469e3982ef323f2a6e60b9b1ff7036785908cbd8fedacec4a594af8bb68484?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/23469e3982ef323f2a6e60b9b1ff7036785908cbd8fedacec4a594af8bb68484?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/23469e3982ef323f2a6e60b9b1ff7036785908cbd8fedacec4a594af8bb68484?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://kevinclosson.wordpress.com" class="url" rel="ugc external nofollow">Kevin Closson</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-853"><time pubdate datetime="2010-10-04T11:59:04-07:00">
					October 4, 2010 at 11:59					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Hi Jeremy,</p>
<p>   Have you tested much with the system booted with numa=off? It appears you are using a Nehalem EP system. You might just boot it in SUMA mode and see how it performs. </p>
<p>   While not mysql-related, your readers might find the following NUMA information useful:</p>
<p><a href="http://kevinclosson.wordpress.com/2009/05/14/you-buy-a-numa-system-oracle-says-disable-numa-what-gives-part-ii/" rel="nofollow ugc">http://kevinclosson.wordpress.com/2009/05/14/you-buy-a-numa-system-oracle-says-disable-numa-what-gives-part-ii/</a></p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=853#respond" data-commentid="853" data-postid="522" data-belowelement="comment-853" data-respondelement="respond" data-replyto="Reply to Kevin Closson" aria-label="Reply to Kevin Closson">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor even depth-2" id="li-comment-855">
		<article id="comment-855" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-855"><time pubdate datetime="2010-10-04T14:07:02-07:00">
					October 4, 2010 at 14:07					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Kevin:  I haven&#8217;t done any testing thus far with the NUMA features disabled in the BIOS, but it would be interesting to try.  Your articles are excellent &#8212; I will bring them up into my main article as another reference with more explanation about NUMA and big databases.  It&#8217;s great to see a bit of the Oracle perspective on this.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=855#respond" data-commentid="855" data-postid="522" data-belowelement="comment-855" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://enabling-tech.com/?p=158" class="url" rel="ugc external nofollow">Numa | Enabling Technology</a></p>

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-even depth-1" id="li-comment-857">
		<article id="comment-857" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Matthew Rogers&#039;s avatar' src='https://0.gravatar.com/avatar/0c49d897089663f1189380b7178eb096258d1ccd4fe814d7fe9585ea131f3159?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://0.gravatar.com/avatar/0c49d897089663f1189380b7178eb096258d1ccd4fe814d7fe9585ea131f3159?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://0.gravatar.com/avatar/0c49d897089663f1189380b7178eb096258d1ccd4fe814d7fe9585ea131f3159?s=60&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://0.gravatar.com/avatar/0c49d897089663f1189380b7178eb096258d1ccd4fe814d7fe9585ea131f3159?s=80&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://0.gravatar.com/avatar/0c49d897089663f1189380b7178eb096258d1ccd4fe814d7fe9585ea131f3159?s=120&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://0.gravatar.com/avatar/0c49d897089663f1189380b7178eb096258d1ccd4fe814d7fe9585ea131f3159?s=160&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://matthewrogers.org" class="url" rel="ugc external nofollow">Matthew Rogers</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-857"><time pubdate datetime="2010-10-13T21:29:29-07:00">
					October 13, 2010 at 21:29					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>@Jeremy Cole</p>
<p>You could simply run a cronjob and when ram usage hits 80% allocate more space via swap or simply send an alert.   I don&#8217;t even think you should run ANY swap space.</p>
<p>If you system is running out of ram and is actively using swap during day to day operations the balancing is mis configured or your server is not sized properly.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=857#respond" data-commentid="857" data-postid="522" data-belowelement="comment-857" data-respondelement="respond" data-replyto="Reply to Matthew Rogers" aria-label="Reply to Matthew Rogers">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor even depth-2" id="li-comment-858">
		<article id="comment-858" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-858"><time pubdate datetime="2010-10-13T22:13:41-07:00">
					October 13, 2010 at 22:13					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Matthew Rogers: Clearly you did not read the article.  Try again.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=858#respond" data-commentid="858" data-postid="522" data-belowelement="comment-858" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.bitplumber.net/2010/10/a-cassandra-hardware-stack-dell-c1100s-ocz-vertex-2-ssds-with-sandforce-arista-7048s/" class="url" rel="ugc external nofollow">bitplumber.net &raquo; A Cassandra Hardware Stack &#8211; Dell C1100&#8242;s &#8211; OCZ Vertex 2 SSD&#8217;s with Sandforce &#8211; Arista 7048&#8242;s</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.sysadministrivia.com/2010/10/28/sysadministrivia-episode-001/" class="url" rel="ugc external nofollow">Sys Administrivia Podcasts &raquo; SysAdministrivia Episode 001</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.yiihsia.com/?p=14" class="url" rel="ugc external nofollow">yiihsiaÃ§Å¡â€žÃ¥ÂÅ¡Ã¥Â®Â¢ &raquo; Ã¦Å â‚¬Ã¦Å“Â¯Ã©Â¢â€ Ã¥Å¸Å¸Ã¢â‚¬â€Ã¦ÂµÂ·Ã©â€¡ÂÃ¥Â­ËœÃ¥â€šÂ¨Ã¨Â®Â¡Ã§Â®â€”</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://alexlurthu.wordpress.com/2010/12/11/running-mysql-with-memlock/" class="url" rel="ugc external nofollow">running mysql with &ldquo;memlock&rdquo; &laquo; Random Thoughts</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://blog.wl0.org/2011/03/how-to-start-mysqld-using-numactl/" class="url" rel="ugc external nofollow">How to start mysqld using numactl | Simon J Mudd&#039;s Blog</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://blog.manjusri.org/2011/03/17/administrating-mongodb/" class="url" rel="ugc external nofollow">Administrating MongoDB - Obsolete Your Idols</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://openlife.cc/blogs/2011/may/4-performance-fixes-mysql-large-servers" class="url" rel="ugc external nofollow">4 performance fixes to MySQL on large servers | OpenLife.cc</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://blog.khsing.net/2011/07/mysql%e5%ba%94%e4%b8%8d%e5%ba%94%e8%af%a5%e5%bc%80swap.html" class="url" rel="ugc external nofollow">Gawain&#039;s Jail - MySQL?????swap</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://blog.agoragames.com/blog/2011/06/24/of-penguins-rabbits-and-buses/" class="url" rel="ugc external nofollow">Brain Matters &raquo; Blog Archive &raquo; Of Penguins, Rabbits and Buses</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.nosensenews.com/2011/07/howto-avoid-mysql-swapping-on-multi-core-cpus/" class="url" rel="ugc external nofollow">Howto &#8211; Avoid MySQL swapping on multi core CPUs</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://huoding.com/2011/08/09/104" class="url" rel="ugc external nofollow">???MongoDB???? | ????</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://mkv.cn/2172/performance-issues-in-mind-a-mongodb" class="url" rel="ugc external nofollow">???MongoDB???? - ????</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.miuzei.com/?p=82" class="url" rel="ugc external nofollow">???? &raquo; ????MongoDB????</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.lvtu163.com/index.php/archives/141" class="url" rel="ugc external nofollow">???MongoDB???? - ?????-??????-????-SNS-????-DBA</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.realzyy.com/?p=1245" class="url" rel="ugc external nofollow">??????????? &raquo; Blog Archive &raquo; MySQL??????swap???</a></p>

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-938">
		<article id="comment-938" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Ian East&#039;s avatar' src='https://0.gravatar.com/avatar/057ffec6612e831386447e8c91afcadfed48be6128409cb4da5e95244901bd05?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://0.gravatar.com/avatar/057ffec6612e831386447e8c91afcadfed48be6128409cb4da5e95244901bd05?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://0.gravatar.com/avatar/057ffec6612e831386447e8c91afcadfed48be6128409cb4da5e95244901bd05?s=60&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://0.gravatar.com/avatar/057ffec6612e831386447e8c91afcadfed48be6128409cb4da5e95244901bd05?s=80&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://0.gravatar.com/avatar/057ffec6612e831386447e8c91afcadfed48be6128409cb4da5e95244901bd05?s=120&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://0.gravatar.com/avatar/057ffec6612e831386447e8c91afcadfed48be6128409cb4da5e95244901bd05?s=160&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Ian East</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-938"><time pubdate datetime="2012-01-12T12:06:29-08:00">
					January 12, 2012 at 12:06					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>This article really helped me improve mongodb performance.  Perhaps you might want to make a version that is not specific to MySQL.  Basically, this applies to any application that uses large amounts of memory.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=938#respond" data-commentid="938" data-postid="522" data-belowelement="comment-938" data-respondelement="respond" data-replyto="Reply to Ian East" aria-label="Reply to Ian East">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-964">
		<article id="comment-964" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Taavi Burns&#039;s avatar' src='https://1.gravatar.com/avatar/d238cd2e43231ff108152e98c3e66989c4318cbf75d9e15d79873d34aeb7cae0?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d238cd2e43231ff108152e98c3e66989c4318cbf75d9e15d79873d34aeb7cae0?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d238cd2e43231ff108152e98c3e66989c4318cbf75d9e15d79873d34aeb7cae0?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d238cd2e43231ff108152e98c3e66989c4318cbf75d9e15d79873d34aeb7cae0?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d238cd2e43231ff108152e98c3e66989c4318cbf75d9e15d79873d34aeb7cae0?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d238cd2e43231ff108152e98c3e66989c4318cbf75d9e15d79873d34aeb7cae0?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Taavi Burns</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-964"><time pubdate datetime="2012-01-31T07:54:54-08:00">
					January 31, 2012 at 07:54					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>I actually worked on NUMA memory performance issues at IBM a few years ago, that begat this patent:<br />
<a href="http://www.google.com/patents/US7302533" rel="nofollow ugc">http://www.google.com/patents/US7302533</a></p>
<p>It&#8217;s basically the same story, but we were working to reduce traffic on the interconnect fabric and reduce latency, binding workers to nodes along with the memory they usually work on. We were working with AIX, so the swappiness problem probably isn&#8217;t comparable. :)</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=964#respond" data-commentid="964" data-postid="522" data-belowelement="comment-964" data-respondelement="respond" data-replyto="Reply to Taavi Burns" aria-label="Reply to Taavi Burns">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1003">
		<article id="comment-1003" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Terrence Andrew Davis&#039;s avatar' src='https://graph.facebook.com/1505460658/picture?type=large&#038;_md5=4793687e13fa76eb028945b32f85ea50' srcset='https://graph.facebook.com/1505460658/picture?type=large&#038;_md5=4793687e13fa76eb028945b32f85ea50 1x, https://graph.facebook.com/1505460658/picture?type=large&#038;_md5=4793687e13fa76eb028945b32f85ea50 1.5x, https://graph.facebook.com/1505460658/picture?type=large&#038;_md5=4793687e13fa76eb028945b32f85ea50 2x, https://graph.facebook.com/1505460658/picture?type=large&#038;_md5=4793687e13fa76eb028945b32f85ea50 3x, https://graph.facebook.com/1505460658/picture?type=large&#038;_md5=4793687e13fa76eb028945b32f85ea50 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://www.facebook.com/terrence.a.davis1" class="url" rel="ugc external nofollow">Terrence Andrew Davis</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1003"><time pubdate datetime="2012-04-08T04:48:38-07:00">
					April 8, 2012 at 04:48					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>In LoseThos, I want one memory map shared by all CPUs.  If a system does not have that, I don&#8217;t care about it.</p>
<p>SWAPS/s on the wallpaper is how many times a task is changed.</p>
<p>During disk I/O, code like this executes:</p>
<p>while (INP(DRIVE_STATUS)!=READY)<br />
  YieldCPU2NextTask;</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1003#respond" data-commentid="1003" data-postid="522" data-belowelement="comment-1003" data-respondelement="respond" data-replyto="Reply to Terrence Andrew Davis" aria-label="Reply to Terrence Andrew Davis">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-1004">
		<article id="comment-1004" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jonathan DePrizio&#039;s avatar' src='https://0.gravatar.com/avatar/f18a4e8fb849db3a21f4f64703d5ee186f9c692b276e6135caffd45e21c9a119?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://0.gravatar.com/avatar/f18a4e8fb849db3a21f4f64703d5ee186f9c692b276e6135caffd45e21c9a119?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://0.gravatar.com/avatar/f18a4e8fb849db3a21f4f64703d5ee186f9c692b276e6135caffd45e21c9a119?s=60&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://0.gravatar.com/avatar/f18a4e8fb849db3a21f4f64703d5ee186f9c692b276e6135caffd45e21c9a119?s=80&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://0.gravatar.com/avatar/f18a4e8fb849db3a21f4f64703d5ee186f9c692b276e6135caffd45e21c9a119?s=120&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://0.gravatar.com/avatar/f18a4e8fb849db3a21f4f64703d5ee186f9c692b276e6135caffd45e21c9a119?s=160&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://www.techthrob.com/" class="url" rel="ugc external nofollow">Jonathan DePrizio</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1004"><time pubdate datetime="2012-04-08T06:46:32-07:00">
					April 8, 2012 at 06:46					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>I&#8217;m a bit curious as to why interleaving is the correct solution, rather than setting &#8211;preferred=node</p>
<p>Wouldn&#8217;t using &#8211;preferred=node still give you the intended benefit of NUMA, while eliminated the problem described in the article?</p>
<p>(I realize that your testing showed no performance degradation with interleaving, but I&#8217;m speaking hypothetically/theoretically).</p>
<p>Thanks for this research &#8211; it finally puts to rest a big &#8220;huh??&#8221; that I&#8217;ve been keeping in the back of my head!</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1004#respond" data-commentid="1004" data-postid="522" data-belowelement="comment-1004" data-respondelement="respond" data-replyto="Reply to Jonathan DePrizio" aria-label="Reply to Jonathan DePrizio">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor odd alt depth-2" id="li-comment-1006">
		<article id="comment-1006" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1006"><time pubdate datetime="2012-04-08T10:40:25-07:00">
					April 8, 2012 at 10:40					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Jonathan: Using preferred allocation wouldn&#8217;t help in this case because, since the total amount of memory being allocated is &#8220;most of the memory in the system&#8221; for a MySQL/InnoDB system, preferring any single node will surely run that node out of memory.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1006#respond" data-commentid="1006" data-postid="522" data-belowelement="comment-1006" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-1005">
		<article id="comment-1005" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='John P&#039;s avatar' src='https://2.gravatar.com/avatar/278e09d0432e2b02dc722df61f525a4ac8a9e197b122eaff39d47505130794a2?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/278e09d0432e2b02dc722df61f525a4ac8a9e197b122eaff39d47505130794a2?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/278e09d0432e2b02dc722df61f525a4ac8a9e197b122eaff39d47505130794a2?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/278e09d0432e2b02dc722df61f525a4ac8a9e197b122eaff39d47505130794a2?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/278e09d0432e2b02dc722df61f525a4ac8a9e197b122eaff39d47505130794a2?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/278e09d0432e2b02dc722df61f525a4ac8a9e197b122eaff39d47505130794a2?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">John P</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1005"><time pubdate datetime="2012-04-08T10:26:09-07:00">
					April 8, 2012 at 10:26					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Really great article. Do you have any recommendations on articles, tutorials or books (prefer any of those 3 to a newsgroup/mailing list) to understand more about linux memory management?</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1005#respond" data-commentid="1005" data-postid="522" data-belowelement="comment-1005" data-respondelement="respond" data-replyto="Reply to John P" aria-label="Reply to John P">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor odd alt depth-2" id="li-comment-1007">
		<article id="comment-1007" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1007"><time pubdate datetime="2012-04-08T10:44:08-07:00">
					April 8, 2012 at 10:44					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>John: The closest thing I could recommend is:</p>
<div class="embed-amazon"><iframe title="Understanding the Linux Kernel: From I/O Ports to Process Management" type="text/html" width="525" height="550" frameborder="0" allowfullscreen style="max-width:100%" src="https://read.amazon.com/kp/card?preview=inline&#038;linkCode=kpd&#038;ref_=k4w_oembed_HWDe5Ew3xTk10W&#038;asin=0596005652&#038;tag=kpembed-20"></iframe></div>
<p>This book is quite outdated (Published November 2005) but it is largely still relevant, and does a very good job of explaining the different subsystems, their purposes, and their interactions. As far as I remember, it doesn&#8217;t actually touch on NUMA at all (since it was not really relevant to most systems back in 2005).</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1007#respond" data-commentid="1007" data-postid="522" data-belowelement="comment-1007" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment even depth-3" id="li-comment-1017">
		<article id="comment-1017" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Andreas Paul (@xorpaul)&#039;s avatar' src='https://i0.wp.com/a0.twimg.com/profile_images/1302329893/laptop_normal.png?resize=40%2C40&#038;ssl=1' srcset='https://i0.wp.com/a0.twimg.com/profile_images/1302329893/laptop_normal.png?resize=40%2C40&#038;ssl=1 1x, https://i0.wp.com/a0.twimg.com/profile_images/1302329893/laptop_normal.png?resize=60%2C60&#038;ssl=1 1.5x, https://i0.wp.com/a0.twimg.com/profile_images/1302329893/laptop_normal.png?resize=80%2C80&#038;ssl=1 2x, https://i0.wp.com/a0.twimg.com/profile_images/1302329893/laptop_normal.png?resize=120%2C120&#038;ssl=1 3x, https://i0.wp.com/a0.twimg.com/profile_images/1302329893/laptop_normal.png?resize=160%2C160&#038;ssl=1 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://twitter.com/xorpaul" class="url" rel="ugc external nofollow">Andreas Paul (@xorpaul)</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1017"><time pubdate datetime="2012-04-12T11:03:03-07:00">
					April 12, 2012 at 11:03					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>It does touch briefly on NUMA at the beginning of the Memory Management chapter (pages 297 and 298).<br />
I think that it has been added in the 3rd edition, so that&#8217;s maybe why you don&#8217;t remember it.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="comment odd alt thread-even depth-1" id="li-comment-1008">
		<article id="comment-1008" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='James&#039;s avatar' src='https://1.gravatar.com/avatar/a4861aa4e4fab579ec95d1e8145788cae3424138706051cc81543370218ae60b?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/a4861aa4e4fab579ec95d1e8145788cae3424138706051cc81543370218ae60b?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/a4861aa4e4fab579ec95d1e8145788cae3424138706051cc81543370218ae60b?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/a4861aa4e4fab579ec95d1e8145788cae3424138706051cc81543370218ae60b?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/a4861aa4e4fab579ec95d1e8145788cae3424138706051cc81543370218ae60b?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/a4861aa4e4fab579ec95d1e8145788cae3424138706051cc81543370218ae60b?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">James</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1008"><time pubdate datetime="2012-04-08T20:49:13-07:00">
					April 8, 2012 at 20:49					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>This was a great article. Thanks for the read&#8230; I noticed that the &#8220;cpu#&#8221; seems to spread across all physical cpu&#8217;s, and then loop back again. Can anyone explain why ?<br />
Example:<br />
[root@iron ~]# numactl &#8211;hardware<br />
available: 4 nodes (0-3)<br />
node 0 cpus: 0 1 2 3 4 5 24 25 26 27 28 29<br />
node 0 size: 16374 MB<br />
node 0 free: 14968 MB<br />
node 1 cpus: 6 7 8 9 10 11 30 31 32 33 34 35<br />
node 1 size: 16384 MB<br />
node 1 free: 15809 MB<br />
node 2 cpus: 12 13 14 15 16 17 36 37 38 39 40 41<br />
node 2 size: 16384 MB<br />
node 2 free: 15678 MB<br />
node 3 cpus: 18 19 20 21 22 23 42 43 44 45 46 47<br />
node 3 size: 16384 MB<br />
node 3 free: 15903 MB<br />
node distances:<br />
node   0   1   2   3<br />
  0:  10  21  21  21<br />
  1:  21  10  21  21<br />
  2:  21  21  10  21<br />
  3:  21  21  21  10<br />
[root@iron ~]#</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1008#respond" data-commentid="1008" data-postid="522" data-belowelement="comment-1008" data-respondelement="respond" data-replyto="Reply to James" aria-label="Reply to James">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor even depth-2" id="li-comment-1009">
		<article id="comment-1009" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1009"><time pubdate datetime="2012-04-08T22:23:21-07:00">
					April 8, 2012 at 22:23					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>James: I assume that&#8217;s a quad-cpu hex-core machines with hyperthreading enabled? This is really just a matter of how the physical CPUs and hyperthreaded CPUs are enumerated. On one sample machine (dual-cpu, hex-core, hyperthreading) I see:</p>
<p>node0: 0,2,4,6,8,10,12,14,16,18,20,22<br />
node1: 1,3,5,7,9,11,13,15,17,19,21,23</p>
<p>I think this is largely a combination of the kernel code that enumerates CPUs, and the hardware itself.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1009#respond" data-commentid="1009" data-postid="522" data-belowelement="comment-1009" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1010">
		<article id="comment-1010" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='ziwyz&#039;s avatar' src='https://0.gravatar.com/avatar/f32c6955b10fe49504873251537ee4f78f06d082501e3bb029ab17c917be6ec5?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://0.gravatar.com/avatar/f32c6955b10fe49504873251537ee4f78f06d082501e3bb029ab17c917be6ec5?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://0.gravatar.com/avatar/f32c6955b10fe49504873251537ee4f78f06d082501e3bb029ab17c917be6ec5?s=60&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://0.gravatar.com/avatar/f32c6955b10fe49504873251537ee4f78f06d082501e3bb029ab17c917be6ec5?s=80&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://0.gravatar.com/avatar/f32c6955b10fe49504873251537ee4f78f06d082501e3bb029ab17c917be6ec5?s=120&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://0.gravatar.com/avatar/f32c6955b10fe49504873251537ee4f78f06d082501e3bb029ab17c917be6ec5?s=160&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">ziwyz</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1010"><time pubdate datetime="2012-04-09T02:12:33-07:00">
					April 9, 2012 at 02:12					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Very informative article!</p>
<p>Does this also apply to high-memory VMs running on top of NUMA boxes?</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1010#respond" data-commentid="1010" data-postid="522" data-belowelement="comment-1010" data-respondelement="respond" data-replyto="Reply to ziwyz" aria-label="Reply to ziwyz">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor even depth-2" id="li-comment-1011">
		<article id="comment-1011" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1011"><time pubdate datetime="2012-04-09T08:16:46-07:00">
					April 9, 2012 at 08:16					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Good question. I&#8217;d guess it primarily applies to the host OS side of that equation, but I honestly don&#8217;t know what the interplay is between NUMA and the virtualization stuff.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1011#respond" data-commentid="1011" data-postid="522" data-belowelement="comment-1011" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://tech.krantenkoppen.org/2012/04/stuff-the-internet-says-on-scalability-for-april-13-2012/" class="url" rel="ugc external nofollow">Stuff The Internet Says On Scalability For April 13, 2012 | Krantenkoppen Tech</a></p>

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-even depth-1" id="li-comment-1019">
		<article id="comment-1019" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Tim Vaillancourt&#039;s avatar' src='https://2.gravatar.com/avatar/51289ac97710702b5a9bebebc5f8f25b42e76e059af0057f10ff51cc0e4a20a7?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/51289ac97710702b5a9bebebc5f8f25b42e76e059af0057f10ff51cc0e4a20a7?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/51289ac97710702b5a9bebebc5f8f25b42e76e059af0057f10ff51cc0e4a20a7?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/51289ac97710702b5a9bebebc5f8f25b42e76e059af0057f10ff51cc0e4a20a7?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/51289ac97710702b5a9bebebc5f8f25b42e76e059af0057f10ff51cc0e4a20a7?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/51289ac97710702b5a9bebebc5f8f25b42e76e059af0057f10ff51cc0e4a20a7?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://timvaillancourt.com" class="url" rel="ugc external nofollow">Tim Vaillancourt</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1019"><time pubdate datetime="2012-04-13T17:17:52-07:00">
					April 13, 2012 at 17:17					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>This explains a lot of oddness I&#8217;ve experienced. I am interested to see how this will be solved by the MySQL community. I agree that using libnuma is likely a good long-term approach.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1019#respond" data-commentid="1019" data-postid="522" data-belowelement="comment-1019" data-respondelement="respond" data-replyto="Reply to Tim Vaillancourt" aria-label="Reply to Tim Vaillancourt">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-1020">
		<article id="comment-1020" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Istvan (@lix)&#039;s avatar' src='https://i0.wp.com/a0.twimg.com/profile_images/40120842/gp_08_normal.jpg?resize=40%2C40&#038;ssl=1' srcset='https://i0.wp.com/a0.twimg.com/profile_images/40120842/gp_08_normal.jpg?resize=40%2C40&#038;ssl=1 1x, https://i0.wp.com/a0.twimg.com/profile_images/40120842/gp_08_normal.jpg?resize=60%2C60&#038;ssl=1 1.5x, https://i0.wp.com/a0.twimg.com/profile_images/40120842/gp_08_normal.jpg?resize=80%2C80&#038;ssl=1 2x, https://i0.wp.com/a0.twimg.com/profile_images/40120842/gp_08_normal.jpg?resize=120%2C120&#038;ssl=1 3x, https://i0.wp.com/a0.twimg.com/profile_images/40120842/gp_08_normal.jpg?resize=160%2C160&#038;ssl=1 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://twitter.com/lix" class="url" rel="ugc external nofollow">Istvan (@lix)</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1020"><time pubdate datetime="2012-04-13T18:56:51-07:00">
					April 13, 2012 at 18:56					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>This is why users moved over to Postgres or another SQL server. :)</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1020#respond" data-commentid="1020" data-postid="522" data-belowelement="comment-1020" data-respondelement="respond" data-replyto="Reply to Istvan (@lix)" aria-label="Reply to Istvan (@lix)">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor odd alt depth-2" id="li-comment-1021">
		<article id="comment-1021" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1021"><time pubdate datetime="2012-04-13T19:59:38-07:00">
					April 13, 2012 at 19:59					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Istvan: Hah. Re-read the article, since you clearly skipped over it in your fervor to post something anti-MySQL, and you will notice that it is not really MySQL specific.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1021#respond" data-commentid="1021" data-postid="522" data-belowelement="comment-1021" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://blog.jcole.us/2012/04/16/a-brief-update-on-numa-and-mysql/" class="url" rel="ugc">A brief update on NUMA and MySQL &laquo; Jeremy Cole</a></p>

	</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-1043">
		<article id="comment-1043" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='atifali&#039;s avatar' src='https://2.gravatar.com/avatar/8cd4d03cd92372dc264fa8ad5e59f8e0d65e74831a479ab15ae589f99c59a883?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/8cd4d03cd92372dc264fa8ad5e59f8e0d65e74831a479ab15ae589f99c59a883?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/8cd4d03cd92372dc264fa8ad5e59f8e0d65e74831a479ab15ae589f99c59a883?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/8cd4d03cd92372dc264fa8ad5e59f8e0d65e74831a479ab15ae589f99c59a883?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/8cd4d03cd92372dc264fa8ad5e59f8e0d65e74831a479ab15ae589f99c59a883?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/8cd4d03cd92372dc264fa8ad5e59f8e0d65e74831a479ab15ae589f99c59a883?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">atifali</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1043"><time pubdate datetime="2012-04-16T20:03:01-07:00">
					April 16, 2012 at 20:03					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Is this relevant if the memory allocated to mysql is less than even the total of 1 node in NUMA .<br />
For example,  if i have 2 socket , system with 32 GB memory .<br />
and the total memory allocated to mysql is just 8GB .</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1043#respond" data-commentid="1043" data-postid="522" data-belowelement="comment-1043" data-respondelement="respond" data-replyto="Reply to atifali" aria-label="Reply to atifali">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1184">
		<article id="comment-1184" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='bristolito&#039;s avatar' src='https://1.gravatar.com/avatar/1472fb4793a00c32d600b2e732a1b9df445398596b6e74f3bb521ff811a5ca8e?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/1472fb4793a00c32d600b2e732a1b9df445398596b6e74f3bb521ff811a5ca8e?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/1472fb4793a00c32d600b2e732a1b9df445398596b6e74f3bb521ff811a5ca8e?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/1472fb4793a00c32d600b2e732a1b9df445398596b6e74f3bb521ff811a5ca8e?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/1472fb4793a00c32d600b2e732a1b9df445398596b6e74f3bb521ff811a5ca8e?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/1472fb4793a00c32d600b2e732a1b9df445398596b6e74f3bb521ff811a5ca8e?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">bristolito</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1184"><time pubdate datetime="2012-04-25T12:35:52-07:00">
					April 25, 2012 at 12:35					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Hi Jeremy,<br />
very interesting post, thanks for sharing!<br />
We are experiencing most of the symptoms you describe here. We have an IBM x3650 server which is supposed to be a 2 quad core processor and 4 memory slots (16 Gb). But this is what I get when I run numactl &#8211;hardware:<br />
available: 1 nodes (0)<br />
node 0 cpus: 0 1 2 3 4 5 6 7<br />
node 0 size: 16383 MB<br />
node 0 free: 195 MB<br />
node distances:<br />
node   0<br />
  0:  10 </p>
<p>Why do I see only 1 node as if it was a UMA/SMP architecture? And if it was really a UMA/SMP architecture, why do you think I could be experiencing the same symptoms you describe here? i.e swapping memory with still a lot of memory available making mysql to have random delays in random queries.<br />
Thanks in advance.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1184#respond" data-commentid="1184" data-postid="522" data-belowelement="comment-1184" data-respondelement="respond" data-replyto="Reply to bristolito" aria-label="Reply to bristolito">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jeremycole bypostauthor even depth-2" id="li-comment-1189">
		<article id="comment-1189" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Jeremy Cole&#039;s avatar' src='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/d3e8bfdf72f9876b7af8905bc5b7c389664d95321c813348000cf279d4f16319?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://jcole.us/" class="url" rel="ugc external nofollow">Jeremy Cole</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1189"><time pubdate datetime="2012-04-26T12:29:57-07:00">
					April 26, 2012 at 12:29					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Bristolito: It looks like that system is either UMA (older generation) or may have NUMA &#8220;disabled&#8221; in the BIOS. In that case you should not see degradations related to the above, but could see swapping/degradation for other reasons.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1189#respond" data-commentid="1189" data-postid="522" data-belowelement="comment-1189" data-respondelement="respond" data-replyto="Reply to Jeremy Cole" aria-label="Reply to Jeremy Cole">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://diaspora.gen.nz:443/~rodgerd/archives/1419-The-Wierdness-of-Hardware,-or-Why-the-Whole-Stack-Matters.html" class="url" rel="ugc external nofollow">CleverBlogName</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://blog.wl0.org/2012/09/checking-procnuma_maps-can-be-dangerous-for-mysql-client-connections/" class="url" rel="ugc external nofollow">Checking /proc//numa_maps can be dangerous for mysql client connections | Simon J Mudd&#039;s Blog</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://blog.yannickjaquier.com/hpux/non-uniform-memory-access-numa-architecture-with-oracle-database-by-examples.html" class="url" rel="ugc external nofollow">Non-Uniform Memory Access (NUMA) architecture with Oracle database by examples | IT World</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://jaseywang.me/2012/10/21/numa-%e5%9c%a8-db-%e4%b8%8a%e7%9a%84%e4%b8%80%e4%ba%9b%e9%97%ae%e9%a2%98/" class="url" rel="ugc external nofollow">NUMA åœ¨ DB ä¸Šçš„ä¸€äº›é—®é¢˜ | Jasey Wang</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://huoding.com/2012/11/08/198" class="url" rel="ugc external nofollow">SWAPçš„ç½ªä¸Žç½š | ç«ä¸ç¬”è®°</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://mysqldump.azundris.com/archives/106-Dude,-where-is-my-memory.html" class="url" rel="ugc external nofollow">MySQL-dump</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://blog.koehntopp.de/archives/3301-Dude,-where-is-my-memory.html" class="url" rel="ugc external nofollow">Die wunderbare Welt von Isotopp</a></p>

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-even depth-1" id="li-comment-1816">
		<article id="comment-1816" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Zhang&#039;s avatar' src='https://2.gravatar.com/avatar/b33676405f10d4d0f34b97b7175fed10cbd4d9219628bff365aff12b8bb6b903?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/b33676405f10d4d0f34b97b7175fed10cbd4d9219628bff365aff12b8bb6b903?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/b33676405f10d4d0f34b97b7175fed10cbd4d9219628bff365aff12b8bb6b903?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/b33676405f10d4d0f34b97b7175fed10cbd4d9219628bff365aff12b8bb6b903?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/b33676405f10d4d0f34b97b7175fed10cbd4d9219628bff365aff12b8bb6b903?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/b33676405f10d4d0f34b97b7175fed10cbd4d9219628bff365aff12b8bb6b903?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Zhang</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1816"><time pubdate datetime="2012-12-13T06:26:02-08:00">
					December 13, 2012 at 06:26					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>So if I have 2 physical sockets (6 cores each), 96 GB memory total and want to run 2 database servers on it. Does it make scenes to let each MySQL server run on it&#8217;s own node?<br />
e.g.<br />
numactl &#8211;membind=0 &#8211;cpunodebind=0 $mysql_cmd_for_srv_1<br />
numactl &#8211;membind=1 &#8211;cpunodebind=1 $mysql_cmd_for_srv_2</p>
<p>Each server has exact same configuration except file locations</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1816#respond" data-commentid="1816" data-postid="522" data-belowelement="comment-1816" data-respondelement="respond" data-replyto="Reply to Zhang" aria-label="Reply to Zhang">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-1836">
		<article id="comment-1836" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Chris Jones&#039;s avatar' src='https://0.gravatar.com/avatar/cbb1966708972f59cc9396a0d57f078bd243a4ae9022d48d4f6f892458483fb1?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://0.gravatar.com/avatar/cbb1966708972f59cc9396a0d57f078bd243a4ae9022d48d4f6f892458483fb1?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://0.gravatar.com/avatar/cbb1966708972f59cc9396a0d57f078bd243a4ae9022d48d4f6f892458483fb1?s=60&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://0.gravatar.com/avatar/cbb1966708972f59cc9396a0d57f078bd243a4ae9022d48d4f6f892458483fb1?s=80&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://0.gravatar.com/avatar/cbb1966708972f59cc9396a0d57f078bd243a4ae9022d48d4f6f892458483fb1?s=120&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://0.gravatar.com/avatar/cbb1966708972f59cc9396a0d57f078bd243a4ae9022d48d4f6f892458483fb1?s=160&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Chris Jones</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-1836"><time pubdate datetime="2013-01-04T05:38:13-08:00">
					January 4, 2013 at 05:38					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Hi Jeremy,</p>
<p>Might be a very dumb question, but does the value of innodb_buffer_pool_instances have any impact on the &#8211;interleaved option? Would multiple buffer pools per node actually achieve the same effect, by making MySQL spread its memory demands more evenly in the first place? Or is it irrelevant in this discussion?</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=1836#respond" data-commentid="1836" data-postid="522" data-belowelement="comment-1836" data-respondelement="respond" data-replyto="Reply to Chris Jones" aria-label="Reply to Chris Jones">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">

	<li class="comment byuser comment-author-jaeheung odd alt depth-2" id="li-comment-19169">
		<article id="comment-19169" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='jaeheung&#039;s avatar' src='https://1.gravatar.com/avatar/4b3a10dacccb933801510b9f4e190dcfa3b49d7af63809440324d58ed331d261?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/4b3a10dacccb933801510b9f4e190dcfa3b49d7af63809440324d58ed331d261?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/4b3a10dacccb933801510b9f4e190dcfa3b49d7af63809440324d58ed331d261?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/4b3a10dacccb933801510b9f4e190dcfa3b49d7af63809440324d58ed331d261?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/4b3a10dacccb933801510b9f4e190dcfa3b49d7af63809440324d58ed331d261?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/4b3a10dacccb933801510b9f4e190dcfa3b49d7af63809440324d58ed331d261?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">jaeheung</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-19169"><time pubdate datetime="2014-08-25T16:40:04-07:00">
					August 25, 2014 at 16:40					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>I had the same thought and tested with innodb_buffer_pool_instances=8, which is the default in MySQL 5.6 or later(I tested in MySQL 5.5 though), and confirmed that it achieves the same effect exactly as you wrote. I also expected some performance increase thanks to the reduced contention and the all-local node memory access. But I didnâ€™t see any apparent difference in performance. Not sure why.<br />
Anyway, the users of MySQL 5.6 or later version might not understand what weâ€™re talking about. :-)<br />
BTW, innodb_buffer_pool_instances is a relatively new MySQL configuration parameter (introduced in 5.5), and the authorâ€™s solution was probably the only solution when he was investigating the issue. Still an excellent article. Thank you.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=19169#respond" data-commentid="19169" data-postid="522" data-belowelement="comment-19169" data-respondelement="respond" data-replyto="Reply to jaeheung" aria-label="Reply to jaeheung">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://serge.frezefond.com/2013/03/planet-mysql-has-a-long-history/" class="url" rel="ugc external nofollow">Planet MySQL has a long history &#8230; &laquo; Serge Frezefond &#039;s blog</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://blog.chunshengster.me/2013/03/how_mysql_donot_use_swap.html" class="url" rel="ugc external nofollow">MySQLå¦‚ä½•é¿å…ä½¿ç”¨swap[copy] | é¦™è‰çš„æŠ€æœ¯åšå®¢</a></p>

	</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-2278">
		<article id="comment-2278" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Adam Scott&#039;s avatar' src='https://0.gravatar.com/avatar/09c551ea98e345a75d8d28e3faa850680ecdfb11bc0201ba443b6ac5ec2ad4c5?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://0.gravatar.com/avatar/09c551ea98e345a75d8d28e3faa850680ecdfb11bc0201ba443b6ac5ec2ad4c5?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://0.gravatar.com/avatar/09c551ea98e345a75d8d28e3faa850680ecdfb11bc0201ba443b6ac5ec2ad4c5?s=60&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://0.gravatar.com/avatar/09c551ea98e345a75d8d28e3faa850680ecdfb11bc0201ba443b6ac5ec2ad4c5?s=80&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://0.gravatar.com/avatar/09c551ea98e345a75d8d28e3faa850680ecdfb11bc0201ba443b6ac5ec2ad4c5?s=120&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://0.gravatar.com/avatar/09c551ea98e345a75d8d28e3faa850680ecdfb11bc0201ba443b6ac5ec2ad4c5?s=160&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Adam Scott</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-2278"><time pubdate datetime="2013-04-12T14:08:14-07:00">
					April 12, 2013 at 14:08					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Thank you Jeremy.  Very helpful with great explanations!</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=2278#respond" data-commentid="2278" data-postid="522" data-belowelement="comment-2278" data-respondelement="respond" data-replyto="Reply to Adam Scott" aria-label="Reply to Adam Scott">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.mysqlperformanceblog.com/2013/04/19/swap-insanity-tome-iii-the-write-cache/" class="url" rel="ugc external nofollow">The write cache: Swap insanity tome III</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://anandjeyahar.com/2013/10/10/numa-linux-tuning-this-is-humbling-level-of-complexity/" class="url" rel="ugc external nofollow">NUMA- linux tuning &#8212; this is humbling level of complexity | traversals of a schizoverted mind</a></p>

	</li><!-- #comment-## -->

	<li class="comment byuser comment-author-anandjeyahar odd alt thread-odd thread-alt depth-1" id="li-comment-3119">
		<article id="comment-3119" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Software Mechanic&#039;s avatar' src='https://1.gravatar.com/avatar/13f3840be368fc94137ec9d9df0fb5c2c812a75f864d6bd6da0cdb25052757ce?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/13f3840be368fc94137ec9d9df0fb5c2c812a75f864d6bd6da0cdb25052757ce?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/13f3840be368fc94137ec9d9df0fb5c2c812a75f864d6bd6da0cdb25052757ce?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/13f3840be368fc94137ec9d9df0fb5c2c812a75f864d6bd6da0cdb25052757ce?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/13f3840be368fc94137ec9d9df0fb5c2c812a75f864d6bd6da0cdb25052757ce?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/13f3840be368fc94137ec9d9df0fb5c2c812a75f864d6bd6da0cdb25052757ce?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Anand Jeyahar</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-3119"><time pubdate datetime="2013-10-09T23:35:36-07:00">
					October 9, 2013 at 23:35					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Reblogged this on <a href="http://anandjeyahar.com/2013/10/10/the-mysql-swap-insanity-problem-and-the-effects-of-the-numa-architecture/" rel="nofollow">traversals of a schizoverted mind</a>.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=3119#respond" data-commentid="3119" data-postid="522" data-belowelement="comment-3119" data-respondelement="respond" data-replyto="Reply to Anand Jeyahar" aria-label="Reply to Anand Jeyahar">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.geekbase.in.th/linux-memory-management/" class="url" rel="ugc external nofollow">Linux Memory Management - Geek Base</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.mysqlperformanceblog.com/2013/12/07/linux-performance-tuning-tips-mysql/" class="url" rel="ugc external nofollow">Linux performance tuning tips for MySQL</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://mdba.cn/?p=244" class="url" rel="ugc external nofollow">é’ˆå¯¹MySQLçš„Linuxæ€§èƒ½è°ƒä¼˜æŠ€å·§[ç¿»è¯‘] | DBAçš„ç½—æµ®å®«</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://dom.as/2014/01/17/on-swapping-and-kernels/" class="url" rel="ugc external nofollow">on swapping and kernels | domas mituzas</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://mjava.org/1686.shtml" class="url" rel="ugc external nofollow">Linuxå†…å­˜ç®¡ç†ä¼˜åŒ–:ä½Žå»¶è¿Ÿå’Œé«˜åžåé‡çš„æ•°æ®åº“GraphDB - è¿‡ç¨‹&amp;å®žè·µ - Barnettâ€˜s Blog</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.innomysql.net/article/1941.html" class="url" rel="ugc external nofollow">Notes on the storage stack | InsideMySQL</a></p>

	</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-16870">
		<article id="comment-16870" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Stewart Smith&#039;s avatar' src='https://2.gravatar.com/avatar/e7ff360fd6c0bf03382fd6ff1fe7442c44fe716e2918a60de1c3831106dfc815?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/e7ff360fd6c0bf03382fd6ff1fe7442c44fe716e2918a60de1c3831106dfc815?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/e7ff360fd6c0bf03382fd6ff1fe7442c44fe716e2918a60de1c3831106dfc815?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/e7ff360fd6c0bf03382fd6ff1fe7442c44fe716e2918a60de1c3831106dfc815?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/e7ff360fd6c0bf03382fd6ff1fe7442c44fe716e2918a60de1c3831106dfc815?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/e7ff360fd6c0bf03382fd6ff1fe7442c44fe716e2918a60de1c3831106dfc815?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="https://www.flamingspork.com/blog/" class="url" rel="ugc external nofollow">Stewart Smith</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-16870"><time pubdate datetime="2014-06-03T18:44:07-07:00">
					June 3, 2014 at 18:44					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>I have a patch that may help even further, posted on <a href="http://bugs.mysql.com/bug.php?id=72811" rel="nofollow ugc">http://bugs.mysql.com/bug.php?id=72811</a></p>
<p>Basically, it sets NUMA policy inside mysqld to interleave for all memory allocation performed before we start accepting connections (i.e. buffer pool, key cache etc) and then sets policy back to default.</p>
<p>the idea being that since a mysql connection runs in a single thread, all memory it allocates will be for processing that connection/query and so it may as well be node local to where the thread is scheduled to run.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=16870#respond" data-commentid="16870" data-postid="522" data-belowelement="comment-16870" data-respondelement="respond" data-replyto="Reply to Stewart Smith" aria-label="Reply to Stewart Smith">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-18705">
		<article id="comment-18705" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Tatsuo Natsukawa&#039;s avatar' src='https://1.gravatar.com/avatar/a380fe444fb5b4734a99bf3549968751b17c63abe4a9d4bfa071f9cd9e27998f?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://1.gravatar.com/avatar/a380fe444fb5b4734a99bf3549968751b17c63abe4a9d4bfa071f9cd9e27998f?s=40&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://1.gravatar.com/avatar/a380fe444fb5b4734a99bf3549968751b17c63abe4a9d4bfa071f9cd9e27998f?s=60&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://1.gravatar.com/avatar/a380fe444fb5b4734a99bf3549968751b17c63abe4a9d4bfa071f9cd9e27998f?s=80&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://1.gravatar.com/avatar/a380fe444fb5b4734a99bf3549968751b17c63abe4a9d4bfa071f9cd9e27998f?s=120&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://1.gravatar.com/avatar/a380fe444fb5b4734a99bf3549968751b17c63abe4a9d4bfa071f9cd9e27998f?s=160&#038;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Tatsuo Natsukawa</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-18705"><time pubdate datetime="2014-08-12T10:18:36-07:00">
					August 12, 2014 at 10:18					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Great article. In addition to the imbalance in memory allocation among numa nodes, my concern had been memory fragmentation. Your suggestion works well:</p>
<p><a href="https://drive.google.com/file/d/0B4HH7pZxARz8MW0xNi1PVEJPc0k/edit?usp=sharing" rel="nofollow ugc">https://drive.google.com/file/d/0B4HH7pZxARz8MW0xNi1PVEJPc0k/edit?usp=sharing</a></p>
<p>Thank you!</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=18705#respond" data-commentid="18705" data-postid="522" data-belowelement="comment-18705" data-respondelement="respond" data-replyto="Reply to Tatsuo Natsukawa" aria-label="Reply to Tatsuo Natsukawa">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-18923">
		<article id="comment-18923" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='carloprad&#039;s avatar' src='https://2.gravatar.com/avatar/280c788ba651914539bd7f89de867a8e2d95c37eed2ee47dd849982bebcc0063?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/280c788ba651914539bd7f89de867a8e2d95c37eed2ee47dd849982bebcc0063?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/280c788ba651914539bd7f89de867a8e2d95c37eed2ee47dd849982bebcc0063?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/280c788ba651914539bd7f89de867a8e2d95c37eed2ee47dd849982bebcc0063?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/280c788ba651914539bd7f89de867a8e2d95c37eed2ee47dd849982bebcc0063?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/280c788ba651914539bd7f89de867a8e2d95c37eed2ee47dd849982bebcc0063?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://carloprad.blogspot.it" class="url" rel="ugc external nofollow">carloprad</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-18923"><time pubdate datetime="2014-08-19T03:03:28-07:00">
					August 19, 2014 at 03:03					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>This is a MUST read article, thanks for sharing!</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=18923#respond" data-commentid="18923" data-postid="522" data-belowelement="comment-18923" data-respondelement="respond" data-replyto="Reply to carloprad" aria-label="Reply to carloprad">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.scalemysql.com/blog/2014/09/05/numa-system-performance-issues-more-than-just-swapping-to-consider/" class="url" rel="ugc external nofollow">Numa system performance issues &#8211; more than just swapping to consider | Scalemysql</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://zhechen.me/mysql-5-6%e5%8f%82%e6%95%b0%e8%af%b4%e6%98%8e/" class="url" rel="ugc external nofollow">MySQL 5.6å‚æ•°è¯´æ˜Ž | cz</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://zhechen.me/mysql-numa%e4%ba%a4%e5%8f%89%e6%a8%a1%e5%bc%8f%e5%90%af%e5%8a%a8%e8%af%b4%e6%98%8e/" class="url" rel="ugc external nofollow">MySQL numaäº¤å‰æ¨¡å¼å¯åŠ¨è¯´æ˜Ž | cz</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://thecybershow.wordpress.com/2015/03/03/mysql-and-numa/" class="url" rel="ugc external nofollow">MySQL and NUMA | Tater&#039;s Tech Blog</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://www.flamingspork.com/blog/2015/07/08/the-sad-state-of-mysql-and-numa/" class="url" rel="ugc external nofollow">The sad state of MySQL and NUMA | Ramblings</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://aurisju.wordpress.com/2015/07/11/hello-world/" class="url" rel="ugc external nofollow">Multiplatform NUMA-aware software | aurisju</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://xdhyix.wordpress.com/2015/07/20/numa-swap-insanity-mysql/" class="url" rel="ugc external nofollow">NUMA, swap insanity, MySQL | xdhyix</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://mysqllover.com/?p=1504" class="url" rel="ugc external nofollow">MySQL5.7.26 Release Noteè§£è¯»ï¼ˆinnodbåŠå¤åˆ¶æ¨¡å—ï¼‰ | Simple Life</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://kanazawa.1kapp.com/?p=63" class="url" rel="ugc external nofollow">SWAPå­˜äº¡ä¹‹é“ &#8211; é‡‘æ³½çš„æ¨±èŠ±ç«™</a></p>

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-28035">
		<article id="comment-28035" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='tux&#039;s avatar' src='https://0.gravatar.com/avatar/64b553c4d13bc0154b787991e8ec7b197aa59b9808d2df4d181d9655643f5325?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://0.gravatar.com/avatar/64b553c4d13bc0154b787991e8ec7b197aa59b9808d2df4d181d9655643f5325?s=40&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://0.gravatar.com/avatar/64b553c4d13bc0154b787991e8ec7b197aa59b9808d2df4d181d9655643f5325?s=60&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://0.gravatar.com/avatar/64b553c4d13bc0154b787991e8ec7b197aa59b9808d2df4d181d9655643f5325?s=80&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://0.gravatar.com/avatar/64b553c4d13bc0154b787991e8ec7b197aa59b9808d2df4d181d9655643f5325?s=120&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://0.gravatar.com/avatar/64b553c4d13bc0154b787991e8ec7b197aa59b9808d2df4d181d9655643f5325?s=160&#038;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">tux</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-28035"><time pubdate datetime="2016-02-08T20:12:21-08:00">
					February 8, 2016 at 20:12					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>I am seeing following error in MySQL Cluster Data Node, do you think this is because of NUMA?</p>
<p>2016-02-08 16:41:53 [ndbd] INFO     &#8212; Watchdog: User time: 114  System time: 1156<br />
2016-02-08 16:41:53 [ndbd] WARNING  &#8212; Ndb kernel thread 0 is stuck in: Job Handling elapsed=14928<br />
2016-02-08 16:41:53 [ndbd] INFO     &#8212; Watchdog: User time: 114  System time: 1156<br />
2016-02-08 16:41:53 [ndbd] WARNING  &#8212; Ndb kernel thread 0 is stuck in: Job Handling elapsed=15028</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=28035#respond" data-commentid="28035" data-postid="522" data-belowelement="comment-28035" data-respondelement="respond" data-replyto="Reply to tux" aria-label="Reply to tux">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.raintoo.cn/?p=24" class="url" rel="ugc external nofollow">NUMAä½“ç³»ç»“æž„ &#8211; æ¶¦åœŸ-ç”¨æŠ€æœ¯ä¸Žä¸–ç•Œäº¤æµ</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://blog.sptty.com/2016/05/31/%e8%bd%acmysql%e5%86%85%e5%ad%98%e6%b6%88%e8%80%97%e8%bf%87%e9%ab%98%e9%97%ae%e9%a2%98%e5%a4%84%e7%90%86.html" class="url" rel="ugc external nofollow">mysql,å†…å­˜è¿‡é«˜,æŽ’æŸ¥ | sptty&#039;blog</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.luckerworks.com/archives/15628" class="url" rel="ugc external nofollow">NUMA &#8212; æƒ³è¯´çˆ±ä½ ä¸å®¹æ˜“ | æ­ªå¸ƒITç¬”è®°</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.ywnds.com/?p=7249" class="url" rel="ugc external nofollow">MongoDB&amp;MySQLå¯¹äºŽNUMAæž¶æž„CPUçš„é—®é¢˜ &#8211; è¿ç»´é‚£ç‚¹äº‹</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://www.cronweekly.com/issue-60/" class="url" rel="ugc external nofollow">cron.weekly issue #60: Debian, Vim, Gitlab, Jenkins, Piwik, Nginx, MySQL &amp; more!</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://lars.ingebrigtsen.no/2012/04/08/linkblogging/" class="url" rel="ugc external nofollow">Linkblogging &#8211; Random Thoughts</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://blog-wajatmaka.rhcloud.com/2015/07/29/cpu-high-performance-innodb-mysql/" class="url" rel="ugc external nofollow">CPU High Performance, INNODB Mysql &#8211; Blog Ops</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://blog.wajatmaka.com/2015/07/29/cpu-high-performance-innodb-mysql/" class="url" rel="ugc external nofollow">CPU High Performance, INNODB Mysql &#8211; Blog Ops</a></p>

	</li><!-- #comment-## -->

	<li class="comment even thread-even depth-1" id="li-comment-31449">
		<article id="comment-31449" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='Terry.lu&#039;s avatar' src='https://2.gravatar.com/avatar/5b3ef77cc0d3cda51e8b4686e645b27d81f270b87e887f7f22f472ccba24fb51?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/5b3ef77cc0d3cda51e8b4686e645b27d81f270b87e887f7f22f472ccba24fb51?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/5b3ef77cc0d3cda51e8b4686e645b27d81f270b87e887f7f22f472ccba24fb51?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/5b3ef77cc0d3cda51e8b4686e645b27d81f270b87e887f7f22f472ccba24fb51?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/5b3ef77cc0d3cda51e8b4686e645b27d81f270b87e887f7f22f472ccba24fb51?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/5b3ef77cc0d3cda51e8b4686e645b27d81f270b87e887f7f22f472ccba24fb51?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn">Terry.lu</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-31449"><time pubdate datetime="2017-06-19T20:02:05-07:00">
					June 19, 2017 at 20:02					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Learn a lot from this blog. Thank you!</p>
<p>&#8220;Normally a tiny bit of swap usage could be OK (weâ€™re really concerned about activityâ€”swaps in and out), but in many cases, â€œrealâ€ useful memory is being swapped: primarily parts of InnoDBâ€™s buffer pool. &#8221;</p>
<p>I am quite curious about how do you know the memory swapped out is part of innodb buffer memory?</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=31449#respond" data-commentid="31449" data-postid="522" data-belowelement="comment-31449" data-respondelement="respond" data-replyto="Reply to Terry.lu" aria-label="Reply to Terry.lu">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://m.toplz.net/?p=952" class="url" rel="ugc external nofollow">SWAPçš„ç½ªä¸Žç½š &#8211; å¾€äº‹å¦‚çƒŸ</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://blog.pythian.com/mysql-swapping-with-fsync/" class="url" rel="ugc external nofollow">MySQL Swapping With Fsync | Official PythianÂ® Blog</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://servidor.bvserver.com/alta-cpu-en-el-server-mysql-fusion-io.html" class="url" rel="ugc external nofollow">Alta CPU en el server MySQL Fusion-io Servidor</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://lefred.be/content/mysql-and-memory-a-love-story-part-1/" class="url" rel="ugc external nofollow">MySQL and Memory: a love story (part 1) &#8211; lefred&#039;s blog: tribulations of a MySQL Evangelist</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://jtiyjg.000webhostapp.com/2019/04/high-cpu-on-mysql-fusion-io-server" class="url" rel="ugc external nofollow">High CPU on MySql Fusion-io server &#8211; jtiyjg</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://www.79ji.com/1249.html" class="url" rel="ugc external nofollow">è¶£è®°-SWAPçš„ç½ªä¸Žç½š</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://codingnote.cc/p/18590" class="url" rel="ugc external nofollow">NUMAæž¶æž„çš„CPU - ä½ çœŸçš„ç”¨å¥½äº†ä¹ˆï¼Ÿ - ç¨‹å¼ç­†è¨˜</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://coolshell.me/articles/399.html" class="url" rel="ugc external nofollow">2013å¹´ä¸ªäººå¾®åšæŽ¨èæŠ€æœ¯èµ„æ–™æ±‡æ€» | 3F Blog 2020</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://www.percona.com/blog/2020/04/17/mongodb-best-practices-2020-edition/" class="url" rel="ugc external nofollow">MongoDB Best Practices 2020 Edition - Percona Database Performance Blog</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://www.fixbbs.com/p/1030153.html" class="url" rel="ugc external nofollow">MySQL å’Œ swapping &#8211; FIXBBS</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://www.percona.com/blog/2020/11/03/adjusting-mysql-8-0-memory-parameters/" class="url" rel="ugc external nofollow">Adjusting MySQL 8.0 Memory Parameters - Percona Database Performance Blog</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://php.askforanswer.com/mysqlchaxunsuijizhihou.html" class="url" rel="ugc external nofollow">MySQLæŸ¥è¯¢éšæœºæ»žåŽ|phpé—®ç­”</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://qa.apthow.com/archives/3543" class="url" rel="ugc external nofollow">ë°ì´í„° ì´ë™ê¸°ê°€ìžˆëŠ” Linux I / O ë³‘ëª© í˜„ìƒ 16 %ì´ë©° ì¼ë°˜ì ìœ¼ë¡œ 30 % ì´ìƒìž…ë‹ˆë‹¤. - How IT</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="http://qa.apthow.com/archives/22597" class="url" rel="ugc external nofollow">MySQL ë³µì œ ì„±ëŠ¥ í–¥ìƒì‹œí‚¬ ìˆ˜ ìžˆìŠµë‹ˆê¹Œ? ë¨¸ì‹  BëŠ” - How IT</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://esmipc.com/ajuste-de-los-parametros-de-memoria-de-mysql-8-0/" class="url" rel="ugc external nofollow">Ajuste de los parÃ¡metros de memoria de MySQL 8.0 &#8211; Es mi PC</a></p>

	</li><!-- #comment-## -->

	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-54287">
		<article id="comment-54287" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='plantegg (@plantegg)&#039;s avatar' src='https://i0.wp.com/pbs.twimg.com/profile_images/587268563/twitterProfilePhoto_normal.jpg?resize=40%2C40&#038;ssl=1' srcset='https://i0.wp.com/pbs.twimg.com/profile_images/587268563/twitterProfilePhoto_normal.jpg?resize=40%2C40&#038;ssl=1 1x, https://i0.wp.com/pbs.twimg.com/profile_images/587268563/twitterProfilePhoto_normal.jpg?resize=60%2C60&#038;ssl=1 1.5x, https://i0.wp.com/pbs.twimg.com/profile_images/587268563/twitterProfilePhoto_normal.jpg?resize=80%2C80&#038;ssl=1 2x, https://i0.wp.com/pbs.twimg.com/profile_images/587268563/twitterProfilePhoto_normal.jpg?resize=120%2C120&#038;ssl=1 3x, https://i0.wp.com/pbs.twimg.com/profile_images/587268563/twitterProfilePhoto_normal.jpg?resize=160%2C160&#038;ssl=1 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://twitter.com/plantegg" class="url" rel="ugc external nofollow">plantegg (@plantegg)</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-54287"><time pubdate datetime="2022-03-07T18:56:04-08:00">
					March 7, 2022 at 18:56					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Normally if not have  local memory then use remote memory, this is a kernel bug cause used swap replace the remote memroy: <a href="https://github.com/torvalds/linux/commit/4f9b16a64753d0bb607454347036dc997fd03b82" rel="nofollow ugc">https://github.com/torvalds/linux/commit/4f9b16a64753d0bb607454347036dc997fd03b82</a></p>
<p>Now we should enable NUMA anyway.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=54287#respond" data-commentid="54287" data-postid="522" data-belowelement="comment-54287" data-respondelement="respond" data-replyto="Reply to plantegg (@plantegg)" aria-label="Reply to plantegg (@plantegg)">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://truyenhay.live/43793/resolved-mariadb-threads-optimalization/" class="url" rel="ugc external nofollow">Resolved: MariaDB threads optimalization - Resolved Problem</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://www.apthow.com/%ec%b6%a9%eb%b6%84%ed%95%9c-%ec%97%ac%ec%9c%a0-%eb%a9%94%eb%aa%a8%eb%a6%ac%ea%b0%80-%eb%82%a8%ec%95%84%ec%9e%88%ec%9d%84-%eb%95%8c-%ec%8a%a4%ec%99%91%ec%9d%b4-%ec%82%ac%ec%9a%a9" class="url" rel="ugc external nofollow">ì¶©ë¶„í•œ ì—¬ìœ  ë©”ëª¨ë¦¬ê°€ ë‚¨ì•„ìžˆì„ ë•Œ ìŠ¤ì™‘ì´ ì‚¬ìš©ë˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ìž…ë‹ˆê¹Œ? ê½¤ ì¢‹ì€ ì›¹ (ì „ìš©) - IT HOW</a></p>

	</li><!-- #comment-## -->

	<li class="comment byuser comment-author-mihvoi even thread-even depth-1" id="li-comment-54793">
		<article id="comment-54793" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img referrerpolicy="no-referrer" alt='mihvoi&#039;s avatar' src='https://2.gravatar.com/avatar/80e6315e330a9f9ca480d5dbf259aecfc8a6cb3cdeb2f4b8415a3d4d46bc079a?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R' srcset='https://2.gravatar.com/avatar/80e6315e330a9f9ca480d5dbf259aecfc8a6cb3cdeb2f4b8415a3d4d46bc079a?s=40&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&#038;r=R 1x, https://2.gravatar.com/avatar/80e6315e330a9f9ca480d5dbf259aecfc8a6cb3cdeb2f4b8415a3d4d46bc079a?s=60&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&#038;r=R 1.5x, https://2.gravatar.com/avatar/80e6315e330a9f9ca480d5dbf259aecfc8a6cb3cdeb2f4b8415a3d4d46bc079a?s=80&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&#038;r=R 2x, https://2.gravatar.com/avatar/80e6315e330a9f9ca480d5dbf259aecfc8a6cb3cdeb2f4b8415a3d4d46bc079a?s=120&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D120&#038;r=R 3x, https://2.gravatar.com/avatar/80e6315e330a9f9ca480d5dbf259aecfc8a6cb3cdeb2f4b8415a3d4d46bc079a?s=160&#038;d=https%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D160&#038;r=R 4x' class='avatar avatar-40' height='40' width='40' loading='lazy' decoding='async' />					<cite class="fn"><a href="http://mihvoi.blogspot.ro/" class="url" rel="ugc external nofollow">mihvoi</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				
				<div class="comment-meta commentmetadata">
					<a href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comment-54793"><time pubdate datetime="2022-05-06T01:04:12-07:00">
					May 6, 2022 at 01:04					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content"><p>Somewhat related: I encountered high swapping and cleared disk cache when Linux was automatically aggregated pages into hugepages.</p>
<p>This aggregation can block DRAM access for a short while even when there is no swapping involved. For some reason this process seems to forcefully free a lot of memory when it works, dramatically reducing the cache. This process is very low level and hard to observe if you don&#8217;t know where to look.</p>
<p>The effect can be a significant decrease in cache memory &#8211; even if there is enough free memory, followed by a big burst of disk access &#8211; because of cleared cache.</p>
<p>Especially for databases, it&#8217;s better to disable transparent_hugepage feature<br />
echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/?replytocom=54793#respond" data-commentid="54793" data-postid="522" data-belowelement="comment-54793" data-respondelement="respond" data-replyto="Reply to mihvoi" aria-label="Reply to mihvoi">Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://www.apthow.com/%eb%82%b4-%ec%95%a0%ed%94%8c%eb%a6%ac%ec%bc%80%ec%9d%b4%ec%85%98%ec%9d%b4-%eb%84%90-%ea%b2%80%ec%82%ac%eb%a5%bc-%ec%88%98%ed%96%89%ed%95%98%eb%8a%94-%eb%8d%b0-24-%ec%9d%98-%ec%8" class="url" rel="ugc external nofollow">ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë„ ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë° 24 %ì˜ ì‹œê°„ì„ ì†Œë¹„í•˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ìž…ë‹ˆê¹Œ? - IT HOW</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://code84.com/182346.html" class="url" rel="ugc external nofollow">NUMAæž¶æž„ &#8211; æºç å·´å£«</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://dbafix.com/how-do-you-tune-mysql-for-a-heavy-innodb-workload/" class="url" rel="ugc external nofollow">How do you tune MySQL for a heavy InnoDB workload?</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://dbafix.com/very-slow-insert-and-update-on-20-core-250-gb-ram-dedicated-mysql-5-5-server-on-ubuntu-closed/" class="url" rel="ugc external nofollow">Very slow Insert and update on 20 core 250 Gb RAM dedicated MYSQL 5.5 server on Ubuntu [closed]</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://dbafix.com/capabilities-of-innodb-insert-performance-3/" class="url" rel="ugc external nofollow">Capabilities of InnoDB INSERT Performance</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://dbafix.com/mysql-using-swap-during-conversion-to-innodb-2/" class="url" rel="ugc external nofollow">MySQL using swap during conversion to InnoDB</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://www.percona.com/blog/mongodb-best-practices" class="url" rel="ugc external nofollow">MongoDB Best Practices: Security, Data Modeling, &amp; Schema Design</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://dbafix.com/innodb-import-performance/" class="url" rel="ugc external nofollow">InnoDB import performance</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://dbafix.com/innodb-index-doesnt-fit-in-memory-3/" class="url" rel="ugc external nofollow">InnoDB Index Doesn&#039;t Fit in Memory</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://www.percona.com/blog/adjusting-mysql-8-0-memory-parameters/" class="url" rel="ugc external nofollow">Adjusting MySQL 8.0 Memory Parameters</a></p>

	</li><!-- #comment-## -->

	<li class="post pingback">
		<p><a href="https://lastweekilearned.com/2025/01/19/week-3-of-january-2025/" class="url" rel="ugc external nofollow">Week 3 of January 2025 &#8211; Last Week I Learned</a></p>

	</li><!-- #comment-## -->
		</ol><!-- .commentlist -->

		
	
	
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">What do you think? <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#respond" style="display:none;">Cancel reply</a></small></h3><form action="https://blog.jcole.us/wp-comments-post.php" method="post" id="commentform" class="comment-form">


<div class="comment-form__verbum transparent"></div><div class="verbum-form-meta"><input type='hidden' name='comment_post_ID' value='522' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />

			<input type="hidden" name="highlander_comment_nonce" id="highlander_comment_nonce" value="e4bc36c9db" />
			<input type="hidden" name="verbum_show_subscription_modal" value="" /></div><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="9bb0849aca" /></p><p style="display: none !important;" class="akismet-fields-container" data-prefix="ak_"><label>&#916;<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js_1" name="ak_js" value="214"/><script>document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );</script></p></form>	</div><!-- #respond -->
	
</div><!-- #comments .comments-area -->

			
			</div><!-- #content .site-content -->
		</div><!-- #primary .content-area -->

		<div id="secondary" class="widget-area" role="complementary">
						<aside id="search-2" class="widget widget_search"><h1 class="widget-title">Search this blog</h1>	<form method="get" id="searchform" action="https://blog.jcole.us/" role="search">
		<label for="s" class="assistive-text">Search</label>
		<input type="text" class="field" name="s" value="" id="s" placeholder="Search &hellip;" />
		<input type="submit" class="submit" name="submit" id="searchsubmit" value="Search" />
	</form>
</aside><aside id="pages-2" class="widget widget_pages"><h1 class="widget-title">Pages</h1>
			<ul>
				<li class="page_item page-item-369"><a href="https://blog.jcole.us/about-me/">About Me</a></li>
<li class="page_item page-item-1376"><a href="https://blog.jcole.us/ftc/">FTC</a></li>
<li class="page_item page-item-906"><a href="https://blog.jcole.us/innodb/">InnoDB</a></li>
<li class="page_item page-item-1116"><a href="https://blog.jcole.us/need-help/">Need help?</a></li>
			</ul>

			</aside>
		<aside id="recent-posts-2" class="widget widget_recent_entries">
		<h1 class="widget-title">Recent Posts</h1>
		<ul>
											<li>
					<a href="https://blog.jcole.us/2025/01/01/reflections-on-a-year-of-biking-for-2024/">Reflections on a year of biking for&nbsp;2024</a>
									</li>
											<li>
					<a href="https://blog.jcole.us/2024/11/30/duwamish-trail-cleanup-saturday-december-7-2024/">Duwamish Trail Cleanup â€“ Saturday, December 7,&nbsp;2024</a>
									</li>
											<li>
					<a href="https://blog.jcole.us/2024/02/17/one-year-on-the-giant-explore-e-2-with-a-rohloff-speedhub-500-14/">One year on the Giant Explore E+ 2 with a Rohloff Speedhub&nbsp;500/14</a>
									</li>
					</ul>

		</aside><aside id="text-2" class="widget widget_text">			<div class="textwidget"><a href="http://www.linkedin.com/in/jeremycole"><img src="https://www.linkedin.com/img/webpromo/btn_viewmy_160x33.gif" width="160" height="33" border="0" alt="View Jeremy Cole's profile on LinkedIn" /></a>

<a href="http://stackoverflow.com/users/1946768/jeremycole">
<img src="https://stackoverflow.com/users/flair/1946768.png" width="208" height="58" border="0" alt="profile for jeremycole at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for jeremycole at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
</a></div>
		</aside><aside id="categories-2" class="widget widget_categories"><h1 class="widget-title">Categories</h1><form action="https://blog.jcole.us" method="get"><label class="screen-reader-text" for="cat">Categories</label><select  name='cat' id='cat' class='postform'>
	<option value='-1'>Select Category</option>
	<option class="level-0" value="4414">Baby</option>
	<option class="level-0" value="1170">Biking</option>
	<option class="level-0" value="1337">California</option>
	<option class="level-0" value="5243">Commuting</option>
	<option class="level-0" value="6096">Cooking</option>
	<option class="level-0" value="1547">Dreams</option>
	<option class="level-0" value="7334">Electronics</option>
	<option class="level-1" value="72346289">&nbsp;&nbsp;&nbsp;AVR</option>
	<option class="level-1" value="72346290">&nbsp;&nbsp;&nbsp;EDA</option>
	<option class="level-0" value="14145">FIRST</option>
	<option class="level-1" value="34445">&nbsp;&nbsp;&nbsp;FTC</option>
	<option class="level-0" value="3419">Freaks</option>
	<option class="level-0" value="54">General</option>
	<option class="level-0" value="51412425">GIS and Cartography</option>
	<option class="level-0" value="55762">Giving</option>
	<option class="level-0" value="610">Linux</option>
	<option class="level-0" value="4419">MySQL</option>
	<option class="level-1" value="39561">&nbsp;&nbsp;&nbsp;InnoDB</option>
	<option class="level-1" value="19793242">&nbsp;&nbsp;&nbsp;MySQL Bugs</option>
	<option class="level-1" value="8804652">&nbsp;&nbsp;&nbsp;MySQL Camp</option>
	<option class="level-1" value="6050649">&nbsp;&nbsp;&nbsp;MySQL Cluster</option>
	<option class="level-1" value="33457617">&nbsp;&nbsp;&nbsp;MySQL Conference</option>
	<option class="level-1" value="72346282">&nbsp;&nbsp;&nbsp;MySQL Meetup</option>
	<option class="level-1" value="72346283">&nbsp;&nbsp;&nbsp;MySQL Patches</option>
	<option class="level-1" value="1279056">&nbsp;&nbsp;&nbsp;MySQL Tips</option>
	<option class="level-0" value="145771">Pedantry</option>
	<option class="level-0" value="436">Photography</option>
	<option class="level-0" value="422">Poetry</option>
	<option class="level-0" value="398">Politics</option>
	<option class="level-0" value="72346285">Proven Scaling</option>
	<option class="level-0" value="755">Quotes</option>
	<option class="level-1" value="72346287">&nbsp;&nbsp;&nbsp;Adrienne Quotes</option>
	<option class="level-1" value="72346288">&nbsp;&nbsp;&nbsp;Airline Quotes</option>
	<option class="level-1" value="72346291">&nbsp;&nbsp;&nbsp;HOTCW</option>
	<option class="level-0" value="47">Rants</option>
	<option class="level-0" value="13426">Robotics</option>
	<option class="level-0" value="157223">Scalability</option>
	<option class="level-0" value="6">Technology</option>
	<option class="level-0" value="5863">Travels</option>
	<option class="level-0" value="444">Yahoo!</option>
</select>
</form><script type="text/javascript">
/* <![CDATA[ */

(function() {
	var dropdown = document.getElementById( "cat" );
	function onCatChange() {
		if ( dropdown.options[ dropdown.selectedIndex ].value > 0 ) {
			dropdown.parentNode.submit();
		}
	}
	dropdown.onchange = onCatChange;
})();

/* ]]> */
</script>
</aside>		</div><!-- #secondary .widget-area -->

	</div><!-- #main .site-main -->

	<footer id="colophon" class="site-footer" role="contentinfo">
		<div class="site-info">
			<a href="https://wordpress.com/?ref=footer_blog" rel="nofollow">Blog at WordPress.com.</a> 		</div><!-- .site-info -->
	</footer><!-- #colophon .site-footer -->
</div><!-- #page .hfeed .site -->

<!--  -->
<script type="speculationrules">
{"prefetch":[{"source":"document","where":{"and":[{"href_matches":"\/*"},{"not":{"href_matches":["\/wp-*.php","\/wp-admin\/*","\/files\/*","\/wp-content\/*","\/wp-content\/plugins\/*","\/wp-content\/themes\/pub\/publish\/*","\/*\\?(.+)"]}},{"not":{"selector_matches":"a[rel~=\"nofollow\"]"}},{"not":{"selector_matches":".no-prefetch, .no-prefetch a"}}]},"eagerness":"conservative"}]}
</script>
<script type="text/javascript" src="//0.gravatar.com/js/hovercards/hovercards.min.js?ver=20252017d2298fc173af206bd9f65440008ab9e1ee2bd896241083289a9e27bd0efc7c" id="grofiles-cards-js"></script>
<script type="text/javascript" id="wpgroho-js-extra">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script crossorigin='anonymous' type='text/javascript'  src='https://s2.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1610363240i'></script>

	<script>
		// Initialize and attach hovercards to all gravatars
		( function() {
			function init() {
				if ( typeof Gravatar === 'undefined' ) {
					return;
				}

				if ( typeof Gravatar.init !== 'function' ) {
					return;
				}

				Gravatar.profile_cb = function ( hash, id ) {
					WPGroHo.syncProfileData( hash, id );
				};

				Gravatar.my_hash = WPGroHo.my_hash;
				Gravatar.init(
					'body',
					'#wp-admin-bar-my-account',
					{
						i18n: {
							'Edit your profile â†’': 'Edit your profile â†’',
							'View profile â†’': 'View profile â†’',
							'Contact': 'Contact',
							'Send money': 'Send money',
							'Sorry, we are unable to load this Gravatar profile.': 'Sorry, we are unable to load this Gravatar profile.',
							'Gravatar not found.': 'Gravatar not found.',
							'Too Many Requests.': 'Too Many Requests.',
							'Internal Server Error.': 'Internal Server Error.',
							'Is this you?': 'Is this you?',
							'Claim your free profile.': 'Claim your free profile.',
							'Email': 'Email',
							'Home Phone': 'Home Phone',
							'Work Phone': 'Work Phone',
							'Cell Phone': 'Cell Phone',
							'Contact Form': 'Contact Form',
							'Calendar': 'Calendar',
						},
					}
				);
			}

			if ( document.readyState !== 'loading' ) {
				init();
			} else {
				document.addEventListener( 'DOMContentLoaded', init );
			}
		} )();
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-67738902000bf8c0810023db800b1703">
	</div>
	<div class="grofile-hash-map-54b2752faa38a2103333b328f178ff96">
	</div>
	<div class="grofile-hash-map-bc40eb0aff49fb0aeef0b781db35e29d">
	</div>
	<div class="grofile-hash-map-37cd63a9fd0344804fd6a991a55c283a">
	</div>
	<div class="grofile-hash-map-e792e519e7eb9a0475fcad1d740506db">
	</div>
	<div class="grofile-hash-map-959be122ff68722c18fc41e487e9465d">
	</div>
	<div class="grofile-hash-map-431009d1e6dfe86a371debf6e925b877">
	</div>
	<div class="grofile-hash-map-d41d8cd98f00b204e9800998ecf8427e">
	</div>
	<div class="grofile-hash-map-6af717749dfca31b2129812cdfb12cc9">
	</div>
	<div class="grofile-hash-map-d5baffdcd81e3c0a88e7f9a3658b2202">
	</div>
	<div class="grofile-hash-map-2c9cb1de22e9da153a5e4518010d3a96">
	</div>
	<div class="grofile-hash-map-748d47f88b9e8a0948111b6af363e15e">
	</div>
	<div class="grofile-hash-map-b2414b220f6bd969dcbc5c9e350494a5">
	</div>
	<div class="grofile-hash-map-b93a633bb776cf37fc1e3aef3d5571e6">
	</div>
	<div class="grofile-hash-map-fa0c839ce44abc90f5066d8332cfa3c1">
	</div>
	<div class="grofile-hash-map-baba52ad93e198d81538b55e3a0f822b">
	</div>
	<div class="grofile-hash-map-65e52d9e5b88abcd8648d581db1bf606">
	</div>
	<div class="grofile-hash-map-77114b14275ee938df918cbfaca63ebb">
	</div>
	<div class="grofile-hash-map-002045b468e6d1994e3d798e30a172ea">
	</div>
	<div class="grofile-hash-map-d1ec59155d766ef114eb74e37152a0b9">
	</div>
	<div class="grofile-hash-map-7343d54b63125b5db452dac896f85bf4">
	</div>
	<div class="grofile-hash-map-76f09754ff542aee5e16aedac787c60c">
	</div>
	<div class="grofile-hash-map-261923f0f22c0ea513b1d93e542e9b62">
	</div>
	<div class="grofile-hash-map-840359b76fd20d53635e1bb45728597d">
	</div>
	<div class="grofile-hash-map-3f87ffff793acb17d83d5f91bb3e396e">
	</div>
	<div class="grofile-hash-map-1faaf1420d3e40c716e20f3a1d32f0d0">
	</div>
	<div class="grofile-hash-map-1b6873c421736e3e80119c92ad6e228c">
	</div>
	<div class="grofile-hash-map-8382271d40f1affb56afb7af7b8ac72f">
	</div>
	<div class="grofile-hash-map-fec2244fdb66766ddc4ca04770491b87">
	</div>
	<div class="grofile-hash-map-0449580529eb3a368cafc4af607fdf17">
	</div>
	<div class="grofile-hash-map-94346f060c3389a390c74cbed6d8f11b">
	</div>
	<div class="grofile-hash-map-bb721d54d79bfb7dc5fb1601d6b50659">
	</div>
	<div class="grofile-hash-map-8477f3989b52703f9bc4adf90477d028">
	</div>
	<div class="grofile-hash-map-96b53402c60bfca602dedd62dd14f0c7">
	</div>
	<div class="grofile-hash-map-0856ced4b0fb82b9e8856cefb83bd152">
	</div>
	<div class="grofile-hash-map-ca3c23a5231bbcb506f978d75320d21d">
	</div>
	<div class="grofile-hash-map-2ff3f02bef0a48c440caeb4c6f1bb932">
	</div>
	<div class="grofile-hash-map-4a7cc1e6e83515240995854fdeeed665">
	</div>
	<div class="grofile-hash-map-3f084aad613fb043ddd77b18f48dbbb6">
	</div>
	<div class="grofile-hash-map-faa7a15b0c213f2e26c8f17df4f67821">
	</div>
	<div class="grofile-hash-map-b549c1053a24cfa1d24ddb3119284aaa">
	</div>
	<div class="grofile-hash-map-dc916761c14d3c8541380462fa1c6705">
	</div>
	<div class="grofile-hash-map-2818bdbdc03d236074518dddce837e94">
	</div>
	<div class="grofile-hash-map-7db426b3117f455e7b3e56d67ecb42a6">
	</div>
	<div class="grofile-hash-map-88412ff308053603e920e2939bd10123">
	</div>
	<div class="grofile-hash-map-4a90b8bad8595ab3183bdaf8feee1219">
	</div>
	<div class="grofile-hash-map-158b6284c52d1a8b3c00c4c1293e3143">
	</div>
	</div>
		<div id="actionbar" dir="ltr" style="display: none;"
			class="actnbr-pub-publish actnbr-has-follow actnbr-has-actions">
		<ul>
								<li class="actnbr-btn actnbr-hidden">
						<a class="actnbr-action actnbr-actn-comment" href="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/#comments">
							<svg class="gridicon gridicons-comment" height="20" width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M12 16l-5 5v-5H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2v9c0 1.1-.9 2-2 2h-7z"/></g></svg>							<span>Comment						</span>
						</a>
					</li>
									<li class="actnbr-btn actnbr-hidden">
						<a class="actnbr-action actnbr-actn-reblog" href="">
							<svg class="gridicon gridicons-reblog" height="20" width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M22.086 9.914L20 7.828V18c0 1.105-.895 2-2 2h-7v-2h7V7.828l-2.086 2.086L14.5 8.5 19 4l4.5 4.5-1.414 1.414zM6 16.172V6h7V4H6c-1.105 0-2 .895-2 2v10.172l-2.086-2.086L.5 15.5 5 20l4.5-4.5-1.414-1.414L6 16.172z"/></g></svg><span>Reblog</span>
						</a>
					</li>
									<li class="actnbr-btn actnbr-hidden">
								<a class="actnbr-action actnbr-actn-follow " href="">
			<svg class="gridicon" height="20" width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path clip-rule="evenodd" d="m4 4.5h12v6.5h1.5v-6.5-1.5h-1.5-12-1.5v1.5 10.5c0 1.1046.89543 2 2 2h7v-1.5h-7c-.27614 0-.5-.2239-.5-.5zm10.5 2h-9v1.5h9zm-5 3h-4v1.5h4zm3.5 1.5h-1v1h1zm-1-1.5h-1.5v1.5 1 1.5h1.5 1 1.5v-1.5-1-1.5h-1.5zm-2.5 2.5h-4v1.5h4zm6.5 1.25h1.5v2.25h2.25v1.5h-2.25v2.25h-1.5v-2.25h-2.25v-1.5h2.25z"  fill-rule="evenodd"></path></svg>
			<span>Subscribe</span>
		</a>
		<a class="actnbr-action actnbr-actn-following  no-display" href="">
			<svg class="gridicon" height="20" width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 4.5H4V15C4 15.2761 4.22386 15.5 4.5 15.5H11.5V17H4.5C3.39543 17 2.5 16.1046 2.5 15V4.5V3H4H16H17.5V4.5V12.5H16V4.5ZM5.5 6.5H14.5V8H5.5V6.5ZM5.5 9.5H9.5V11H5.5V9.5ZM12 11H13V12H12V11ZM10.5 9.5H12H13H14.5V11V12V13.5H13H12H10.5V12V11V9.5ZM5.5 12H9.5V13.5H5.5V12Z" fill="#008A20"></path><path class="following-icon-tick" d="M13.5 16L15.5 18L19 14.5" stroke="#008A20" stroke-width="1.5"></path></svg>
			<span>Subscribed</span>
		</a>
							<div class="actnbr-popover tip tip-top-left actnbr-notice" id="follow-bubble">
							<div class="tip-arrow"></div>
							<div class="tip-inner actnbr-follow-bubble">
															<ul>
											<li class="actnbr-sitename">
			<a href="https://blog.jcole.us">
				<img loading='lazy' alt='' src='https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=50' srcset='https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=50 1x, https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=75 1.5x, https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=100 2x, https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=150 3x, https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=200 4x' class='avatar avatar-50' height='50' width='50' />				Jeremy Cole			</a>
		</li>
										<div class="actnbr-message no-display"></div>
									<form method="post" action="https://subscribe.wordpress.com" accept-charset="utf-8" style="display: none;">
																						<div class="actnbr-follow-count">Join 76 other subscribers</div>
																					<div>
										<input type="email" name="email" placeholder="Enter your email address" class="actnbr-email-field" aria-label="Enter your email address" />
										</div>
										<input type="hidden" name="action" value="subscribe" />
										<input type="hidden" name="blog_id" value="30683698" />
										<input type="hidden" name="source" value="https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/" />
										<input type="hidden" name="sub-type" value="actionbar-follow" />
										<input type="hidden" id="_wpnonce" name="_wpnonce" value="8631c28ddc" />										<div class="actnbr-button-wrap">
											<button type="submit" value="Sign me up">
												Sign me up											</button>
										</div>
									</form>
									<li class="actnbr-login-nudge">
										<div>
											Already have a WordPress.com account? <a href="https://wordpress.com/log-in?redirect_to=https%3A%2F%2Fr-login.wordpress.com%2Fremote-login.php%3Faction%3Dlink%26back%3Dhttps%253A%252F%252Fblog.jcole.us%252F2010%252F09%252F28%252Fmysql-swap-insanity-and-the-numa-architecture%252F">Log in now.</a>										</div>
									</li>
								</ul>
															</div>
						</div>
					</li>
							<li class="actnbr-ellipsis actnbr-hidden">
				<svg class="gridicon gridicons-ellipsis" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M7 12c0 1.104-.896 2-2 2s-2-.896-2-2 .896-2 2-2 2 .896 2 2zm12-2c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm-7 0c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2z"/></g></svg>				<div class="actnbr-popover tip tip-top-left actnbr-more">
					<div class="tip-arrow"></div>
					<div class="tip-inner">
						<ul>
								<li class="actnbr-sitename">
			<a href="https://blog.jcole.us">
				<img loading='lazy' alt='' src='https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=50' srcset='https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=50 1x, https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=75 1.5x, https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=100 2x, https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=150 3x, https://blog.jcole.us/wp-content/uploads/2021/06/jeremy_cole_2010_800px_square.jpg?w=200 4x' class='avatar avatar-50' height='50' width='50' />				Jeremy Cole			</a>
		</li>
								<li class="actnbr-folded-follow">
										<a class="actnbr-action actnbr-actn-follow " href="">
			<svg class="gridicon" height="20" width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path clip-rule="evenodd" d="m4 4.5h12v6.5h1.5v-6.5-1.5h-1.5-12-1.5v1.5 10.5c0 1.1046.89543 2 2 2h7v-1.5h-7c-.27614 0-.5-.2239-.5-.5zm10.5 2h-9v1.5h9zm-5 3h-4v1.5h4zm3.5 1.5h-1v1h1zm-1-1.5h-1.5v1.5 1 1.5h1.5 1 1.5v-1.5-1-1.5h-1.5zm-2.5 2.5h-4v1.5h4zm6.5 1.25h1.5v2.25h2.25v1.5h-2.25v2.25h-1.5v-2.25h-2.25v-1.5h2.25z"  fill-rule="evenodd"></path></svg>
			<span>Subscribe</span>
		</a>
		<a class="actnbr-action actnbr-actn-following  no-display" href="">
			<svg class="gridicon" height="20" width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 4.5H4V15C4 15.2761 4.22386 15.5 4.5 15.5H11.5V17H4.5C3.39543 17 2.5 16.1046 2.5 15V4.5V3H4H16H17.5V4.5V12.5H16V4.5ZM5.5 6.5H14.5V8H5.5V6.5ZM5.5 9.5H9.5V11H5.5V9.5ZM12 11H13V12H12V11ZM10.5 9.5H12H13H14.5V11V12V13.5H13H12H10.5V12V11V9.5ZM5.5 12H9.5V13.5H5.5V12Z" fill="#008A20"></path><path class="following-icon-tick" d="M13.5 16L15.5 18L19 14.5" stroke="#008A20" stroke-width="1.5"></path></svg>
			<span>Subscribed</span>
		</a>
								</li>
														<li class="actnbr-signup"><a href="https://wordpress.com/start/">Sign up</a></li>
							<li class="actnbr-login"><a href="https://wordpress.com/log-in?redirect_to=https%3A%2F%2Fr-login.wordpress.com%2Fremote-login.php%3Faction%3Dlink%26back%3Dhttps%253A%252F%252Fblog.jcole.us%252F2010%252F09%252F28%252Fmysql-swap-insanity-and-the-numa-architecture%252F">Log in</a></li>
																<li class="actnbr-shortlink">
										<a href="https://wp.me/p24Kem-8q">
											<span class="actnbr-shortlink__text">Copy shortlink</span>
											<span class="actnbr-shortlink__icon"><svg class="gridicon gridicons-checkmark" height="16" width="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M9 19.414l-6.707-6.707 1.414-1.414L9 16.586 20.293 5.293l1.414 1.414"/></g></svg></span>
										</a>
									</li>
																<li class="flb-report">
									<a href="https://wordpress.com/abuse/?report_url=https://blog.jcole.us/2010/09/28/mysql-swap-insanity-and-the-numa-architecture/" target="_blank" rel="noopener noreferrer">
										Report this content									</a>
								</li>
															<li class="actnbr-reader">
									<a href="https://wordpress.com/reader/blogs/30683698/posts/522">
										View post in Reader									</a>
								</li>
															<li class="actnbr-subs">
									<a href="https://subscribe.wordpress.com/">Manage subscriptions</a>
								</li>
																<li class="actnbr-fold"><a href="">Collapse this bar</a></li>
														</ul>
					</div>
				</div>
			</li>
		</ul>
	</div>
	
<script>
window.addEventListener( "load", function( event ) {
	var link = document.createElement( "link" );
	link.href = "https://s0.wp.com/wp-content/mu-plugins/actionbar/actionbar.css?v=20250116";
	link.type = "text/css";
	link.rel = "stylesheet";
	document.head.appendChild( link );

	var script = document.createElement( "script" );
	script.src = "https://s0.wp.com/wp-content/mu-plugins/actionbar/actionbar.js?v=20250204";
	script.defer = true;
	document.body.appendChild( script );
} );
</script>

	
	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"https:\/\/blog.jcole.us\/2010\/09\/28\/mysql-swap-insanity-and-the-numa-architecture\/":522};
	</script>
							<div id="fb-root"></div>
			<script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&amp;appId=249643311490&version=v2.3'; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk'));</script>
			<script>
			document.body.addEventListener( 'is.post-load', function() {
				if ( 'undefined' !== typeof FB ) {
					FB.XFBML.parse();
				}
			} );
			</script>
						<script type="text/javascript">
				( function () {
					var currentScript = document.currentScript;

					// Helper function to load an external script.
					function loadScript( url, cb ) {
						var script = document.createElement( 'script' );
						var prev = currentScript || document.getElementsByTagName( 'script' )[ 0 ];
						script.setAttribute( 'async', true );
						script.setAttribute( 'src', url );
						prev.parentNode.insertBefore( script, prev );
						script.addEventListener( 'load', cb );
					}

					function init() {
						loadScript( 'https://platform.linkedin.com/in.js?async=true', function () {
							if ( typeof IN !== 'undefined' ) {
								IN.init();
							}
						} );
					}

					if ( document.readyState === 'loading' ) {
						document.addEventListener( 'DOMContentLoaded', init );
					} else {
						init();
					}

					document.body.addEventListener( 'is.post-load', function() {
						if ( typeof IN !== 'undefined' ) {
							IN.parse();
						}
					} );
				} )();
			</script>
			<script type="text/javascript" src="https://s1.wp.com/wp-content/js/mobile-useragent-info.js?m=1609849039i&amp;ver=20241018" id="mobile-useragent-info-js" defer="defer" data-wp-strategy="defer"></script>
<script type="text/javascript" id="verbum-settings-js-before">
/* <![CDATA[ */
window.VerbumComments = {"Log in or provide your name and email to leave a reply.":"Log in or provide your name and email to leave a reply.","Log in or provide your name and email to leave a comment.":"Log in or provide your name and email to leave a comment.","Receive web and mobile notifications for posts on this site.":"Receive web and mobile notifications for posts on this site.","Name":"Name","Email (address never made public)":"Email (address never made public)","Website (optional)":"Website (optional)","Leave a reply. (log in optional)":"Leave a reply. (log in optional)","Leave a comment. (log in optional)":"Leave a comment. (log in optional)","Log in to leave a reply.":"Log in to leave a reply.","Log in to leave a comment.":"Log in to leave a comment.","Logged in via %s":"Logged in via %s","Log out":"Log out","Email":"Email","(Address never made public)":"(Address never made public)","Instantly":"Instantly","Daily":"Daily","Reply":"Reply","Comment":"Comment","WordPress":"WordPress","Weekly":"Weekly","Notify me of new posts":"Notify me of new posts","Email me new posts":"Email me new posts","Email me new comments":"Email me new comments","Cancel":"Cancel","Write a comment...":"Write a comment...","Write a reply...":"Write a reply...","Website":"Website","Optional":"Optional","We'll keep you in the loop!":"We'll keep you in the loop!","Loading your comment...":"Loading your comment...","Discover more from":"Discover more from Jeremy Cole","Subscribe now to keep reading and get access to the full archive.":"Subscribe now to keep reading and get access to the full archive.","Continue reading":"Continue reading","Never miss a beat!":"Never miss a beat!","Interested in getting blog post updates? Simply click the button below to stay in the loop!":"Interested in getting blog post updates? Simply click the button below to stay in the loop!","Enter your email address":"Enter your email address","Subscribe":"Subscribe","Comment sent successfully":"Comment sent successfully","Save my name, email, and website in this browser for the next time I comment.":"Save my name, email, and website in this browser for the next time I comment.","hovercardi18n":{"Edit your profile \u2192":"Edit your profile \u2192","View profile \u2192":"View profile \u2192","Contact":"Contact","Send money":"Send money","Profile not found.":"Profile not found.","Too Many Requests.":"Too Many Requests.","Internal Server Error.":"Internal Server Error.","Sorry, we are unable to load this Gravatar profile.":"Sorry, we are unable to load this Gravatar profile."},"siteId":30683698,"postId":522,"mustLogIn":false,"requireNameEmail":true,"commentRegistration":false,"connectURL":"https:\/\/jcoledotus.wordpress.com\/public.api\/connect\/?action=request&domain=blog.jcole.us","logoutURL":"https:\/\/jcoledotus.wordpress.com\/wp-login.php?action=logout&_wpnonce=ba22c74fdd","homeURL":"https:\/\/blog.jcole.us\/","subscribeToBlog":true,"subscribeToComment":true,"isJetpackCommentsLoggedIn":false,"jetpackUsername":"","jetpackUserId":0,"jetpackSignature":"","jetpackAvatar":"https:\/\/0.gravatar.com\/avatar\/ad516503a11cd5ca435acc9bb6523536?s=96","enableBlocks":true,"enableSubscriptionModal":true,"currentLocale":"en","isJetpackComments":false,"allowedBlocks":["core\/paragraph","core\/list","core\/code","core\/list-item","core\/quote","core\/image","core\/embed","core\/quote","core\/code"],"embedNonce":"dc96985f90","verbumBundleUrl":"https:\/\/s2.wp.com\/wp-content\/mu-plugins\/jetpack-mu-wpcom-plugin\/sun\/jetpack_vendor\/automattic\/jetpack-mu-wpcom\/src\/features\/verbum-comments\/dist\/index.js","isRTL":false,"vbeCacheBuster":1738686361,"iframeUniqueId":0,"colorScheme":false}
/* ]]> */
</script>
<script crossorigin='anonymous' type='text/javascript'  src='https://s0.wp.com/wp-content/mu-plugins/likes/queuehandler.js?m=1741961244i'></script>
<script type="text/javascript" src="https://s1.wp.com/wp-content/mu-plugins/jetpack-mu-wpcom-plugin/sun/jetpack_vendor/automattic/jetpack-mu-wpcom/src/build/verbum-comments/assets/dynamic-loader.js?m=1741800217i&amp;minify=false&amp;ver=74baca08b8baf473b8a0" id="verbum-dynamic-loader-js" defer="defer" data-wp-strategy="defer"></script>
<script type="text/javascript" id="sharing-js-js-extra">
/* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1","is_stats_active":"1"};
/* ]]> */
</script>
<script crossorigin='anonymous' type='text/javascript'  src='https://s1.wp.com/_static/??-eJx9jtEOgjAMRX/IUYkCT8ZPMWOrsLGWhW4x/L0TwUcfmrS9pyeFV1Rm5oScII1IKBBz/6ngZAQvIKRDUIScKy8nKLxjE7ItZEnNTCVKasEY1oocH9AhpaxiyINjAT05IUzqUp3hUSS/xXPZYPvn1mOK2kz7DJL5q+izCxZk1Atabe26tY6H/ZU73erueqnbpmta/wYXzVbg'></script>
<script type="text/javascript" id="sharing-js-js-after">
/* <![CDATA[ */
var windowOpen;
			( function () {
				function matches( el, sel ) {
					return !! (
						el.matches && el.matches( sel ) ||
						el.msMatchesSelector && el.msMatchesSelector( sel )
					);
				}

				document.body.addEventListener( 'click', function ( event ) {
					if ( ! event.target ) {
						return;
					}

					var el;
					if ( matches( event.target, 'a.share-bluesky' ) ) {
						el = event.target;
					} else if ( event.target.parentNode && matches( event.target.parentNode, 'a.share-bluesky' ) ) {
						el = event.target.parentNode;
					}

					if ( el ) {
						event.preventDefault();

						// If there's another sharing window open, close it.
						if ( typeof windowOpen !== 'undefined' ) {
							windowOpen.close();
						}
						windowOpen = window.open( el.getAttribute( 'href' ), 'wpcombluesky', 'menubar=1,resizable=1,width=600,height=400' );
						return false;
					}
				} );
			} )();
var windowOpen;
			( function () {
				function matches( el, sel ) {
					return !! (
						el.matches && el.matches( sel ) ||
						el.msMatchesSelector && el.msMatchesSelector( sel )
					);
				}

				document.body.addEventListener( 'click', function ( event ) {
					if ( ! event.target ) {
						return;
					}

					var el;
					if ( matches( event.target, 'a.share-facebook' ) ) {
						el = event.target;
					} else if ( event.target.parentNode && matches( event.target.parentNode, 'a.share-facebook' ) ) {
						el = event.target.parentNode;
					}

					if ( el ) {
						event.preventDefault();

						// If there's another sharing window open, close it.
						if ( typeof windowOpen !== 'undefined' ) {
							windowOpen.close();
						}
						windowOpen = window.open( el.getAttribute( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
						return false;
					}
				} );
			} )();
/* ]]> */
</script>

	<script type="text/javascript">
		(function () {
			var wpcom_reblog = {
				source: 'toolbar',

				toggle_reblog_box_flair: function (obj_id, post_id) {

					// Go to site selector. This will redirect to their blog if they only have one.
					const postEndpoint = `https://wordpress.com/post`;

					// Ideally we would use the permalink here, but fortunately this will be replaced with the 
					// post permalink in the editor.
					const originalURL = `${ document.location.href }?page_id=${ post_id }`; 
					
					const url =
						postEndpoint +
						'?url=' +
						encodeURIComponent( originalURL ) +
						'&is_post_share=true' +
						'&v=5';

					const redirect = function () {
						if (
							! window.open( url, '_blank' )
						) {
							location.href = url;
						}
					};

					if ( /Firefox/.test( navigator.userAgent ) ) {
						setTimeout( redirect, 0 );
					} else {
						redirect();
					}
				},
			};

			window.wpcom_reblog = wpcom_reblog;
		})();
	</script>
	<iframe src='https://widgets.wp.com/likes/master.html?ver=20250515#ver=20250515' scrolling='no' id='likes-master' name='likes-master' style='display:none;'></iframe>
	<div id='likes-other-gravatars' role="dialog" aria-hidden="true" tabindex="-1"><div class="likes-text"><span>%d</span></div><ul class="wpl-avatars sd-like-gravatars"></ul></div>
	<script src="//stats.wp.com/w.js?68" defer></script> <script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'30683698','blog_tz':'-7','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'30683698','v':'wpcom','tz':'-7','user_id':'0','post':'522','subd':'jcoledotus'}]);
_stq.push(['extra', {'crypt':'UE40eW5QN0p8M2Y/RE1mNzc2NTVTamdsRWFxcEV3XUtMXVR5aWlmMVNIcUxBaFstUWRrZVpWQ2tORExSfEpUVm05SlpEZzZWOEtlbW5nZHV0dkhDNjhwP35JbkdHLyZqYmIlbHJYN35QWzFGOVImS2gtJSY4MiVGdVRlLVE3dmJLU2grS01yM3lxbFlifkIyUVolfG8wUisxZS92c1Nva2d+W1dpRHYra0FKdVl1K1RkSGtWc3owX2smUD9RWkdDTktGcE9Ga3BPSnBiM3dpSGZTZ0RMa2hjJmouQVtlZ0o/XzZFL2lUQ3FTcUxYXzQ3VVFmb2dCQUQtZGpYanR0SE1KNEtYazlHMUsmRmdQL2JZT012LVVvZ2lIVm5wcmk2Q3pXUWl0Q2g5SkglK1dOQ3h3'}]);
_stq.push([ 'clickTrackerInit', '30683698', '522' ]);
</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:1px;width:1px;overflow:hidden;position:absolute;bottom:1px;" alt="" /></noscript>
<script defer id="bilmur" data-customproperties="{&quot;enq_jquery&quot;:&quot;1&quot;,&quot;logged_in&quot;:&quot;0&quot;,&quot;wptheme&quot;:&quot;pub\/publish&quot;,&quot;wptheme_is_block&quot;:&quot;0&quot;}" data-provider="wordpress.com" data-service="simple" data-site-tz="America/Los_Angeles"   src="/wp-content/js/bilmur-4.min.js?i=12&m=202520"></script><script>
( function() {
	function getMobileUserAgentInfo() {
		if ( typeof wpcom_mobile_user_agent_info === 'object' ) {
			wpcom_mobile_user_agent_info.init();
			var mobileStatsQueryString = '';

			if ( wpcom_mobile_user_agent_info.matchedPlatformName !== false ) {
				mobileStatsQueryString += '&x_' + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
			}

			if ( wpcom_mobile_user_agent_info.matchedUserAgentName !== false ) {
				mobileStatsQueryString += '&x_' + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
			}

			if ( wpcom_mobile_user_agent_info.isIPad() ) {
				mobileStatsQueryString += '&x_' + 'ipad_views' + '=' + 'views';
			}

			if ( mobileStatsQueryString != '' ) {
				new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
			}
		}
	}

	document.addEventListener( 'DOMContentLoaded', getMobileUserAgentInfo );
} )();
</script>
<script>
(function() {
	'use strict';

	const fetches = {};
	const promises = {};
	const urls = {
		'wp-polyfill': 'https://s1.wp.com/wp-includes/js/dist/vendor/wp-polyfill.min.js?m=1744646400i&ver=3.15.0',
		'verbum': 'https://s2.wp.com/wp-content/mu-plugins/jetpack-mu-wpcom-plugin/sun/jetpack_vendor/automattic/jetpack-mu-wpcom/src/build/verbum-comments/verbum-comments.js?m=1746618905i&minify=false&ver=e7eb4580fccc06e8771c'
	};
	const loaders = {
		'verbum': () => {
			fetchExternalScript('wp-polyfill');
			fetchExternalScript('verbum');
			promises['wp-polyfill'] = promises['wp-polyfill'] || loadWPScript('wp-polyfill');
			promises['verbum'] = promises['verbum'] || promises['wp-polyfill'].then( () => loadWPScript('verbum') );
			return promises['verbum'];
		},
		
	};
	const scriptExtras = {
		
	};

	window.WP_Enqueue_Dynamic_Script = {
		loadScript: (handle) => {
			if (!loaders[handle]) {
				console.error('WP_Enqueue_Dynamic_Script: unregistered script `' + handle + '`.');
			}
			return loaders[handle]();
		}
	};

	function fetchExternalScript(handle) {
		if (!urls[handle]) {
			return Promise.resolve();
		}

		fetches[handle] = fetches[handle] || fetch(urls[handle], { mode: 'no-cors' });
		return fetches[handle];
	}

	function runExtraScript(handle, type, index) {
		const id = 'wp-enqueue-dynamic-script:' + handle + ':' + type + ':' + (index + 1);
		const template = document.getElementById(id);
		if (!template) {
			return Promise.reject();
		}

		const script = document.createElement( 'script' );
		script.innerHTML = template.innerHTML;
		document.body.appendChild( script );
		return Promise.resolve();
	}

	function loadExternalScript(handle) {
		if (!urls[handle]) {
			return Promise.resolve();
		}

		return fetches[handle].then(() => {
			return new Promise((resolve, reject) => {
				const script = document.createElement('script');
				script.onload = () => resolve();
				script.onerror = (e) => reject(e);
				script.src = urls[handle];
				document.body.appendChild(script);
			});
		});
	}

	function loadExtra(handle, pos) {
		const count = (scriptExtras[handle] && scriptExtras[handle][pos]) || 0;
		let promise = Promise.resolve();

		for (let i = 0; i < count; i++) {
			promise = promise.then(() => runExtraScript(handle, pos, i));
		}

		return promise;
	}

	function loadWPScript(handle) {
		// Core loads scripts in this order. See: https://github.com/WordPress/WordPress/blob/a59eb9d39c4fcba834b70c9e8dfd64feeec10ba6/wp-includes/class-wp-scripts.php#L428.
		return loadExtra(handle, 'translations')
			.then(() => loadExtra(handle, 'before'))
			.then(() => loadExternalScript(handle))
			.then(() => loadExtra(handle, 'after'));
	}
} )();
</script>

</body>
</html>