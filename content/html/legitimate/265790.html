<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" href="/mjr.ico">
<style>

body {
background-color: #888;
}

pre {overflow-x: auto;}

@media print {
 .printerremoval {
  display:none;
 }
}


.horizontal_divider{
background-color: #888; 
margin-left:-8px; 
margin-right:-8px;
padding-left:8px;
padding-right:8px;  
border-top: 8px solid white;
border-bottom: 8px solid white;
margin-bottom:8px;
width: 100%;  
 height: 10px; 
clear:both
}

div.main { background: white; padding: 0px; border:0px}
div.footer { padding: 0px 0px 0px 0px;margin:0px; border:0px;}
.footer > p {margin: 0px;}

ul li {padding: 4px 0px 4px 0px;}

span.uld, ul.drop a { display:block; color: black; text-decoration: none; padding: 5px 10px;}
span.uld:hover, ul.drop a:hover {color:#fff;}
ul.drop, ul.drop li, ul.drop ul { list-style: none; margin: 0; padding: 0px; background: #dddddd; color: black;}
ul.drop { position: relative; z-index: 500; float: left;}
ul.drop li { float: left; line-height: 1.3em; vertical-align: middle; background: #dddddd; padding: 0px;}
ul.drop li.hover, ul.drop li:hover { cursor: default; position: relative; background: #900; color: #fff;}
ul.drop ul { visibility: hidden; position: absolute; top: 100%; left: 0;}
ul.drop ul li { float: none; background: #E0B0B0;}
ul.drop li:hover > ul { visibility: visible }

a#privacy:link {color:#cccccc; text-decoration:none;}
a#privacy:visited {color:#ff9090; text-decoration:none;}
a#privacy:hover {color:#ff9090; text-decoration:none;}
a#privacy:active {color:#ff9090; text-decoration:none;}

a:link {text-decoration:none;color: #900000;}
a:visited {text-decoration:none; color: #900000}
a.white:link {color: white;}
a.white:visited {color: white;}

h1 {font-size:22pt; text-align: center; font-weight: normal;color:#000; 
}

h1 a:visited, h1 a, h1 a:link {color:#000;}

h1 {
display:inline-block;
width: 100%;
text-align:center;
margin:0 auto;
}


p.footer {padding:0px 0px 0px 0px;margin:0;border:0;color:#bbbbbb;}
div.footer a:hover {color:#ffffff;}
div.footer a {color:#bbbbbb;}
div.pop_out{display: inline-block; border: 1px solid #C0C0C0; padding: 10px;
  margin: 5px 5px 10px; background: #F3F3F3; box-shadow: 2px 2px 6px #808080; }
div.modified{width:100px;height:16px;font-size:12px;padding-left:3px;border:0}

.f_res{max-width: 40%; float: right;}
.f_res>img{max-width:80%; margin: 10px auto; display: block;}

</style>



<title>The case against C</title>

</head>
<body style="font-family: gill, helvetica, sans-serif; margin: 0; max-width: 1000px; margin: auto;line-height: 160%;">



<div class="main" onClick="return true">
<div class="printerremoval">
<nav>
<div style="background-color: #dddddd;">
<ul class="drop">
<li><span class="uld">About</span>
  <ul>
 <li><a href="/">Home</a></li>
 <li><a href="/personal/">MJR</a></li>
  </ul>
</li>
<li><a href="#">Research</a>
 <ul>
 <li><a href="/research/index.html">Overview</a></li>
 <li><a href="/castep/">CASTEP&nbsp;notes</a></li>
 </ul>
</li>
<li><a href="#">Teaching</a>
 <ul>
 <li><a href="/courses/">Courses</a></li>
 </ul>
</li>
<li><span class="uld">Numerics</span>
 <ul>
 <li><a href="/linpack/">Linpack</a></li>
 <li><a href="/numerics/integrate.pdf">1D&nbsp;quadrature&nbsp;&amp;&nbsp;peaks</a></li>
 <li><a href="/numerics/LCG.html">Linear&nbsp;Congrugential&nbsp;RNG</a></li>
 </ul>
</li>
<li><a href="#">Programs</a>
 <ul>
<li><a href="https://www.c2x.org.uk/">c2x</a></li>
 <li><a href="/sw/bmp2eps/">bmp2eps</a></li>
 <li><a href="/sw/op2kcg/">op2kcg</a></li>
 <li><a href="/personal/sw/">Miscellaneous</a></li>
 </ul>
</li>
<li><a href="/">IT&nbsp;notes</a></li>
<li><a href="#">Cambridge</a>
  <ul>
    <li><a href="/cambridge/prints/">Antique&nbsp;Prints</a></li>
    <li><a href="/cambridge/prints/past.html">Lost&nbsp;Buildings</a></li>
    <li><a href="/personal/photos/">Modern&nbsp;Photos</a></li>
  </ul>
</li>
<li><a href="#">USS</a>
  <ul>
  <li><a href="/cambridge/USS/">Overview</a></li>
  <li><a href="/cambridge/USS/benefits.html">Benefits</a></li>
  <li><a href="/cambridge/USS/contribution_rates.html">Costs</a></li>
  <li><a href="/cambridge/USS/2022_changes.html">2022&nbsp;Changes</a></li>
  <li><a href="/cambridge/USS/2022_concession.html">2022&nbsp;Concession</a></li>
  <li><a href="/cambridge/USS/fair_changes.html">2022&nbsp;Fairness</a></li>
  <li><a href="/cambridge/USS/deficits.html">Deficit</a></li>
  <li><a href="/cambridge/USS/TPS.html">The&nbsp;TPS</a></li>
  <li><a href="/cambridge/USS/final_salary.html">Final&nbsp;Salary</a></li>
  <li><a href="/cambridge/USS/third_way.html">Alternatives</a></li>
  <li><a href="/cambridge/USS/politics.html">Politics</a></li>
  <li><a href="/cambridge/USS/leaving.html">Leaving</a></li>
  <li><a href="/cambridge/USS/Trinity.html">Trinity</a></li>
  <li><a href="/cambridge/USS/pay.html">Pay&nbsp;Settlements</a></li>
  </ul>
</ul>
<div style="clear: both;"></div>
</div>
</nav>
<div style="clear: both;"></div>
</div>


<div style="background: white; padding: 8px;">



<H1>Why C is not a good numerical language</H1>


<p>
The religious war between C and FORTRAN lovers is an old one, and
those of us supporting FORTRAN are often accused of living in an era
somewhere between the 1960's and the age of the dinosaurs. Although I
do write code in both C and FORTRAN, and even write numerical code in
C, this page highlights some of the issues of which good C programmers
should be aware.</p>

<p>
Naturally, there is nothing wrong with writing in C if most of the
time is spent in library calls, if the code is a messy heap of integer
fiddling, or if the code is designed for a processor where
optimisation is trivial. Even C++ is reasonable if its sophisticated
data types add significant amounts of clarity to the code.</p>

<H2>The Problem</H2>

<p>
A compiler's job is to produce correct, optimised code corresponding
to the source offered to it. The C language has been called `device
independent assembler', and, indeed, it does map fairly directly onto
the sort of operations that microprocessors of the 1970s performed. It
is a general-purpose language.</p>

<p>
FORTRAN, or FORmula TRANslation, owes as much to the language of
simple algebra as to machine code, and its stricter, more precise
syntax makes the compiler's job of optimisation for `exotic'
architectures (SMP, vector, preloading) very much easier. It is not
that C compilers are less good: they cannot be as good.

<p>
This all matters little if one's target processor is a single late 1990's
RISC processor, or one of the IA32 line. But then, with such modest
aims, one is hardly concerned with serious numerical work.

<hr>

<ul>
<li><a href="hello_world.html">It's hard</a>: an aside on why C is not
a good first language.
<li><a href="for.html">No loops</a>: why C's <tt>for</tt> construct is
unhelpful.
<li><a href="indep.html">No independence</a>: why C's pointers destroy
optimisation, even if you don't use them.
<li><a href="directives.html">Directives to the rescue?</a>
</ul>

<p>The comments against C apply equally to C++. One could readily write a
critique of FORTRAN90 too, but I have not yet had the time...

  <hr/>
  <h3>2019 Update</h3>

  <p>The above pages were mostly written over two decades ago (they
  are slightly older than the copyright statement suggests). Now there
  is less use of C, more of C++ and python, and Fortran is evolving
  too. One new issue has arisen from modern hardware:
    vectorisation. So I add:

    <ul>
      <li><a href="vec.html">Loops and vectorisation</a></li>
    </ul>
  
</div>
</div>

<div class="footer" style="background: #900; color: #fff; margin: 0; border-width: 0px;">


<p style="text-align: right;">Copyright MJ Rutter,
mjr19@(University domain)</p>

<div style="clear:both"></div>
</div>
</body>
</html>


